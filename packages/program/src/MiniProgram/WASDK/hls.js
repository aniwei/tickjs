!function(e){var t={};function n(s){if(t[s])return t[s].exports;var o=t[s]={i:s,l:!1,exports:{}};return e[s].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(s,o,function(t){return e[t]}.bind(null,o));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=237)}({19:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=n(24),o=n(38);let i,a=!1,r=[],c=!1;const l=new Set;t.getMessager=()=>{if(i)return i;const e="WEBVIEW_"+o.webviewID;return i=new s(e),i};const d=e=>{l.forEach(t=>{try{t(e)}catch(e){}})},u=e=>{if(a)d(e);else{const{command:t}=e;switch(t){case"WEBVIEW_ON_EVENT":case"APPSERVICE_PUBLISH":case"APPSERVICE_PUBLISH_SYNC":r.push(e);break;default:d(e)}}};function h(e){e.fromWebviewID=o.webviewID,t.getMessager().send(e)}function m(e){l.add(e),c||(t.getMessager().registerCallback(u),c=!0)}function f(e){l.delete(e),c||(t.getMessager().registerCallback(u),c=!0)}function g(e,n){a!==e&&(a=e,t.getMessager()._parseJson=n,e&&(r.forEach(e=>d(e)),r=[]))}t.send=h,t.registerCallback=m,t.removeCallback=f,t.setPageframeReady=g,t.setJSONParser=function(e){t.getMessager()._parseJson=e},t.default={send:h,registerCallback:m,removeCallback:f,setPageframeReady:g}},22:function(e,t,n){"use strict";var s=Object.prototype.hasOwnProperty,o="~";function i(){}function a(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function r(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(o=!1)),r.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)s.call(e,t)&&n.push(o?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},r.prototype.listeners=function(e,t){var n=o?o+e:e,s=this._events[n];if(t)return!!s;if(!s)return[];if(s.fn)return[s.fn];for(var i=0,a=s.length,r=new Array(a);i<a;i++)r[i]=s[i].fn;return r},r.prototype.emit=function(e,t,n,s,i,a){var r=o?o+e:e;if(!this._events[r])return!1;var c,l,d=this._events[r],u=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),u){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,n),!0;case 4:return d.fn.call(d.context,t,n,s),!0;case 5:return d.fn.call(d.context,t,n,s,i),!0;case 6:return d.fn.call(d.context,t,n,s,i,a),!0}for(l=1,c=new Array(u-1);l<u;l++)c[l-1]=arguments[l];d.fn.apply(d.context,c)}else{var h,m=d.length;for(l=0;l<m;l++)switch(d[l].once&&this.removeListener(e,d[l].fn,void 0,!0),u){case 1:d[l].fn.call(d[l].context);break;case 2:d[l].fn.call(d[l].context,t);break;case 3:d[l].fn.call(d[l].context,t,n);break;case 4:d[l].fn.call(d[l].context,t,n,s);break;default:if(!c)for(h=1,c=new Array(u-1);h<u;h++)c[h-1]=arguments[h];d[l].fn.apply(d[l].context,c)}}return!0},r.prototype.on=function(e,t,n){var s=new a(t,n||this),i=o?o+e:e;return this._events[i]?this._events[i].fn?this._events[i]=[this._events[i],s]:this._events[i].push(s):(this._events[i]=s,this._eventsCount++),this},r.prototype.once=function(e,t,n){var s=new a(t,n||this,!0),i=o?o+e:e;return this._events[i]?this._events[i].fn?this._events[i]=[this._events[i],s]:this._events[i].push(s):(this._events[i]=s,this._eventsCount++),this},r.prototype.removeListener=function(e,t,n,s){var a=o?o+e:e;if(!this._events[a])return this;if(!t)return 0==--this._eventsCount?this._events=new i:delete this._events[a],this;var r=this._events[a];if(r.fn)r.fn!==t||s&&!r.once||n&&r.context!==n||(0==--this._eventsCount?this._events=new i:delete this._events[a]);else{for(var c=0,l=[],d=r.length;c<d;c++)(r[c].fn!==t||s&&!r[c].once||n&&r[c].context!==n)&&l.push(r[c]);l.length?this._events[a]=1===l.length?l[0]:l:0==--this._eventsCount?this._events=new i:delete this._events[a]}return this},r.prototype.removeAllListeners=function(e){var t;return e?(t=o?o+e:e,this._events[t]&&(0==--this._eventsCount?this._events=new i:delete this._events[t])):(this._events=new i,this._eventsCount=0),this},r.prototype.off=r.prototype.removeListener,r.prototype.addListener=r.prototype.on,r.prototype.setMaxListeners=function(){return this},r.prefixed=o,r.EventEmitter=r,e.exports=r},237:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=n(238),o=n(239),i=n(243),a=n(244),r=n(245);n(246);const c=n(249),l=n(49),d=n(250),u=n(251),h=n(19),m=n(48);function f(){(new c.default).init(),new d.default;const e=document.createEvent("UIEvent");e.initEvent("WeixinJSBridgeReady",!1,!1),document.dispatchEvent(e),l.default.init(window),u.default.init()}m.Timing.setMessager(h.default),location.pathname.endsWith("mainframe.html")||(window.__global.timing=new m.Timing({document:document,MutationObserver:window.MutationObserver||window.__global.MutationObserver})),window.getNewWeixinJSBridge=()=>{const e={};return Object.assign(Object.assign({on:s.default(),invoke:o.default(e),publish:i.default(e),subscribe:a.default()},r.default()),{__setCommonPayload(t,n){e[t]=n}})},window.WeixinJSBridge=window.getNewWeixinJSBridge(),"complete"===document.readyState?f():window.addEventListener("load",(function(e){f()})),m.Timing.addCommonPoint("PAGEFRAME_JSDEBUG_LOADED")},238:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=n(19),o=n(66),i=n(39);t.default=()=>{let e={},t=!1,n=!1;const a=t=>{const{command:n,data:s}=t;"WEBVIEW_ON_EVENT"===n&&function(t,n){const s=e[t];"function"==typeof s&&s(n,o.default.webviewID)}(s.eventName,s.data)};return i.default.once("RESET_INSTANCE",()=>{n=!0,e={},s.default.removeCallback(a)}),t||(t=!0,s.default.registerCallback(a)),function(t,s){n||s&&(e[t]=s)}}},239:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=n(19),o=n(49),i=n(242),a=n(39);t.default=e=>{let t={},n=1,r=!1,c=!1;const l=e=>{const{command:n,data:s}=e;if("WEBVIEW_INVOKE_CALLBACK"===n){const e=s.callbackID,n=t[e];"function"==typeof n&&n(s.res),delete t[e]}};return a.default.once("RESET_INSTANCE",()=>{c=!0,t={},s.default.removeCallback(l)}),r||(r=!0,s.default.registerCallback(l)),function(a,r,l){if(c)return;if("disableScrollBounce"===a)return void o.default.togglePullDownRefresh(r.disable);const d=function(e,t=!1){return function(n){"function"==typeof e&&(t?e(n):setTimeout(()=>{e(n)},0))}}(l);if(i.default[a])i.default[a](a,r,d);else{const o=n++;t[o]=d,s.default.send({command:"WEBVIEW_INVOKE",data:{api:a,args:r,callbackID:o},common:e})}}}},24:function(e,t){const n=window.navigator||window.__global.navigator,s=window.WebSocket||window.__global.WebSocket,o=window.prompt||window.__global.prompt,i=n.userAgent.match(/port\/(\d*)/),a=i?parseInt(i[1]):9974,r="ws://0.0.0.0:"+a;let c=0;e.exports=class{constructor(e,t=!0){this._protocol=e,this._needToken=t,this._ws=null,this._msgQueue=[],this._callback=new Set,this._parseJson=null,this.tryTime=0,"complete"==document.readyState?setTimeout(()=>{this.connect()}):window.addEventListener("load",()=>{this.connect()})}connect(){if(!a)return;if(c++>=10)return;let e=this._protocol;this._needToken&&(e=`${e}#${o("GET_MESSAGE_TOKEN")}#`),this._ws=new s(r,e),this._ws.onopen=e=>{let t=[].concat(this._msgQueue);this._msgQueue=[],t.forEach(e=>{this.send(e)})},this._ws.onclose=e=>{this._ws=null,setTimeout(()=>{this.tryTime<100&&(this.tryTime++,this.connect())},150)},this._ws.onmessage=e=>{try{let t=this._parseJson?this._parseJson(e.data):JSON.parse(e.data);this._callback.forEach(e=>{try{e.call(this,t)}catch(e){}})}catch(e){}}}send(e){this._ws&&this._ws.readyState===s.OPEN?this._ws.send(JSON.stringify(e)):this._msgQueue.push(e)}registerCallback(e){"function"==typeof e&&this._callback.add(e)}removeCallback(e){this._callback.delete(e)}}},240:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default="data:image/gif;base64,R0lGODlhQAAMAMQZAPT09Orq6ubm5unp6dPT06ysrPz8/NbW1q+vr9fX1+vr687Ozv39/fr6+tXV1Z6ens3NzZ2dnZubm66urpycnKurq+Xl5czMzJmZmf///wAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NTc3MiwgMjAxNC8wMS8xMy0xOTo0NDowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDphODFiMWQ5My0wMDIwLTRiYmItYjVlMS04YjI4NTFkMzMzMjIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MjFEQzRGRkU4NkU4MTFFNjkwOTg4NjNGN0JEMzY0OTUiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MjFEQzRGRkQ4NkU4MTFFNjkwOTg4NjNGN0JEMzY0OTUiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDplY2RjM2MyNC03NDBkLTQ1NzMtOTc0Ni1iZGQ2MzhlMjEyYjUiIHN0UmVmOmRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo3MGUzZDU2Ny1jZTk1LTExNzktYWFmZC04MmQ1NzRhYmI2YzIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4B//79/Pv6+fj39vX08/Lx8O/u7ezr6uno5+bl5OPi4eDf3t3c29rZ2NfW1dTT0tHQz87NzMvKycjHxsXEw8LBwL++vby7urm4t7a1tLOysbCvrq2sq6qpqKempaSjoqGgn56dnJuamZiXlpWUk5KRkI+OjYyLiomIh4aFhIOCgYB/fn18e3p5eHd2dXRzcnFwb25tbGtqaWhnZmVkY2JhYF9eXVxbWllYV1ZVVFNSUVBPTk1MS0pJSEdGRURDQkFAPz49PDs6OTg3NjU0MzIxMC8uLSwrKikoJyYlJCMiISAfHh0cGxoZGBcWFRQTEhEQDw4NDAsKCQgHBgUEAwIBAAAh+QQJFAAZACwAAAAAQAAMAAAFvmCWMQTyPAjBiGzrukOyLMnw3jegCIICtIACZkgs/HC3xuHCbB4ayJshYKlaA4aRkMgtZKOtZXPsALuo1nQgQ+C6MQSzaDCuX2xyQHpvASDeXAhyGQl2YwmDCnxpChKARBSDEIZNEIMCi1YCjo8YD5KUTAuXmVUCf52CcoWhiHKKpQptnXFydKF4ZnqlAAZbbxVfcg6UZYMZaHxrGUFvRscZSnYOUMdTysIkExEREyrQLAMHMwe54AABPAFHGSEAIfkECRQAGQAsAAAAAEAADAAABb9gJgKKICiAqK4syxDI8yAE097tkCxLMqyGgGVIDBhwOEABw2wWUshW43CpWg8NkZDIDURdy6a4cPyqqNa0IwPgui1QM0FMxxDMokF6fxko3lwKeBkIdWIIgwl8aQkCgEQCgxKGTRSDEItWEI6PFpF4k5QYD5eZVQt/nYJ4haKIeIqmCW2dcV9zond4eqY/W29egwZhdRVleA6ZaxlBwMd4SnVPgyJTfA5ZKgABJgG21C8TERETNdQrAwc8Bz8iIQAh+QQFFAAZACwAAAAAQAAMAAAFv2AmDsmyJIOormwLKIKgAG3dMgTyPAjBqI3DZUg8NGw2Q8DCbAYMyBqggKlaC7SMkMh1RFvLpjjwXTGo1nTBMOC6L6lyBiCuW7JlQnqPISTeXAlyGQp2YgqDCHxpCBCARBCDAoZNAoMSi1YUjo8XC5KUTJZymJkYD3+dgnKFoYhyiqYIbZ1xZXSheF96pgQZDo9egxlhdmSDBmh8FVBBbw5Hw0rGUMNTfFgrAwcmB7bDIgABMQG6wzgTERETPiIhADs="},241:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default="data:image/gif;base64,R0lGODlhQAAMAIABAP///////yH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NTc3MiwgMjAxNC8wMS8xMy0xOTo0NDowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDphODFiMWQ5My0wMDIwLTRiYmItYjVlMS04YjI4NTFkMzMzMjIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6M0Q5MjI2RkE4NkU1MTFFNkFDRDc5Mjc3OTE2NjVFRTMiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6M0Q5MjI2Rjk4NkU1MTFFNkFDRDc5Mjc3OTE2NjVFRTMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDphODFiMWQ5My0wMDIwLTRiYmItYjVlMS04YjI4NTFkMzMzMjIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6YTgxYjFkOTMtMDAyMC00YmJiLWI1ZTEtOGIyODUxZDMzMzIyIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkECRQAAQAsAAAAAEAADAAAAkVMgInG7a7Wmy+CZhWlOe3ZLaH3YWEJnaOErhd6uCscj7Q8w+6Nn3re6nV4tp/QQvQFjxFaLeN8IqVNZzE5pbKi2SiVUQAAIfkECRQAAQAsAAAAAEAADAAAAkWMgWnL3QmBmy7KZSGlWe3aXeH1YSNZBqN6pkfrnjL6yS47h7cd53q/AvosO1hq2CkGj60l01kKQqM/ZYZBvGGvWpPGUAAAIfkEBRQAAQAsAAAAAEAADAAAAkWMgWnL7amcbBCuWufEVj+OHCDgfWDJjGqGBivZvm/rrrRsxzmKq/de6o1+Pp0QQxwah8Uk0smpnWjSKLVZDVFTrG02UgAAOw=="},242:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={reportKeyValue:(e,t,n)=>{n({errMsg:e+":ok"})},reportIDKey:(e,t,n)=>{n({errMsg:e+":ok"})},traceEvent:(e,t,n)=>{n({errMsg:e+":ok"})}}},243:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=n(19);t.default=function(e){return function(t,n){s.default.send({command:"WEBVIEW_PUBLISH",data:{eventName:t,data:n},common:e})}}},244:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=n(19),o=n(39);t.default=()=>{let e={},t=!1,n=!1;const i=t=>{const{command:n,data:s,webviewID:o}=t;"APPSERVICE_PUBLISH"===n&&function(t,n,s){const o=e[t];o.length>10&&console.warn(`The event subscribed on '${t}' is over 10`);for(const e of o)"function"==typeof e&&e(n,s)}(s.eventName,s.data,o)};return o.default.once("RESET_INSTANCE",()=>{n=!0,e={},s.default.removeCallback(i)}),t||(t=!0,s.default.registerCallback(i)),function(t,s){n||(e[t]||(e[t]=[]),e[t].push(s))}}},245:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=n(19),o=n(39);t.default=()=>{let e={},t=!1,n=!1;const i=e=>{const{command:t,data:n}=e;"APPSERVICE_PUBLISH_SYNC"===t&&a(n.eventName,n.data,n.callbackID)};function a(t,s,o){if(n)return;const i=e[t];"function"==typeof i&&i(s,(function(e,t){r(o,JSON.stringify([e&&e.toString(),t]))}))}function r(e,t){n||s.default.send({command:"SUBSCRIBE_SYNC_CALLBACK",data:{callbackID:e,res:t}})}return o.default.once("RESET_INSTANCE",()=>{n=!0,e={},s.default.removeCallback(i)}),t||(t=!0,s.default.registerCallback(i)),{subscribeSync:function(t,s){n||(e[t]=s)},returnSync:r,subscribeSyncHandler:a}}},246:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=n(22),o=n(19),i=n(39),a=n(66),r=n(247),c=n(248),l=location.pathname.endsWith("mainframe.html");class d{constructor(){this.globalSessionId=Date.now(),this.idCounter=1,this.frames=new Map,this.currentFrameId=0,this.zindexCounter=1,this.frameAnimations=new Map,this.runtimeInstanceInfo={},this.verbose=!1,this.messagerCallback=e=>{var t;const{command:n,data:s,webviewID:r}=e;if(r===a.default.webviewID)if("LOAD_PAGEFRAME"===n)if(o.setPageframeReady(!1),i.default.emit("RESET_INSTANCE"),s.error){const e=this.frames.get(this.currentFrameId);e&&((null===(t=e.iframe)||void 0===t?void 0:t.contentDocument)?e.iframe.contentDocument.body.innerHTML=s.error:(e.iframe.src="about:blank",e.iframe.onload=()=>{e.iframe.contentDocument.body.innerHTML=s.error}))}else this.runtimeInstanceInfo.compileTs=s.compileTs,this.loadPageframe(s.scripts,s.hardReload);else if("RESET_PAGEFRAME"===n)this.webviewStatus="standby",o.setPageframeReady(!1),this.resetPageframe(),i.default.emit("RESET_INSTANCE"),this.runtimeInstanceInfo.compileTs=s.compileTs;else if("UPDATE_RUNTIME_INFO"===n){if(this.runtimeInstanceInfo.compileTs=s.compileTs,!this.isRootWebview){const e=this.frames.get(this.currentFrameId);e&&(e.instanceInfo=Object.assign({},this.runtimeInstanceInfo))}}else"ANIMATE_TRANSITION"===n&&this.animationTransition(this.currentFrameId,s.type)},this.animationTransition=async(e,t)=>{const n=this.frameAnimations.get(e);if(!n)return new Promise(async(n,s)=>{try{const s=this.frames.get(e);if(!s)return;const o=s.iframe.contentWindow.document.body;if(o.style.transition,o.style.transform,"enter"===t){const e=o.animate([{transform:"translateX(100%)"},{transform:"translateX(0)"}],{duration:100,iterations:1});await e.finished,window.__global.alert("ANIMATE_ENTER_DONE"),n()}else if("exit"===t){const e=o.animate([{transform:"translateX(0)"},{transform:"translateX(100%)"}],{duration:100,iterations:1});await e.finished,window.__global.alert("ANIMATE_EXIT_DONE"),n()}}catch(e){s(e)}});{const s=n.then(this.animationTransition.bind(this,e,t)).catch(this.animationTransition.bind(this,e,t));this.frameAnimations.set(e,s)}},this.onIFrameLoad=async e=>{},o.registerCallback(this.messagerCallback);const e=prompt("GET_RUNTIME_INSTANCE_INFO")||"";this.runtimeInstanceInfo=JSON.parse(e),location.search.includes("autoload")?(this.isRootWebview=!0,this.webviewStatus="active",this.loadPageframe()):(this.isRootWebview=!1,this.webviewStatus="standby",this.preload()),r.proxyGlobalVarToInstanceFrame(this)}isLoadSuccess(e){const t=e.iframe;let n=!0;try{t.contentWindow.location&&(n=!0)}catch(e){n=!1}return n}isValidFrame(e){return this.frames.has(e)}isValidCurrentFrame(e){return this.frames.has(e)&&this.currentFrameId===e}proxyAlert(e,t){if(!this.isValidCurrentFrame(e))return void console.warn(`[--loader--] reject non-current frame (id ${e}) alert req with msg: ${t}`);const n=this.frames.get(e);return alert("$$"+JSON.stringify({msg:t,common:n.instanceInfo}))}proxyPrompt(e,t){if(!this.isValidCurrentFrame(e))return void(this.verbose&&console.warn(`[--loader--] reject non-current frame (id ${e}) prompt req with msg: ${t}`));const n=this.frames.get(e);return prompt("$$"+JSON.stringify({msg:t,common:n.instanceInfo}))}async loadPageframe(e,t){if(this.frames.size<=1||t){if(1===this.frames.size||t)for(const[e,t]of this.frames)this.disposeFrame(t);const e=this.idCounter++;this.currentFrameId=e;const n=this.initPageframeInfo({id:e,iframe:void 0,status:"void",statusChangeEE:new s.EventEmitter,statusUpdateTs:Date.now(),statusChangeListeners:{},instanceInfo:Object.assign({},this.runtimeInstanceInfo)});this.frames.set(e,n),c.createIframeElement(this.generateInstanceFrameSrc(e)).then(e=>{n.iframe=e,n.status="loading",e.style.zIndex=this.zindexCounter+++""}),1===this.frames.size&&this.preload()}else{let t=!1;const n=new Set,s=[...this.frames.values()];for(const o of s)if(t)n.add(o);else switch(o.status){case"void":t=!0,this.currentFrameId=o.id,o.iframe.style.zIndex=this.zindexCounter+++"";break;case"preloading":{t=!0,this.currentFrameId=o.id,o.instanceInfo=Object.assign({},this.runtimeInstanceInfo),o.iframe.style.zIndex=this.zindexCounter+++"",o.statusChangeListeners.waitPreloading&&(clearTimeout(o.statusChangeListeners.waitPreloading.timeoutId),o.statusChangeEE.off("change",o.statusChangeListeners.waitPreloading.listener),console.warn("[--loader--] clear previous wait before trying to load preloading frame "+o.id));const n=setTimeout(()=>{console.warn("[--loader--] preloading -> timedout"),o.status="timedout",delete o.statusChangeListeners.waitPreloading},5e3);console.warn("[--loader--] try to load preloading frame "+o.id);const s=async()=>{"preloaded"===o.status&&(delete o.statusChangeListeners.waitPreloading,clearTimeout(n),o.statusChangeEE.off("change",s),o.status="loading",await c.loadScripts(o.iframe.contentDocument,e),this.onWinLoad(o.iframe.contentWindow).then(()=>{this.handleLoadDone(o.iframe.contentWindow,o.id)}))};o.statusChangeEE.on("change",s),o.statusChangeListeners.waitPreloading={timeoutId:n,listener:s};break}case"preloaded":t=!0,this.currentFrameId=o.id,o.instanceInfo=Object.assign({},this.runtimeInstanceInfo),o.status="loading",await c.loadScripts(o.iframe.contentDocument,e),this.onWinLoad(o.iframe.contentWindow).then(()=>{this.handleLoadDone(o.iframe.contentWindow,o.id)}),o.iframe.style.zIndex=this.zindexCounter+++"";break;case"loading":case"loaded":case"errored":case"timedout":this.preload(o);break;default:console.warn(`[loader] unknown status ${o.status}. (getFirstAvailableFrame)`)}if(n.size>0){let e=this.frames.size<=2;n.forEach(t=>{e?(e=!1,this.preload(t)):this.disposeFrame(t)})}}}preload(e){const t=null==e?void 0:e.iframe;e&&this.disposeFrame(e,!0);const n=this.idCounter++,o=this.initPageframeInfo({id:n,iframe:t||void 0,status:"void",statusChangeEE:new s.EventEmitter,statusUpdateTs:Date.now(),statusChangeListeners:{}});if(this.frames.set(n,o),this.isRootWebview||(this.currentFrameId=n),t){const e=this.generateInstanceFrameSrc(n,!0);this.loadSrc(o,e),o.status="preloading"}else c.createIframeElement(this.generateInstanceFrameSrc(n,!0)).then(e=>{o.iframe=e,o.status="preloading"})}loadSrc(e,t){try{const n=e.iframe.contentWindow;n.__global.history.pushState("","",t),n.location.reload()}catch(t){this.verbose&&console.warn("[--loader--]","loadSrc catch error",t),e.status="errored",this.disposeFrame(e),1===this.frames.size&&this.preload()}}async getCurrentInstanceFrame(){const e=this.frames.get(this.currentFrameId);if(e)switch(e.status){case"preloaded":case"loaded":return e.iframe;case"void":case"loading":case"preloading":return new Promise((t,n)=>{const s=setTimeout(()=>{console.warn("[--loader--] getCurrentInstanceFrame timedout"),e.status="timedout"},5e3),o=()=>{"preloaded"===e.status||"loaded"===e.status?(clearTimeout(s),e.statusChangeEE.off("change",o),t(e.iframe)):"errored"===e.status&&(clearTimeout(s),n("[loader] frame load errored"))};e.statusChangeEE.on("change",o),e.statusChangeListeners.waitGetFrame={timeoutId:s,listener:o}});case"blank":case"errored":default:throw new Error("[loader] unexpected current frame status "+e.status)}throw new Error("[loader] no current frame available")}handleLoadStart(e){const t=e.location.search.includes("preload"),n=Number(e.location.hash.match(/#id_(\d+)/)[1]),s=this.frames.get(n);s&&(r.createInstanceFrameInitialGlobal({id:n,win:e,isPreload:t,loader:this}),e.addEventListener("load",()=>{this.isValidFrame(n)&&(t?this.isLoadSuccess(s)?(s.status="preloaded",!e.location.search.includes("root")&&(s.instanceInfo=Object.assign({},this.runtimeInstanceInfo),this.handleLoadDone(e,n))):s.status="errored":this.handleLoadDone(e,n))}))}handleLoadDone(e,t){if(!this.isValidFrame(t))return;const n=this.frames.get(t);if(!this.isLoadSuccess(n))return void(n.status="errored");console.warn("loader load done",n),o.setPageframeReady(!0,e.JSON.parse.bind(e.JSON)),e.__global.timing.setCommonMessage(n.instanceInfo),e.__global.timing.setBlocked(!1),e.WeixinJSBridge=e.__global.WeixinJSBridge=window.getNewWeixinJSBridge(),e.__global.WeixinJSBridge.__setCommonPayload("compileTs",n.instanceInfo.compileTs);const s=e.document.createEvent("UIEvent");s.initEvent("WeixinJSBridgeReady",!1,!1),e.document.dispatchEvent(s),e.performance.mark("documentReadyAlertStart"),e.__global.alert("DOCUMENT_READY"),e.performance.mark("documentReadyAlertEnd");const i=new e.CustomEvent("LOADER_LOAD_DONE");e.dispatchEvent(i),n.status="loaded",e.__global.requestIdleCallback(()=>{e.__global.timing.report()})}onWinLoad(e){return new Promise(t=>{"complete"===e.document.readyState&&t(),e.addEventListener("load",()=>{t()})})}disposeFrame(e,t){if(e=e||this.frames.get(this.currentFrameId)){if(this.frames.delete(e.id),this.currentFrameId===e.id)if(this.frames.size>0)for(const[e,t]of this.frames){this.currentFrameId=t.id;break}else this.currentFrameId=-1;t||e.iframe.parentElement.removeChild(e.iframe)}}resetPageframe(){const e=[];let t;for(const[n,s]of this.frames)t?e.push(s):t=s;for(const t of e)this.disposeFrame(t);t&&this.preload(t),0===this.frames.size&&this.preload()}notifyNativeLoadPageState(e){const t=this.frames.get(this.currentFrameId);t&&(t.status="end"===e?"loaded":"loading")}generateInstanceFrameSrc(e,t=!1){let n=`http://${location.host}/__pageframe__/instanceframe.html?s=${this.globalSessionId}`;return t&&(n+="&preload"),this.isRootWebview&&(n+="&root"),n+="#id_"+e,n}initPageframeInfo(e){const t=this;let n=e.status;return Object.defineProperty(e,"status",{get:()=>n,set(s){n!==s&&(t.verbose&&console.warn(`[--loader--] id ${e.id} change status from ${n} to ${s}`,(new Error).stack),n=s,e.statusUpdateTs=Date.now(),e.statusChangeEE.emit("change",e))}}),e}}if(t.PageframeLoader=d,l){const e=new d;window.isMultiFrameArch=!0,window.pageframeLoader=e,window.getInstanceWindow=async()=>{let t;try{t=await e.getCurrentInstanceFrame()}catch(e){const t=document.createElement("p");throw t.textContent=e+"",document.body.insertBefore(t,document.body.firstChild),e}return t.contentWindow}}else o.setPageframeReady(!0),window.getInstanceWindow=async()=>window},247:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=n(49);t.createInstanceFrameInitialGlobal=function(e){const{id:t,win:n,isPreload:o,loader:i}=e;n.__webviewId__=void 0,n.__wxAppCode__={},n.__vd_version_info__={},n.__WXML_GLOBAL__={entrys:{},defines:{},modules:{},ops:[],wxs_nf_init:void 0,total_ops:0},n.__global.id=Number(n.location.hash.match(/#id_(\d+)/)[1]),n.__global.timing=new __global.Timing({document:n.document,MutationObserver:n.MutationObserver,blocked:!0}),s.default.init(n),n.alert=n.__global.alert=i.proxyAlert.bind(i,t),n.prompt=n.__global.prompt=i.proxyPrompt.bind(i,t)},t.proxyGlobalVarToInstanceFrame=function(e){[{name:"__wxAppCode__",defaultValue:{}},{name:"__vd_version_info__",defaultValue:{}},{name:"__virtualDOM__",defaultValue:{}},{name:"__WXML_GLOBAL__",defaultValue:{entrys:{},defines:{},modules:{},ops:[],wxs_nf_init:void 0,total_ops:0}},{name:"__wxConfig",defaultValue:{}},{name:"__devtoolsConfig",defaultValue:{}},{name:"WeixinJSBridge",defaultValue:void 0}].forEach(t=>{Object.defineProperty(window,t.name,{get:()=>((t,n)=>{var s;try{const o=e.frames.get(e.currentFrameId);return o&&null!==(s=o.iframe.contentWindow[t])&&void 0!==s?s:n}catch(e){return n}})(t.name,t.defaultValue),set:e=>!0,enumerable:!0})})}},248:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createIframeElement=async function(e="about:blank"){const t=document.createElement("iframe");return t.style.borderWidth="0px",t.style.width="100%",t.style.height="100%",t.src=e,document.body?(document.body.appendChild(t),t):new Promise(e=>{document.addEventListener("DOMContentLoaded",()=>{document.body.appendChild(t),e(t)})})},t.loadScripts=async function(e,t){if(t)for(const n of t){const t=e.createElement("script");let s=!1;for(const e in n)"sync"===e?s=n[e]:t[e]=n[e];s?await new Promise(n=>{t.addEventListener("load",n),t.addEventListener("error",n),e.head.appendChild(t)}):e.head.appendChild(t)}}},249:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=n(50),o=n(41),i=n(42),{webview:a}=i;class r extends s.default{constructor(){super(...arguments),this.LAST_X=0,this.LAST_Y=0,this.tapElement=(e,t)=>{const n=this.ACTIVE_ELEMENT=this.nodeManager.getDOM(e);if(!n)return{status:o.default.NoSuchElement,value:{message:"no such element"}};const s=n.getBoundingClientRect(),i=s.left+s.width/2,a=s.top+s.height/2,r=new Touch({identifier:1,target:n,clientX:i,clientY:a,pageX:i,pageY:a}),c=new TouchEvent("touchstart",{bubbles:!0,touches:[r],targetTouches:[r],changedTouches:[r]}),l=new TouchEvent("touchend",{bubbles:!0,changedTouches:[r]});return n.dispatchEvent(c),t?setTimeout(()=>n.dispatchEvent(l),500):n.dispatchEvent(l),{status:o.default.Success}},this.touchDown=(e,t)=>{const n=this.ACTIVE_ELEMENT=document.elementFromPoint(e,t);this.LAST_X=e,this.LAST_Y=t;const s=new Touch({identifier:1,target:n,clientX:e,clientY:t,pageX:e,pageY:t}),i=new TouchEvent("touchstart",{bubbles:!0,touches:[s],targetTouches:[s],changedTouches:[s]});return n.dispatchEvent(i),{status:o.default.Success}},this.touchUp=(e,t)=>{const n=this.ACTIVE_ELEMENT||document.elementFromPoint(e,t),s=new Touch({identifier:1,target:n,clientX:e,clientY:t,pageX:e,pageY:t});this.ACTIVE_ELEMENT=null,this.LAST_X=0,this.LAST_Y=0;const i=new TouchEvent("touchend",{bubbles:!0,changedTouches:[s]});return n.dispatchEvent(i),{status:o.default.Success}},this.touchMove=(e,t)=>{const n=this.ACTIVE_ELEMENT||document.elementFromPoint(e,t),s=new Touch({identifier:1,target:n,clientX:e,clientY:t,pageX:e,pageY:t}),i=new TouchEvent("touchmove",{bubbles:!0,touches:[s],targetTouches:[s],changedTouches:[s]});return!n.dispatchEvent(i)||(document.documentElement.scrollLeft+=this.LAST_X-e,document.documentElement.scrollTop+=this.LAST_Y-t),this.LAST_X=e,this.LAST_Y=t,{status:o.default.Success}},this.actionElementFromPoint=(e,t)=>{const n=document.elementFromPoint(e,t);if(!n)return{status:o.default.NoSuchElement,value:{message:"no such element"}};let s=n;for(;!s.getAttribute("t_action");)if(s=s.parentElement,!s||s===document.body){s=n;break}return{status:o.default.Success,value:{WEBVIEW_ELEMENT:this.nodeManager.getElementId(s)}}}}init(){super.init({[a.tapElement]:({ELEMENT:e})=>this.tapElement(e),[a.longtapElement]:({ELEMENT:e})=>this.tapElement(e,!0),[a.touchDown]:({x:e,y:t})=>this.touchDown(e,t),[a.touchUp]:({x:e,y:t})=>this.touchUp(e,t),[a.touchMove]:({x:e,y:t})=>this.touchMove(e,t),[a.actionElementFromPoint]:({x:e,y:t})=>this.actionElementFromPoint(e,t)})}}t.default=r},250:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=n(19),o=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;t.default=class{constructor(){this.scopedata=[],this.oldScopeData="",this.showScopeData=()=>{const e=this;window.__virtualDOM__&&window.__DOMTree__?window.__virtualDOM__.spreadScopeDataToDOMNode():setTimeout(()=>{e.showScopeData()},200)},this.mapNodes=e=>{const t=this,n=e.childNodes;n&&n.forEach(e=>{const n=t.getAttributes(e);n.attributes&&n.attributes.length>0&&t.scopedata.indexOf(n.attributes[1])<0&&t.scopedata.push(n.attributes[1]),e.hasChildNodes&&t.mapNodes(e)})},this.getAttributes=e=>{const t=[];if(e&&e.attributes)for(let n=0,s=e.attributes.length;n<s;n++){const s=e.attributes[n];"wx:scope-data"===s.name&&(t.push(s.name),t.push(s.value))}return{attributes:t}},this.pageStart=()=>{this.mapNodes(document.body),this.oldScopeData=this.scopedata.toString(),s.default.send({command:"SCOPEDATA",data:this.scopedata})},this.addObserver=e=>{const t=this,n=new o(e=>{this.scopedata=[],n.disconnect(),this.showScopeData(),this.mapNodes(document.body),t.addObserver(document.body),this.oldScopeData!==this.scopedata.toString()&&(this.oldScopeData=this.scopedata.toString(),s.default.send({command:"SCOPEDATA",data:this.scopedata}))});n.observe(e,{attributes:!0,characterData:!0,subtree:!0})},this.compare=e=>{if("APPSERVICE_PUBLISH"===e.command&&"vdSyncBatch"===e.data.eventName){if(this.scopedata=[],this.showScopeData(),this.mapNodes(document.body),this.oldScopeData===this.scopedata.toString())return;this.oldScopeData=this.scopedata.toString(),s.default.send({command:"SCOPEDATA",data:this.scopedata})}},setTimeout(()=>{window.__devtoolsConfig&&window.__devtoolsConfig.scopeDataCheck&&(this.showScopeData(),this.addObserver(document.body),this.pageStart(),s.default.registerCallback(e=>{this.compare(e)}))},1e3)}}},251:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=n(19);t.default={init:function(){s.default.registerCallback(e=>{const{command:t,scriptFile:n,skeletonConfig:o}=e;"GEN_SKELETON"===t&&window.getInstanceWindow().then(e=>{const t=e.document.createElement("script");t.textContent=n,e.document.body.appendChild(t);const i=e.Skeleton&&e.Skeleton.genSkeleton(o);s.default.send(Object.assign({cmd:"GEN_SKELETON_FINISHED"},i))})})}}},38:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=navigator.userAgent,o=s.indexOf(" devtoolsedit")>0,i=s.indexOf(" appservicedevtools")>0;if(t.webviewID="",o)t.webviewID="devtoolsedit";else if(i)t.webviewID="appservicedevtools";else{const e=s.match(/webview\/(\d*)/);if(e){const n=parseInt(e[1],10);isNaN(n)||(t.webviewID=n)}}},39:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=n(22);class o extends s.EventEmitter{constructor(){super(),this.instanceScopeListeners=new Set,this.instanceScope=()=>({on:(e,t)=>(this.on(e,t),this.instanceScopeListeners.add({event:e,fn:t}),this),once:(e,t)=>(this.once(e,t),this.instanceScopeListeners.add({event:e,fn:t}),this),off:this.off.bind(this)}),this.initAutoClean()}initAutoClean(){this.on("RESET_INSTANCE",()=>{for(const{event:e,fn:t}of this.instanceScopeListeners)this.off(e,t);this.instanceScopeListeners.clear()})}}t.appEventEmitter=new o,t.default=t.appEventEmitter},41:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={Success:0,NoSuchElement:7}},42:function(e,t,n){"use strict";e.exports={webview:{scroll:"Driver.scroll",getTagName:"Driver.getTagName",getAttribute:"Driver.getAttribute",getLocation:"Driver.getLocation",getSize:"Driver.getSize",getRect:"Driver.getRect",getCssValue:"Driver.getCssValue",getProperty:"Driver.getProperty",elementFromPoint:"Driver.elementFromPoint",getContentSize:"Driver.getContentSize",findElement:"Driver.findElement",findElements:"Driver.findElements",sendKeys:"Driver.sendKeys",focus:"Driver.focus",scrollIntoView:"Driver.scrollIntoView",actionElementFromPoint:"Driver.actionElementFromPoint",tapElement:"Driver.tapElement",longtapElement:"Driver.longtapElement",touchDown:"Driver.touchDown",touchUp:"Driver.touchUp",touchMove:"Driver.touchMove",findShadowRoot:"Driver.findShadowRoot",findElementInWebviewShadowRoot:"Driver.findElementInWebviewShadowRoot",clickContextMenu:"Driver.clickContextMenu"}}},48:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=new Set(["USERCODE_REQUIRED","PAGEFRAME_GENERATE_FUNC_READY"]),o=[];let i;class a{constructor(e){this.records=[],this.countdownRecords=new Set,this._commonRecordReported=!1,this._pendingReport=[],this.onMutation=e=>{if(this.countdownRecords.size>0)for(const t of e)if(t.addedNodes)for(const e of t.addedNodes)if(e instanceof HTMLScriptElement&&e.hasAttribute("countdownid")){const t=e.getAttribute("countdownid");let n;for(const e of this.countdownRecords)if(e.countdownid===t&&(e.received++,e.received>=e.expect)){this.addPoint(e.name,Date.now()),n=e;break}n&&this.countdownRecords.delete(n)}},this.report=()=>{clearTimeout(this._reportTimer),this._blocked?this._reportTimer=setTimeout(this.report,5e3):this._pendingReport.length&&(this._commonRecordReported||(this._pendingReport.unshift(...o),this._commonRecordReported=!0),i.send({command:"TIMING_REPORT",data:this._pendingReport,common:this._commonMsg}),this._pendingReport=[],this._reportTimer=setTimeout(this.report,5e3))},this.observer=new e.MutationObserver(this.onMutation),this.observer.observe(e.document.head,{childList:!0}),this._blocked=e.blocked,this.init()}static setMessager(e){i=e}init(){setTimeout(this.report,5e3)}setBlocked(e){this._blocked=e,e||this.report()}addCost(e,t,n,s){const o={type:"cost",name:e,start:t,end:n,cost:n-t,opt:s};this.records.push(o),this._pendingReport.push(o)}addPoint(e,t=Date.now()){const n={type:"point",name:e,value:t};this.records.push(n),this._pendingReport.push(n),s.has(e)&&this.report()}static addCommonPoint(e,t=Date.now()){o.push({type:"point",name:e,value:t})}prepareScriptCountdownReport(e,t,n){this.countdownRecords.add({name:e,countdownid:t,expect:n,received:0})}setCommonMessage(e){this._commonMsg=e}}t.Timing=a,window.__global.Timing=a},49:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=n(240),o=n(241),i=n(19);let a,r,c;t.default={init:function(e){const t=e.document;a=e,r=w,c=function(e){g=e};let n,l,d=!1,u=0,h=0,m=null,f=null,g=!1,p=!1;function E(){m||(m=t.createElement("div"),f=t.createElement("i"),n||(n=e.__wxConfig.window.backgroundTextStyle),l||(l=e.__wxConfig.window.backgroundColorTop||e.__wxConfig.window.backgroundColor||"#ffffff"),f.style.backgroundImage="light"!==n?`url(${s.default})`:`url(${o.default})`,f.style.width="32px",f.style.position="absolute",f.style.height="6px",f.style.left="50%",f.style.bottom="20px",f.style.backgroundRepeat="no-repeat",f.style.marginLeft="-16px",f.style.backgroundSize="cover",m.appendChild(f),m.style.height="0px",m.style.width="100%",m.style.position="fixed",m.style.top="0px",m.style.backgroundColor=l),"1"!==t.body.getAttribute("data-insertloading")&&(t.body.setAttribute("data-insertloading","1"),t.body.insertBefore(m,t.body.firstChild))}function w(){e.document.body.style.transition="all linear 0.3s",e.document.body.style.marginTop="0px",m&&(m.style.transition="all linear 0.3s",e.document.body.style.marginTop="0px",m.style.height="0px")}function v(){i.default.send({command:"PULLDOWN_REFRESH"})}i.default.registerCallback(t=>{const{command:i,data:a}=t;if("STOP_PULLDOWN_REFRESH"===i&&w(),"START_PULLDOWN_REFRESH"===i){if(!e.__wxConfig.window.enablePullDownRefresh||g)return;E(),m.style.height="50px",e.document.body.style.transition="all linear 0",e.document.body.style.marginTop="50px",v()}"SET_BACKGROUND_COLOR"===i&&(l=a.backgroundColorTop||a.backgroundColor,E(),m.style.backgroundColor=l),"SET_BACKGROUND_TEXT_STYLE"===i&&(n=a.textStyle||"dark",E(),f.style.backgroundImage="light"!==n?`url(${s.default})`:`url(${o.default})`)}),e.enablePullDownRefresh=function(){p||(e.addEventListener("touchstart",(function(t){0===e.scrollY&&(E(),d=!0,u=t.touches[0].pageY,e.document.body.style.transition="all linear 0",m.style.transition="all linear 0")}),!0),e.addEventListener("touchmove",(function(t){d&&e.__wxConfig.window.enablePullDownRefresh&&!g&&(h=t.touches[0].pageY-u,h=Math.max(0,h),h=Math.min(100,h),e.document.body.style.marginTop=h+"px",m.style.height=h+"px")})),e.addEventListener("touchend",(function(t){d=!1,h>50?(v(),h=50,e.document.body.style.marginTop=h+"px",m.style.height=h+"px",setTimeout(w,3e3)):w()})),p=!0)}},reset:()=>r(),togglePullDownRefresh:e=>c(e)}},50:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=n(19),o=n(38),i=n(41),a=n(42),{webview:r}=a,c=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;class l{constructor(){this.ELEMENTS_INFO={},this.ELEMENTS_WEAK_MAP=new WeakMap,this.getElementId=e=>{let t=this.ELEMENTS_WEAK_MAP.get(e);return t||(t=`${o.webviewID}_${Math.random()}${Date.now()}`,this.ELEMENTS_INFO[t]=e,this.ELEMENTS_WEAK_MAP.set(e,t)),t},this.getDOM=e=>this.ELEMENTS_INFO[e],this.removeDOM=e=>{const t=this.ELEMENTS_WEAK_MAP.get(e);return t&&(delete this.ELEMENTS_INFO[t],this.ELEMENTS_WEAK_MAP.delete(e)),t},new c(e=>{e.forEach(e=>{e.removedNodes.length>0&&e.removedNodes.forEach(e=>{e&&this.removeDOM(e)})})}).observe(document,{childList:!0})}}t.default=class{constructor(){this.nodeManager=new l,this.findElement=(e,t)=>{if("css selector"===e){const e=document.querySelector(t);if(e)return{status:i.default.Success,value:{WEBVIEW_ELEMENT:this.nodeManager.getElementId(e)}}}return{status:i.default.NoSuchElement,value:{message:"no such element"}}},this.findElements=(e,t)=>{if("css selector"===e){const e=document.querySelectorAll(t),n=[];return e.forEach(e=>{n.push(this.nodeManager.getElementId(e))}),{status:i.default.Success,value:n}}return{status:i.default.NoSuchElement,value:{message:"no such element"}}},this.scroll=(e,t)=>(document.documentElement&&(document.documentElement.scrollLeft+=e,document.documentElement.scrollTop+=t),document.body.scrollLeft+=e,document.body.scrollTop+=t,{status:i.default.Success}),this.getTagName=e=>{const t=this.nodeManager.getDOM(e);return t?{status:i.default.Success,value:t.tagName.toLowerCase()}:{status:i.default.NoSuchElement,value:{message:"no such element"}}},this.getCssValue=(e,t)=>{const n=this.nodeManager.getDOM(e);if(!n)return{status:i.default.NoSuchElement,value:{message:"no such element"}};const s=window.getComputedStyle(n);return{status:i.default.Success,value:s[t]}},this.getProperty=(e,t)=>{const n=this.nodeManager.getDOM(e);return n?{status:i.default.Success,value:n[t]}:{status:i.default.NoSuchElement,value:{message:"no such element"}}},this.getLocation=e=>{const t=this.nodeManager.getDOM(e);if(!t)return{status:i.default.NoSuchElement,value:{message:"no such element"}};const n=t.getBoundingClientRect();return{status:i.default.Success,value:{x:n.left,y:n.top}}},this.getSize=e=>{const t=this.nodeManager.getDOM(e);if(!t)return{status:i.default.NoSuchElement,value:{message:"no such element"}};const n=t.getBoundingClientRect();return{status:i.default.Success,value:{width:n.width,height:n.height}}},this.getRect=e=>{const t=this.nodeManager.getDOM(e);if(!t)return{status:i.default.NoSuchElement,value:{message:"no such element"}};const n=t.getBoundingClientRect();let s=t;return"wx-scroll-view"===t.localName&&(s=t.querySelector("div div")||t),{status:i.default.Success,value:{x:n.left,y:n.top,width:n.width,height:n.height,scrollTop:s.scrollTop,scrollLeft:s.scrollLeft,scrollHeight:s.scrollHeight,scrollWidth:s.scrollWidth}}},this.getAttribute=(e,t)=>{const n=this.nodeManager.getDOM(e);return n?{status:i.default.Success,value:n.getAttribute(t)}:{status:i.default.NoSuchElement,value:{message:"no such element"}}},this.elementFromPoint=(e,t)=>{const n=document.elementFromPoint(e,t);return n?{status:i.default.Success,value:{WEBVIEW_ELEMENT:this.nodeManager.getElementId(n)}}:{status:i.default.NoSuchElement,value:{message:"no such element"}}},this.focus=e=>{const t=this.nodeManager.getDOM(e);return t||t?(t.focus(),{status:i.default.Success}):{status:i.default.NoSuchElement,value:{message:"no such element"}}},this.getContentSize=()=>({status:i.default.Success,value:{windowHeight:window.innerHeight,windowWidth:window.innerWidth,scrollTop:document.body.scrollTop||document.documentElement.scrollTop,scrollLeft:document.body.scrollLeft||document.documentElement.scrollLeft,scrollHeight:document.body.scrollHeight||document.documentElement.scrollHeight,scrollWidth:document.body.scrollWidth||document.documentElement.scrollWidth}}),this.findShadowRoot=e=>{const t=document.querySelector(e);if(!t||!t.shadowRoot)return{status:i.default.NoSuchElement,value:{message:"no such element"}};const n=t.shadowRoot;return{status:i.default.Success,value:{WEBVIEW_SHADOW_ROOT:this.nodeManager.getElementId(n)}}},this.findElementInWebviewShadowRoot=(e,t)=>{const n=this.nodeManager.getDOM(t);if(!n)return{status:i.default.NoSuchElement,value:{message:"shadow root not found"}};const s=n.querySelector(e);return s?{status:i.default.Success,value:{WEBVIEW_ELEMENT:this.nodeManager.getElementId(s)}}:{status:i.default.NoSuchElement,value:{message:"no such element"}}},this.clickContextMenu=e=>($contextMenuClicked(e),{status:i.default.Success}),this.scrollIntoView=e=>{const t=this.nodeManager.getDOM(e);return t?(t.scrollIntoView(),{status:i.default.Success}):{status:i.default.NoSuchElement,value:{message:"no such element"}}}}init(e={}){const t={[r.findElement]:({using:e,value:t})=>this.findElement(e,t),[r.findElements]:({using:e,value:t})=>this.findElements(e,t),[r.scroll]:({xoffset:e,yoffset:t})=>this.scroll(e,t),[r.getTagName]:({ELEMENT:e})=>this.getTagName(e),[r.getAttribute]:({ELEMENT:e,name:t})=>this.getAttribute(e,t),[r.getCssValue]:({ELEMENT:e,propertyName:t})=>this.getCssValue(e,t),[r.getProperty]:({ELEMENT:e,propertyName:t})=>this.getProperty(e,t),[r.getSize]:({ELEMENT:e})=>this.getSize(e),[r.getRect]:({ELEMENT:e})=>this.getRect(e),[r.getLocation]:({ELEMENT:e})=>this.getLocation(e),[r.elementFromPoint]:({x:e,y:t})=>this.elementFromPoint(e,t),[r.getContentSize]:this.getContentSize,[r.focus]:({ELEMENT:e})=>this.focus(e),[r.scrollIntoView]:({ELEMENT:e})=>this.scrollIntoView(e),[r.findShadowRoot]:({selector:e})=>this.findShadowRoot(e),[r.findElementInWebviewShadowRoot]:({selector:e,shadowRootHostId:t})=>this.findElementInWebviewShadowRoot(e,t),[r.clickContextMenu]:({id:e})=>this.clickContextMenu(e)};s.default.registerCallback(({command:n,data:o})=>{const i=e[n]||t[n];if(i){const e=i(o);s.default.send({command:n+".callback",data:{callbackID:o.callbackID,res:e}})}})}}},66:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=navigator.userAgent,o=-1!==s.indexOf("Android"),i=-1!==s.indexOf("iPhone"),a=-1!==s.indexOf("weapp"),r=s.match(/webview\/(\d*)/),c=r?parseInt(r[1],10):0;t.default={isAndroid:o,isiPhone:i,webviewID:c,isWeapp:a}}});