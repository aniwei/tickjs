(() => {
  const defineProperty = Object.defineProperty;
  const getMiniProgramContext = () => {
    const xhr = new XMLHttpRequest();
    let result;

    xhr.open('GET', '/config', false);  
    xhr.setRequestHeader('content-type', 'application/json');
    xhr.onreadystatechange = function() {
      if (xhr.readyState === 4 && xhr.status === 200){
        debugger;
      }
    }

    xhr.send();
  }

  defineProperty(window, '__wxConfig', {
    get (name) {
      return getMiniProgramContext()
    }
  })
})();


{{{javascript}}}