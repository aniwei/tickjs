$gwx_XC_96=function(_,_v,_n,_p,_s,_wp,_wl,$gwn,$gwl,$gwh,wh,$gstack,$gwrt,gra,grb,TestTest,wfor,_ca,_da,_r,_rz,_o,_oz,_1,_1z,_2,_2z,_m,_mz,nv_getDate,nv_getRegExp,nv_console,nv_parseInt,nv_parseFloat,nv_isNaN,nv_isFinite,nv_decodeURI,nv_decodeURIComponent,nv_encodeURI,nv_encodeURIComponent,$gdc,nv_JSON,_af,_gv,_ai,_grp,_gd,_gapi,$ixc,_ic,_w,_ev,_tsd){return function(path,global){
if(typeof global==='undefined'){if (typeof __GWX_GLOBAL__==='undefined')global={};else global=__GWX_GLOBAL__;}if(typeof __WXML_GLOBAL__ === 'undefined') {__WXML_GLOBAL__={};
}__WXML_GLOBAL__.modules = __WXML_GLOBAL__.modules || {};
var e_={}
if(typeof(global.entrys)==='undefined')global.entrys={};e_=global.entrys;
var d_={}
if(typeof(global.defines)==='undefined')global.defines={};d_=global.defines;
var f_={}
if(typeof(global.modules)==='undefined')global.modules={};f_=global.modules || {};
var p_={}
__WXML_GLOBAL__.ops_cached = __WXML_GLOBAL__.ops_cached || {}
__WXML_GLOBAL__.ops_set = __WXML_GLOBAL__.ops_set || {};
__WXML_GLOBAL__.ops_init = __WXML_GLOBAL__.ops_init || {};
var z=__WXML_GLOBAL__.ops_set.$gwx_XC_96 || [];
function gz$gwx_XC_96_1(){
if( __WXML_GLOBAL__.ops_cached.$gwx_XC_96_1)return __WXML_GLOBAL__.ops_cached.$gwx_XC_96_1
__WXML_GLOBAL__.ops_cached.$gwx_XC_96_1=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([[7],[3,'$taroCompReady']])
Z([[7],[3,'adsIsInit']])
Z([3,'renderSwiperRn'])
})(__WXML_GLOBAL__.ops_cached.$gwx_XC_96_1);return __WXML_GLOBAL__.ops_cached.$gwx_XC_96_1
}
__WXML_GLOBAL__.ops_set.$gwx_XC_96=z;
__WXML_GLOBAL__.ops_init.$gwx_XC_96=true;
var x=['./pages/index/_index/product_list/ads.wxml'];d_[x[0]]={}
d_[x[0]]["renderSwiperRn"]=function(e,s,r,gg){
var z=gz$gwx_XC_96_1()
var b=x[0]+':renderSwiperRn'
r.wxVkey=b
gg.f=$gdc(f_["./pages/index/_index/product_list/ads.wxml"],"",1)
if(p_[b]){_wl(b,x[0]);return}
p_[b]=true
try{
}catch(err){
p_[b]=false
throw err
}
p_[b]=false
return r
}
var m0=function(e,s,r,gg){
var z=gz$gwx_XC_96_1()
var bIU=_v()
_(r,bIU)
if(_oz(z,0,e,s,gg)){bIU.wxVkey=1
var oJU=_v()
_(bIU,oJU)
if(_oz(z,1,e,s,gg)){oJU.wxVkey=1
}
oJU.wxXCkey=1
}
bIU.wxXCkey=1
return r
}
e_[x[0]]={f:m0,j:[],i:[],ti:[],ic:[]}
if(path&&e_[path]){
return function(env,dd,global){$gwxc=0;var root={"tag":"wx-page"};root.children=[]
;g="$gwx_XC_96";var main=e_[path].f
if (typeof global==="undefined")global={};global.f=$gdc(f_[path],"",1);
try{
main(env,{},root,global);
_tsd(root)
}catch(err){
console.log(err)
}
;g="";
return root;
}
}
}
}(__g.a,__g.b,__g.c,__g.d,__g.e,__g.f,__g.g,__g.h,__g.i,__g.j,__g.k,__g.l,__g.m,__g.n,__g.o,__g.p,__g.q,__g.r,__g.s,__g.t,__g.u,__g.v,__g.w,__g.x,__g.y,__g.z,__g.A,__g.B,__g.C,__g.D,__g.E,__g.F,__g.G,__g.H,__g.I,__g.J,__g.K,__g.L,__g.M,__g.N,__g.O,__g.P,__g.Q,__g.R,__g.S,__g.T,__g.U,__g.V,__g.W,__g.X,__g.Y,__g.Z,__g.aa);if(__vd_version_info__.delayedGwx||false)$gwx_XC_96();	if (__vd_version_info__.delayedGwx) __wxAppCode__['pages/index/_index/product_list/ads.wxml'] = [$gwx_XC_96, './pages/index/_index/product_list/ads.wxml'];else __wxAppCode__['pages/index/_index/product_list/ads.wxml'] = $gwx_XC_96( './pages/index/_index/product_list/ads.wxml' );
	;__wxRoute = "pages/index/_index/product_list/ads";__wxRouteBegin = true;__wxAppCurrentFile__="pages/index/_index/product_list/ads.js";define("pages/index/_index/product_list/ads.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
(wx.webpackJsonp=wx.webpackJsonp||[]).push([[337],{1228:function(t,e,n){"use strict";n.r(e);var o,i=n(557),a=n.n(i);for(o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e.default=a.a},1904:function(t,e,n){t.exports=n.p+"pages/index/_index/product_list/ads.wxml"},3519:function(t,e,n){"use strict";n.r(e),n(3520);var o,i=n(1228);for(o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o)},3520:function(t,e,n){"use strict";n(1904)},3521:function(t,e,n){},557:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=v(n(3)),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t};function r(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var u,s=n(0),c=v(s),l=n(28),p=v(n(11)),d=v(n(1)),f=v(n(70)),h=v(n(5)),y=v(n(14)),m=v(n(9)),g=v(n(13)),_=n(71);function v(t){return t&&t.__esModule?t:{default:t}}function w(t){return function(){var e=t.apply(this,arguments);return new Promise((function(t,n){return function o(i,a){try{var r=e[i](a),u=r.value}catch(i){return void n(i)}if(!r.done)return Promise.resolve(u).then((function(t){o("next",t)}),(function(t){o("throw",t)}));t(u)}("next")}))}}function b(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function x(){var t,e,n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,x);for(var a,r=arguments.length,u=Array(r),s=0;s<r;s++)u[s]=arguments[s];return(t=e=b(this,(t=x.__proto__||Object.getPrototypeOf(x)).call.apply(t,[this].concat(u)))).$usedState=["loopArray496","$anonymousCallee__72","adsIsInit","adsIndexList","ads","adsTotalHeight","openDefaultShop"],e.changeIndex=function(t){t=void 0===(n=(o=t||{}).target)?{}:n;var n=void 0===(o=(void 0===(n=o.detail)?{}:n).current)?0:o,o=void 0===(t=((void 0===(o=(t||{}).dataset)?{}:o)||{}).index)?{}:t;(t=void 0===(t=e.state.adsIndexList)?{}:t)&&(t[o]=n),e.setState({adsIndexList:t})},e.showReportModal=function(){h.default.showModal({content:"年度饮茶报告仅支持在小程序查看，是否跳转至小程序？",cancelText:"稍后再看",cancelColor:"#343434",confirmText:"立即查看",confirmColor:"#DEB07F",onConfirmPress:function(){e.goMiniGo()}})},e.goMiniGo=function(){y.default.navigateToMiniProgram("gh_afe6acb517f0","pages/report/index")},e.setUserLocationAuthority=(a=w(o.default.mark((function t(i,a){var r;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=a||0,i)return t.next=4,(0,l.getLocation)();t.next=6;break;case 4:(r=t.sent)&&r.latitude?g.default.getInstance().events.trigger(d.default.eventNames.refreshMenu,{clearShop:!0}):0<a&&setTimeout((function(){e.setUserLocationAuthority(i,(a||0)-1)}),1e3);case 6:case"end":return t.stop()}}),t,n)}))),function(t,e){return a.apply(this,arguments)}),e.tapAction=function(t,a,r){return w(o.default.mark((function u(){var s,l,p;return o.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((s=e.props).onProductPositioning,l=s.openDefaultShop,s=void 0!==l&&l,l=(t||{}).value,m.default.postUserBase({type:"click",data:{eventId:"1.3.4.2",position:a+1,idx:r,bannerId:t.id}}),s)return n.next=6,(0,_.getUserLocationAuthority)();n.next=9;break;case 6:return n.sent?(0,_.showSystemLocationAuthority)({modal_parameter:{content:"hey，您可能未开启微信定位，请进入系统【设置】>>【隐私】>>【定位服务】中打开开关获取就近门店菜单或手动选择门店，即可享受下单服务",cancelText:"选择门店",confirmText:"授权定位",showCancel:!0,onCancelPress:function(){y.default.to(d.default.routes.chooseShop)}},callback:function(){e.setUserLocationAuthority(!0,6)}}):(0,_.showMiniLocationAuthority)(e.setUserLocationAuthority,{content:"开启喜茶GO定位授权获取就近门店菜单，或手动选择门店，即可享受下单服务",cancelText:"选择门店",onCancelPress:function(){y.default.to(d.default.routes.chooseShop)}}),n.abrupt("return");case 9:if("object"!==(void 0===t?"undefined":i(t))){n.next=17;break}if("3"===t.type)return t.self_app?c.default.navigateTo({url:t.value}).catch((function(){c.default.switchTab({url:t.value})})):f.default.navigateToMiniProgram({appId:t.app_id,path:t.value||"",envVersion:"release"}),n.abrupt("return");n.next=13;break;case 13:"5"===t.type&&t.category_id&&e.props.onProductPositioning(Number(t.category_id)||0,!1),"6"===t.type&&t.self_app&&(p=d.default.routes.landingPage,t.activity_id&&(p+="?id="+t.activity_id),c.default.navigateTo({url:p}).catch((function(){c.default.switchTab({url:p})}))),"4"===t.type&&t.product_id&&e.props.onProductPositioning(t.product_id||0,!0),"2"===t.type&&(console.log("urlurlurl",t.value),c.default.navigateTo({url:d.default.routes.webview+"?url="+encodeURIComponent(t.value)}));case 17:case"end":return n.stop()}}),u,n)})))},e.swiperChange=function(t,n,o){e.showPointLog.indexOf(o[n].id)<0&&(m.default.postUserBase({type:"show",data:{eventId:"1.3.4.2",position:t+1,idx:n,bannerId:o[n].id}}),e.showPointLog.push(o[n].id))},e.initBuriedPoint=function(){var t=(n=e.props).adsIsInit,n=n.ads;t&&n.filter((function(t){return"product"===t.position})).map((function(t,n){(void 0===(t=t.img_items)?[]:t).map((function(t,o){0<o||e.showPointLog.indexOf(t.id)<0&&(m.default.postUserBase({type:"show",data:{eventId:"1.3.4.2",position:n+1,idx:o,bannerId:t.id}}),e.showPointLog.push(t.id))}))}))},e.anonymousFunc0Map={},e.anonymousFunc1Map={},e.anonymousFunc2Map={},e.customComponents=[],b(e,t)}n(3521),function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(x,s.Component),a(x,[{key:"_constructor",value:function(t){(function t(e,n,o){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);return void 0!==i?"value"in i?i.value:void 0!==(i=i.get)?i.call(o):void 0:null!==(e=Object.getPrototypeOf(e))?t(e,n,o):void 0})(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"_constructor",this).call(this,t),this.showPointLog=[],this.state={adsIndexList:{}},this.$$refs=new c.default.RefsArray}},{key:"shouldComponentUpdate",value:function(t){return t.ads!==this.props.ads}},{key:"componentWillUpdate",value:function(t){var e,n=this,o=(t=void 0===(e=t.ads)?[]:e,void 0===(e=this.state.adsIndexList)?{}:e);t.filter((function(t){return"product"===t.position})).map((function(t,e){t=void 0===(i=t.img_items)?[]:i;var i=o[e]||0;t.length<i+1&&((i=o)[e]=0,n.setState({adsIndexList:i}))}))}},{key:"_createData",value:function(){var t=this;this.__state=arguments[0]||this.state||{},this.__props=arguments[1]||this.props||{},this.$prefix;var e=this.__props,n=e.ads,o=(e.adsTotalHeight,e.adsIsInit),i=(this.__state.adsIndexList,(p.default.getSysInfo().screenWidth-80-16)/p.default.getLayoutRatio());return this.initBuriedPoint(),e=o?n.filter((function(t){return"product"===t.position})):[],n=o?n.filter((function(t){return"product"===t.position})).map((function(e,n){var a=(e={$original:(0,s.internal_get_original)(e)}).$original,r=a.id,u=a.image_url,c=a.image_width,l=a.image_height,p=a.view_type,d=a.img_items,f=void 0===d?[]:d,h=Number(l)*i/Number(c),y="iajzz"+n;return t.anonymousFunc0Map[y]=t.tapAction(e.$original,1,1),a="ibazz"+n,t.anonymousFunc1Map[a]=function(e){t.swiperChange(n,e.detail.current,f)},d="swiper"===p?f.map((function(i,a){i={$original:(0,s.internal_get_original)(i)};var r=o?"image_id"+a:null,u="ibbzz"+n+"-"+a;return t.anonymousFunc2Map[u]=t.tapAction(i.$original,n,a),{id:e.id,image_url:e.image_url,image_width:e.image_width,image_height:e.image_height,view_type:e.view_type,img_items:e.img_items,h:e.h,$loopState__temp2:r,_$indexKey3:u,$original:i.$original}})):[],{id:r,image_url:u,image_width:c,image_height:l,view_type:p,img_items:f,h:h,_$indexKey:y,_$indexKey2:a,$anonymousCallee__71:d,$original:e.$original}})):[],Object.assign(this.__state,{loopArray496:n,$anonymousCallee__72:e,adsIsInit:o}),this.__state}},{key:"_createSwiperRnData",value:function(t){return function(t,e){return c.default.getSystemInfoSync().windowWidth,c.default.getSystemInfoSync().windowWidth,{}}}},{key:"anonymousFunc0",value:function(t){for(var e,n=arguments.length,o=Array(1<n?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return this.anonymousFunc0Map[t]&&(e=this.anonymousFunc0Map)[t].apply(e,o)}},{key:"anonymousFunc1",value:function(t){for(var e,n=arguments.length,o=Array(1<n?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return this.anonymousFunc1Map[t]&&(e=this.anonymousFunc1Map)[t].apply(e,o)}},{key:"anonymousFunc2",value:function(t){for(var e,n=arguments.length,o=Array(1<n?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return this.anonymousFunc2Map[t]&&(e=this.anonymousFunc2Map)[t].apply(e,o)}}]),a=u=x,u.$$events=["anonymousFunc0","anonymousFunc1","anonymousFunc2"],u.$$componentPath="pages/index/_index/product_list/ads",a.defaultProps={ads:[]},e.default=a,Component(n(0).default.createComponent(a))}},[[3519,0,1,2,3]]]);
},{isPage:false,isComponent:true,currentFile:'pages/index/_index/product_list/ads.js'});require("pages/index/_index/product_list/ads.js");