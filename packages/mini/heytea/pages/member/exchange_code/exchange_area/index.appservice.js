$gwx24_XC_2=function(_,_v,_n,_p,_s,_wp,_wl,$gwn,$gwl,$gwh,wh,$gstack,$gwrt,gra,grb,TestTest,wfor,_ca,_da,_r,_rz,_o,_oz,_1,_1z,_2,_2z,_m,_mz,nv_getDate,nv_getRegExp,nv_console,nv_parseInt,nv_parseFloat,nv_isNaN,nv_isFinite,nv_decodeURI,nv_decodeURIComponent,nv_encodeURI,nv_encodeURIComponent,$gdc,nv_JSON,_af,_gv,_ai,_grp,_gd,_gapi,$ixc,_ic,_w,_ev,_tsd){return function(path,global){
if(typeof global==='undefined'){if (typeof __GWX_GLOBAL__==='undefined')global={};else global=__GWX_GLOBAL__;}if(typeof __WXML_GLOBAL__ === 'undefined') {__WXML_GLOBAL__={};
}__WXML_GLOBAL__.modules = __WXML_GLOBAL__.modules || {};
var e_={}
if(typeof(global.entrys)==='undefined')global.entrys={};e_=global.entrys;
var d_={}
if(typeof(global.defines)==='undefined')global.defines={};d_=global.defines;
var f_={}
if(typeof(global.modules)==='undefined')global.modules={};f_=global.modules || {};
var p_={}
__WXML_GLOBAL__.ops_cached = __WXML_GLOBAL__.ops_cached || {}
__WXML_GLOBAL__.ops_set = __WXML_GLOBAL__.ops_set || {};
__WXML_GLOBAL__.ops_init = __WXML_GLOBAL__.ops_init || {};
var z=__WXML_GLOBAL__.ops_set.$gwx24_XC_2 || [];
function gz$gwx24_XC_2_1(){
if( __WXML_GLOBAL__.ops_cached.$gwx24_XC_2_1)return __WXML_GLOBAL__.ops_cached.$gwx24_XC_2_1
__WXML_GLOBAL__.ops_cached.$gwx24_XC_2_1=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([[7],[3,'$taroCompReady']])
Z([3,'exchange-area-wrapper'])
Z([[7],[3,'showTip']])
Z([[2,'&&'],[[7],[3,'warnText']],[[2,'>'],[[6],[[7],[3,'warnText']],[3,'length']],[1,0]]])
Z([[7],[3,'$compid__1198']])
Z([[7],[3,'$compid__1199']])
Z([[7],[3,'isShowExchangedSucceedTip']])
Z([3,'anonymousFunc7'])
Z([[7],[3,'exchangeSucceedBgCss']])
Z([[7],[3,'anonymousState__temp13']])
Z([[10],[[7],[3,'anonymousState__temp']]])
Z([3,'renderClosureExchangeSuccessTip'])
Z(z[11])
})(__WXML_GLOBAL__.ops_cached.$gwx24_XC_2_1);return __WXML_GLOBAL__.ops_cached.$gwx24_XC_2_1
}
__WXML_GLOBAL__.ops_set.$gwx24_XC_2=z;
__WXML_GLOBAL__.ops_init.$gwx24_XC_2=true;
var x=['./pages/member/exchange_code/exchange_area/index.wxml'];d_[x[0]]={}
d_[x[0]]["renderClosureExchangeSuccessTip"]=function(e,s,r,gg){
var z=gz$gwx24_XC_2_1()
var b=x[0]+':renderClosureExchangeSuccessTip'
r.wxVkey=b
gg.f=$gdc(f_["./pages/member/exchange_code/exchange_area/index.wxml"],"",1)
if(p_[b]){_wl(b,x[0]);return}
p_[b]=true
try{
}catch(err){
p_[b]=false
throw err
}
p_[b]=false
return r
}
var m0=function(e,s,r,gg){
var z=gz$gwx24_XC_2_1()
var bO=_v()
_(r,bO)
if(_oz(z,0,e,s,gg)){bO.wxVkey=1
var oP=_n('view')
_rz(z,oP,'class',1,e,s,gg)
var xQ=_v()
_(oP,xQ)
if(_oz(z,2,e,s,gg)){xQ.wxVkey=1
}
var oR=_v()
_(oP,oR)
if(_oz(z,3,e,s,gg)){oR.wxVkey=1
}
var fS=_n('sheet-modal')
_rz(z,fS,'compid',4,e,s,gg)
var cT=_n('scan-warn-box')
_rz(z,cT,'compid',5,e,s,gg)
_(fS,cT)
_(oP,fS)
var hU=_v()
_(oP,hU)
if(_oz(z,6,e,s,gg)){hU.wxVkey=1
var oV=_mz(z,'view',['bindtap',7,'class',1,'style',2],[],e,s,gg)
var cW=_v()
_(oV,cW)
var oX=_oz(z,11,e,s,gg)
var lY=_gd(x[0],oX,e_,d_)
if(lY){
var aZ=_1z(z,10,e,s,gg) || {}
var cur_globalf=gg.f
cW.wxXCkey=3
lY(aZ,aZ,cW,gg)
gg.f=cur_globalf
}
else _w(oX,x[0],61,34)
_(hU,oV)
}
else{hU.wxVkey=2
}
hU.wxXCkey=1
xQ.wxXCkey=1
oR.wxXCkey=1
_(bO,oP)
}
bO.wxXCkey=1
bO.wxXCkey=3
return r
}
e_[x[0]]={f:m0,j:[],i:[],ti:[],ic:[]}
if(path&&e_[path]){
return function(env,dd,global){$gwxc=0;var root={"tag":"wx-page"};root.children=[]
;g="$gwx24_XC_2";var main=e_[path].f
if (typeof global==="undefined")global={};global.f=$gdc(f_[path],"",1);
try{
main(env,{},root,global);
_tsd(root)
}catch(err){
console.log(err)
}
;g="";
return root;
}
}
}
}(__g.a,__g.b,__g.c,__g.d,__g.e,__g.f,__g.g,__g.h,__g.i,__g.j,__g.k,__g.l,__g.m,__g.n,__g.o,__g.p,__g.q,__g.r,__g.s,__g.t,__g.u,__g.v,__g.w,__g.x,__g.y,__g.z,__g.A,__g.B,__g.C,__g.D,__g.E,__g.F,__g.G,__g.H,__g.I,__g.J,__g.K,__g.L,__g.M,__g.N,__g.O,__g.P,__g.Q,__g.R,__g.S,__g.T,__g.U,__g.V,__g.W,__g.X,__g.Y,__g.Z,__g.aa);if(__vd_version_info__.delayedGwx||false)$gwx24_XC_2();	if (__vd_version_info__.delayedGwx) __wxAppCode__['pages/member/exchange_code/exchange_area/index.wxml'] = [$gwx24_XC_2, './pages/member/exchange_code/exchange_area/index.wxml'];else __wxAppCode__['pages/member/exchange_code/exchange_area/index.wxml'] = $gwx24_XC_2( './pages/member/exchange_code/exchange_area/index.wxml' );
	;__wxRoute = "pages/member/exchange_code/exchange_area/index";__wxRouteBegin = true;__wxAppCurrentFile__="pages/member/exchange_code/exchange_area/index.js";define("pages/member/exchange_code/exchange_area/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
(wx.webpackJsonp=wx.webpackJsonp||[]).push([[535],{1499:function(e,t,n){e.exports=n.p+"pages/member/exchange_code/exchange_area/index.wxml"},161:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=P(n(3)),r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,r=!1,o=void 0;try{for(var c,u=e[Symbol.iterator]();!(a=(c=u.next()).done)&&(n.push(c.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{!a&&u.return&&u.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e};function c(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var u,s=n(0),i=P(s),l=n(53),d=n(4),g=n(1414),f=P(n(5)),h=P(n(14)),_=n(2339),p=n(39),m=n(33),x=P(n(13)),y=n(20),b=n(17),v=n(1),S=P(v),k=n(8),w=P(n(12)),C=n(2340),F=P(n(2)),T=P(n(7)),L=n(18),O=n(741);function P(e){return e&&e.__esModule?e:{default:e}}function E(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function a(r,o){try{var c=t[r](o),u=c.value}catch(r){return void n(r)}if(!c.done)return Promise.resolve(u).then((function(e){a("next",e)}),(function(e){a("throw",e)}));e(u)}("next")}))}}function I(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n(2341);var j=v.hosts.memberApi,A=S.default.hosts.cdn,N={coupon:(0,k.getSrc)("/img/my/exchange_code/icon_exchange_coupon_new.png",-1),member:(0,k.getSrc)("/img/my/exchange_code/icon_exchange_member.png",-1),giftCard:(0,k.getSrc)("/img/my/exchange_code/icon_exchange_gift_card.png",-1)},$={coupon:"exchange-img-coupon",member:"exchange-img-member",giftCard:"exchange-img-member"},M={coupon:"exchange_title_coupon",member:"exchange_title_member",giftCard:"exchange_title_gift_card"},R={coupon:"exchange_placeholder_coupon",member:"exchange_placeholder_member",giftCard:{no:"exchange_placeholder_giftCard_card_no",pwd:"exchange_placeholder_giftCard_card_pwd"}},B=(0,k.getSrc)("/img/my/exchange_code/warn.png",-1),D=[{resultOutput:"US",resultInput:["en","EN"]},{resultOutput:"CN",resultInput:["cn","CN"]},{resultOutput:"HK",resultInput:["hk","HK","tw","TW"]},{resultOutput:"JP",resultInput:["ja","JP"]},{resultOutput:"MO",resultInput:["mo","MO"]}],G=/^[0-9A-Za-z]$/;function J(){var e,t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,J);for(var n=arguments.length,a=Array(n),r=0;r<n;r++)a[r]=arguments[r];return(e=t=I(this,(e=J.__proto__||Object.getPrototypeOf(J)).call.apply(e,[this].concat(a)))).$usedState=["anonymousState__temp2","anonymousState__temp3","anonymousState__temp4","anonymousState__temp5","anonymousState__temp6","anonymousState__temp7","anonymousState__temp8","anonymousState__temp9","anonymousState__temp10","anonymousState__temp11","anonymousState__temp12","anonymousState__temp13","$compid__1198","$compid__1199","showTip","IconWarn","exchangeType","cdn","iconCss","curIcon","cardNum","cardPWD","warnText","agreeImg","isShowExchangedSucceedTip","exchangeSucceedBgCss","anonymousState__temp","showCamera"],t.customComponents=["SheetModal","ScanWarnBox"],I(t,e)}(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(J,i.default.Component),o(J,[{key:"_constructor",value:function(e){(function e(t,n,a){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);return void 0!==r?"value"in r?r.value:void 0!==(r=r.get)?r.call(a):void 0:null!==(t=Object.getPrototypeOf(t))?e(t,n,a):void 0})(J.prototype.__proto__||Object.getPrototypeOf(J.prototype),"_constructor",this).call(this,e),this.$$refs=new i.default.RefsArray}},{key:"_createData",value:function(){var e=this;function t(){return 0===Z.length||"coupon"!==Fe&&!K||"giftCard"===Fe&&0===X.length}this.__state=arguments[0]||this.state||{},this.__props=arguments[1]||this.props||{};var n=this.$prefix,o=(0,s.genCompid)(n+"$compid__1198"),c=(Ue=r(o,2))[0],u=Ue[1],d=(0,s.genCompid)(n+"$compid__1199"),P=(ge=r(d,2))[0],I=ge[1],J=(this.__props,(0,s.useState)(!1)),K=(he=r(J,2))[0],W=he[1],q=(0,s.useState)(!1),z=(ye=r(q,2))[0],U=ye[1],H=(0,s.useState)(""),Z=(Se=r(H,2))[0],Q=Se[1],V=(0,s.useState)(""),X=(ke=r(V,2))[0],Y=ke[1],ee=(0,s.useState)(""),te=(Te=r(ee,2))[0],ne=Te[1],ae=(0,s.useState)(!1),re=(Oe=r(ae,2))[0],oe=Oe[1],ce=(0,s.useState)(!0),ue=(Pe=r(ce,2))[0],se=Pe[1],ie=(o=(0,s.useState)(!1),(Ue=r(o,2))[0]),le=Ue[1],de=(n=(0,s.useState)(0),(d=r(n,2))[0],d[1]),ge=(0,s.useState)(!0),fe=((J=r(ge,2))[0],J[1]),he=(0,s.useState)(!1),_e=(q=r(he,2))[0],pe=q[1],me=(0,s.useRef)(null),xe=(0,s.useRef)(!1),ye=(0,s.useState)([]),be=(H=r(ye,2))[0],ve=H[1],Se=(0,s.useState)(!1),ke=(V=r(Se,2))[0],we=V[1],Ce=(ee=void 0,(ee=(0,s.useRouter)()).params),Fe=ee.params.type,Te=N[Fe],Le=(ae=$[Fe],M[Fe]),Oe="giftCard"===Fe?R[Fe].no:R[Fe],Pe=(ce="giftCard"===Fe?R[Fe].pwd:"",v.hosts.cdn+"/img/common/"+(K?"packing-select-right-icon.png":"gouxuankuang.png"));function Ee(e){var t="";switch(e){case 6:t="喜茶礼品卡使用须知";break;case 3:t="喜茶单用途商业预付卡章程"}return t}function Ie(e){return D.filter((function(t){return t.resultInput.some((function(t){return-1<e.indexOf(t)}))}))[0].resultOutput}function je(e){var t;0!==be.length?(t=S.default.routes.serviceProtocol+"?path="+be[e].path+"&title="+Ee(e),(0,T.default.checkLoginPipeline)({triggerPath:S.default.routes.my,loginCallBack:function(){t&&h.default.to(t)}})):f.default.showToast({title:"该地区暂无阿喜有礼",icon:"none"})}function Ae(){Ye(),console.log(_e,"isShowExchangedSucceedTipisShowExchangedSucceedTip===="),Q(""),Y(""),W(!1),de(1)}function Ne(e,t){e=e.detail.value,(1===t?Q:Y)(e.toUpperCase())}function $e(){U(!1),console.log(343434343434),we(!0)}function Me(e){pe(!1);var t=Ce.from;"myGiftCard"===(t=void 0===t?"":t)?(i.default.navigateBack(),x.default.getInstance().events.trigger(S.default.eventNames.refreshMyGiftCards,{toastType:3})):"myIndex"===t&&(T.default.isShowGiftCardPurchase?i.default.redirectTo({url:S.default.routes.giftCard+"?tab="+e+"&exchange=1"}):i.default.redirectTo({url:S.default.routes.myGiftCard+"?exchange=1"}))}console.log("~~~~~~~~~~~~~~lenght,checked, havePower",Z.length,K,ue),o=t()?{backgroundColor:"#9C9D9E",borderWidth:0}:{},(0,s.useEffect)((function(){if(Xe(),ze(),He(),"giftCard"===Fe)return function(){var e=Ce.from;"myGiftCard"===(void 0===e?"":e)&&xe.current&&x.default.getInstance().events.trigger(S.default.eventNames.refreshMyGiftCards,{toastType:3})}}),[]);var Re,Be,De,Ge,Je,Ke,We,qe,ze=function(){(0,L.setTitle)(F.default.getLang(T.default.lang,"exchange_code")[Le]),i.default.setNavigationBarColor({backgroundColor:"#F5F6F7",frontColor:"#000000"})},Ue=function(e){console.log("~~~~~~~~~~~~~~,checked",JSON.stringify(e)),W(!K)},He=(Re=E(a.default.mark((function t(){var n,r;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=void 0,e.next=3,(0,b.getStorage)(S.default.localStorageKeys.lang);case 3:return n=Ie(n=e.sent),e.next=7,(0,m.getNewestUnSignAgreements)(n);case 7:(r=e.sent)&&0===r.code&&Array.isArray(r.data)&&r.data&&ve(r.data);case 9:case"end":return e.stop()}}),t,e)}))),function(){return Re.apply(this,arguments)}),Ze=(Be=E(a.default.mark((function t(){var n,r;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,y.judgeSetBirthdayJava)();case 3:r=e.sent,i.default.hideLoading(),n=r.code,r=r.data,0===n?r.birthday?i.default.redirectTo({url:v.routes.exchangeResult+"?codeType=1"}):i.default.redirectTo({url:v.routes.setBrithday+"?codeType=2"}):i.default.showToast({title:F.default.getLang(T.default.lang,"exchange_code").exchange_check_status_error,icon:"none"}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),w.default.pointScriptError({error:e.t0,page:"/pages/member/exchange_code/exchange_area"});case 12:case"end":return e.stop()}}),t,e,[[0,9]])}))),function(){return Be.apply(this,arguments)}),Qe=(De=E(a.default.mark((function n(){var r,o,c,u;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t())return e.abrupt("return");e.next=2;break;case 2:if(e.prev=2,ie)return e.abrupt("return");e.next=5;break;case 5:if(le(!0),f.default.showLoading({title:F.default.getLang(T.default.lang,"exchange_code").exchange_exchanging,mask:!0}),r=void 0,"coupon"===Fe)return e.next=11,(0,_.exchangeCouponCode)(Z);e.next=14;break;case 11:r=e.sent,e.next=26;break;case 14:if("member"===Fe)return e.next=17,(0,_.exchangeCode)(Z);e.next=20;break;case 17:r=e.sent,e.next=26;break;case 20:if(-1!==Z.indexOf(" ")||-1!==X.indexOf(" "))return f.default.showToast({title:F.default.getLang(T.default.lang,"haha").haha_card_exchange_input_error,mask:!0,icon:"none"}),e.abrupt("return");e.next=23;break;case 23:return e.next=25,(0,p.postExchangeGiftCard)({cardNo:Z,password:X});case 25:r=e.sent;case 26:if(console.log("~~~~~~~~兑换结果~~~~~~~~",r),f.default.hideLoading(),o=r.code,c=r.data,u=r.msg,0!==o){e.next=50;break}e.t0=Fe,e.next="giftCard"===e.t0?33:"member"===e.t0?38:"coupon"===e.t0?43:47;break;case 33:return me.current=c||null,pe(!0),xe.current=!0,le(!1),e.abrupt("break",48);case 38:return c&&(0,b.setStorage)("exchangeResult",c),e.next=41,Ze();case 41:return le(!1),e.abrupt("break",48);case 43:return i.default.navigateTo({url:v.routes.exchangeResult+"?codeType=2"}),f.default.hideLoading(),le(!1),e.abrupt("break",48);case 47:return e.abrupt("break",48);case 48:e.next=52;break;case 50:f.default.hideLoading(),"giftCard"===Fe?(et(o),le(!1)):(f.default.showToast({title:u,icon:"none"}),le(!1),ne(F.default.getLang(T.default.lang,"exchange_code")[C.exchangeErrorCode[o]]||F.default.getLang(T.default.lang,"exchange_code").common_request_error),2007!==o&&4004!==o||(Q(""),Y(""),se(!1)));case 52:e.next=57;break;case 54:e.prev=54,e.t1=e.catch(2),w.default.pointScriptError({error:e.t1,page:"/pages/member/exchange_code/exchange_area"});case 57:case"end":return e.stop()}}),n,e,[[2,54]])}))),n=function(){return De.apply(this,arguments)},E(a.default.mark((function t(){var n,r,o,c,u;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=void 0,e.next=3,Qe();case 3:return r=e.sent,e.next=6,(0,k.getChooseImage)({count:1,sizeType:["compressed"],sourceType:["camera"]});case 6:if(o=e.sent,u=o.tempFiles,c=o.tempFilePaths,console.log("~~~~~拍照~~~~`",o),!(u&&u[0]&&u[0].path)){e.next=15;break}u=u[0],n=c[0],console.log(""+u.path,0x16f67c446eda4500),e.next=16;break;case 15:return e.abrupt("return");case 16:return e.next=18,Ve(n,r);case 18:case"end":return e.stop()}}),t,e)}))),Ge=E(a.default.mark((function t(){var n;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return U(!1),t.next=3,Qe();case 3:n=t.sent,i.default.createCameraContext().takePhoto({quality:"high",success:function(){var t=E(a.default.mark((function t(r){var o,c;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("~~~~~拍照~~~~`",r,n),o=r.errMsg,c=r.tempImagePath,o&&c)return e.next=5,Ve(c,n);e.next=7;break;case 5:e.next=8;break;case 7:return e.abrupt("return");case 8:case"end":return e.stop()}}),t,e)})));return function(e){return t.apply(this,arguments)}}(),fail:function(e){console.log("拍照失败的错误原因=====>",e)}});case 7:case"end":return t.stop()}}),t,e)}))),d=function(){return Ge.apply(this,arguments)},Je=E(a.default.mark((function t(){var n,r;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,O.requestCameraPermission)();case 2:return n=e.sent,e.next=5,(0,O.requestAlbumPermission)();case 5:return r=e.sent,n&&r||f.default.showToast({title:"请开启访问相机相册权限",icon:"none"}),r=void 0,e.next=10,(0,b.getStorage)(v.localStorageKeys.token);case 10:if(r=e.sent){e.next=15;break}return e.next=14,(0,g.getToken)(!0);case 14:r=e.sent;case 15:return e.abrupt("return",r);case 16:case"end":return e.stop()}}),t,e)}))),function(){return Je.apply(this,arguments)}),Ve=(Ke=E(a.default.mark((function t(n,r){var o,c,u,s;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f.default.showLoading({title:"识别中……"}),o=j+"/service-member/ocr/identification",c=n,s={"Content-Type":"multipart/form-data"},r&&r.token&&(s.Authorization="Bearer "+(r&&r.token)),e.next=8,i.default.uploadFile({url:o,filePath:c,formData:{},header:s,name:"file"});case 8:if(s=e.sent,f.default.hideLoading(),console.log("~~~~~上传文件~~~~`",s),!s){e.next=24;break}if(u=(s||{}).data,console.log(u),s=JSON.parse(u),u=s.code,s=s.result,0===u)return s=s.cardNo,Q(s=void 0===s?"":s),G.test(s)&&"giftCard"!=Fe&&(Q(""),ne(F.default.getLang(T.default.lang,"exchange_code").exchange_scan_error_1)),we(!1),e.abrupt("return");e.next=23;break;case 23:10001===u?ne(F.default.getLang(T.default.lang,"exchange_code").exchange_scan_error_2):10002===u?ne(F.default.getLang(T.default.lang,"exchange_code").exchange_scan_error_3):10003===u?ne(F.default.getLang(T.default.lang,"exchange_code").exchange_scan_error_1):i.default.showToast({title:F.default.getLang(T.default.lang,"exchange_code").exchange_scan_error_5,icon:"none"});case 24:we(!1);case 25:case"end":return e.stop()}}),t,e)}))),function(e,t){return Ke.apply(this,arguments)}),Xe=(ge=function(){console.log("~~~~~~~~~~~~~`",!1),U(!1)},We=E(a.default.mark((function t(){var n,r,o,c;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,b.getStorage)(v.localStorageKeys.exchangeOnceTime);case 2:if(n=e.sent,c=new Date,r=c.getDate(),o=c.getMonth(),n){e.next=8;break}return U(!0),(0,b.setStorage)(v.localStorageKeys.exchangeOnceTime,o+","+r),e.abrupt("return");case 8:if(!(0<(c=n.split(",")).length)){e.next=15;break}if(Number(c[1])!==r||Number(c[0])!==o)return U(!0),(0,b.setStorage)(v.localStorageKeys.exchangeOnceTime,o+","+r),e.abrupt("return");e.next=14;break;case 14:$e();case 15:case"end":return e.stop()}}),t,e)}))),J=function(){return We.apply(this,arguments)},qe=E(a.default.mark((function t(){var n,r,o;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("coupon"===Fe)return e.abrupt("return");e.next=2;break;case 2:return e.prev=2,e.next=5,(0,_.getExchangeStatus)();case 5:n=e.sent,r=n.code,o=n.data,console.log("~~~~~~~~~获取兑换状态~~~~~~~~~",n),0===r&&o?"member"===Fe&&(r=o.lock,o=o.status,r&&(se(!1),ne(F.default.getLang(T.default.lang,"exchange_code").exchange_many_times_warn)),o||(oe(!0),se(!1))):(i.default.showToast({title:F.default.getLang(T.default.lang,"exchange_code").exchange_check_status_error,icon:"none"}),se(!0),oe(!0)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),w.default.pointScriptError({error:e.t0,page:"/pages/member/exchange_code/exchange_area"});case 14:case"end":return e.stop()}}),t,e,[[2,11]])}))),function(){return qe.apply(this,arguments)}),Ye=(he=function(){i.default.navigateTo({url:v.routes.protocolRuleExchange})},q=function(){"giftCard"===Fe?je(3):i.default.navigateTo({url:v.routes.protocolOpenPlanet})},function(){pe(!1)}),et=function(e){var t=F.default.getLang(T.default.lang,"haha").haha_card_exchange_failed_tip1;switch(e){case 7002005:t=F.default.getLang(T.default.lang,"haha").haha_card_exchange_failed_tip2;break;case 7002006:t=F.default.getLang(T.default.lang,"haha").haha_card_exchange_failed_tip3;break;case 7002007:t=F.default.getLang(T.default.lang,"haha").haha_card_exchange_failed_tip4;break;case 7002008:t=F.default.getLang(T.default.lang,"haha").haha_card_exchange_failed_tip5;break;case 7002011:t=F.default.getLang(T.default.lang,"haha").haha_card_exchange_failed_tip6,fe(!1)}f.default.showToast({title:t,mask:!0,icon:"none",duration:2500})};return ye="p-exchange-gift-card-success-bg"+(_e?" p-exchange-gift-card-success-bg-show":" p-exchange-gift-card-success-bg-dismiss"),H=_e?function(){var t=(o=me.current||{}).cardName,n=o.cardAmount,a=void 0===(c=o.imagePath)?"":c,r="p-exchange-gift-card-success-wrap"+(_e?" p-exchange-gift-card-success-wrap-show":" p-exchange-gift-card-success-wrap-dismiss"),o=(void 0===t?"":t)+" "+parseInt(void 0===n?"":n)+"元",c=F.default.getLang(T.default.lang,"haha").haha_card_exchange_succ_active;return e.anonymousFunc9=function(){return Me(1)},t=F.default.getLang(T.default.lang,"haha").haha_card_exchange_view,e.anonymousFunc10=Ae,n=F.default.getLang(T.default.lang,"haha").haha_card_exchange_continue,e.anonymousFunc11=Ae,{anonymousState__temp14:o,anonymousState__temp15:c,anonymousState__temp16:t,anonymousState__temp17:n,containerCss:r,imagePath:a,config:S.default}}():null,Se=re?F.default.getLang(T.default.lang,"exchange_code").exchange_star_tip_text_2:null,this.anonymousFunc0=he,V="giftCard"!==Fe?(0,s.internal_inline_style)({color:"#9EA3A9"}):null,ee="giftCard"!==Fe?F.default.getLang(T.default.lang,"exchange_code").exchange_redirect_exchange_rule:null,ue=(0,s.internal_inline_style)({}),he=F.default.getLang(T.default.lang,"exchange_code")[Oe],this.anonymousFunc1=function(e){return Ne(e,1)},this.anonymousFunc2=J,Oe=(0,k.getSrc)("/img/my/exchange_camera.png",-1),J="giftCard"===Fe?F.default.getLang(T.default.lang,"exchange_code")[ce]:null,this.anonymousFunc3=function(e){return Ne(e,2)},ce=(0,s.internal_inline_style)(o),this.anonymousFunc4=n,o=F.default.getLang(T.default.lang,"exchange_code").exchange,this.anonymousFunc5=Ue,n="coupon"!==Fe?F.default.getLang(T.default.lang,"haha").haha_card_exchange_agree:null,this.anonymousFunc6=q,Ue="coupon"!==Fe?F.default.getLang(T.default.lang,"haha").haha_card_agreement_zhangcheng:null,this.anonymousFunc7=Ye,q=_e?(0,s.internal_inline_style)((0,l.getRnShadowStyle)(3)):null,this.anonymousFunc8=d,s.propsManager.set({visible:z},u,c),s.propsManager.set({scanClick:$e,close:ge},I,P),Object.assign(this.__state,{anonymousState__temp2:Se,anonymousState__temp3:V,anonymousState__temp4:ee,anonymousState__temp5:ue,anonymousState__temp6:he,anonymousState__temp7:Oe,anonymousState__temp8:J,anonymousState__temp9:ce,anonymousState__temp10:o,anonymousState__temp11:n,anonymousState__temp12:Ue,anonymousState__temp13:q,$compid__1198:u,$compid__1199:I,showTip:re,IconWarn:B,exchangeType:Fe,cdn:A,iconCss:ae,curIcon:Te,cardNum:Z,cardPWD:X,warnText:te,agreeImg:Pe,isShowExchangedSucceedTip:_e,exchangeSucceedBgCss:ye,anonymousState__temp:H,showCamera:ke}),this.__state}},{key:"anonymousFunc0",value:function(e){}},{key:"anonymousFunc1",value:function(e){}},{key:"anonymousFunc2",value:function(e){}},{key:"anonymousFunc3",value:function(e){}},{key:"anonymousFunc4",value:function(e){}},{key:"anonymousFunc5",value:function(e){}},{key:"anonymousFunc6",value:function(e){}},{key:"anonymousFunc7",value:function(e){}},{key:"anonymousFunc8",value:function(e){}},{key:"anonymousFunc9",value:function(e){}},{key:"anonymousFunc10",value:function(e){}},{key:"anonymousFunc11",value:function(e){}}]),o=u=J,u.$$events=["anonymousFunc0","anonymousFunc1","anonymousFunc2","anonymousFunc3","anonymousFunc4","anonymousFunc5","anonymousFunc6","anonymousFunc7","anonymousFunc8","anonymousFunc9","anonymousFunc10","anonymousFunc11"],u.$$componentPath="pages/member/exchange_code/exchange_area/index",o=o).defaultconfig={backgroundColor:"#F5F6F7"},t.default=(0,d.inject)("user")((0,d.observer)(o)),Component(n(0).default.createComponent(o,!0))},2337:function(e,t,n){"use strict";n.r(t),n(2338);var a,r=n(830);for(a in r)"default"!==a&&function(e){n.d(t,e,(function(){return r[e]}))}(a)},2338:function(e,t,n){"use strict";n(1499)},2339:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getExchangeStatus=function(){return(0,a.httpGet)("/memberApi/service-member/vip/member-card/status")},t.exchangeCode=function(e){return(0,a.httpPost)("/memberApi/service-member/vip/member-card/code/"+e)},t.exchangeCouponCode=function(e){return(0,a.httpPost)("/memberApi/service-member/vip/coupon-library/coupon/exchange",{code:e})};var a=n(30)},2340:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.exchangeErrorCode={2001:"exchange_code_error_2001",2002:"exchange_code_error_2002",2003:"exchange_code_error_2003",2004:"exchange_code_error_2004",2005:"exchange_code_error_2005",2006:"exchange_code_error_2006",2007:"exchange_code_error_2007",2008:"exchange_code_error_2008",4001:"exchange_code_error_4001",4002:"exchange_code_error_4002",4003:"exchange_code_error_4003",4004:"exchange_code_error_4004",4012001:"exchange_code_error_4001",4012002:"exchange_code_error_4002",4012003:"exchange_code_error_4003",4012004:"exchange_code_error_2004",4012005:"exchange_code_error_4004",406005:"exchange_code_error_2001"}},2341:function(e,t,n){},830:function(e,t,n){"use strict";n.r(t);var a,r=n(161),o=n.n(r);for(a in r)"default"!==a&&function(e){n.d(t,e,(function(){return r[e]}))}(a);t.default=o.a}},[[2337,0,1,2,3]]]);
},{isPage:true,isComponent:true,currentFile:'pages/member/exchange_code/exchange_area/index.js'});require("pages/member/exchange_code/exchange_area/index.js");