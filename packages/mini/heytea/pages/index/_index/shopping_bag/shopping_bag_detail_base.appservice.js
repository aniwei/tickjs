$gwx_XC_123=function(_,_v,_n,_p,_s,_wp,_wl,$gwn,$gwl,$gwh,wh,$gstack,$gwrt,gra,grb,TestTest,wfor,_ca,_da,_r,_rz,_o,_oz,_1,_1z,_2,_2z,_m,_mz,nv_getDate,nv_getRegExp,nv_console,nv_parseInt,nv_parseFloat,nv_isNaN,nv_isFinite,nv_decodeURI,nv_decodeURIComponent,nv_encodeURI,nv_encodeURIComponent,$gdc,nv_JSON,_af,_gv,_ai,_grp,_gd,_gapi,$ixc,_ic,_w,_ev,_tsd){return function(path,global){
if(typeof global==='undefined'){if (typeof __GWX_GLOBAL__==='undefined')global={};else global=__GWX_GLOBAL__;}if(typeof __WXML_GLOBAL__ === 'undefined') {__WXML_GLOBAL__={};
}__WXML_GLOBAL__.modules = __WXML_GLOBAL__.modules || {};
var e_={}
if(typeof(global.entrys)==='undefined')global.entrys={};e_=global.entrys;
var d_={}
if(typeof(global.defines)==='undefined')global.defines={};d_=global.defines;
var f_={}
if(typeof(global.modules)==='undefined')global.modules={};f_=global.modules || {};
var p_={}
__WXML_GLOBAL__.ops_cached = __WXML_GLOBAL__.ops_cached || {}
__WXML_GLOBAL__.ops_set = __WXML_GLOBAL__.ops_set || {};
__WXML_GLOBAL__.ops_init = __WXML_GLOBAL__.ops_init || {};
var z=__WXML_GLOBAL__.ops_set.$gwx_XC_123 || [];
function gz$gwx_XC_123_1(){
if( __WXML_GLOBAL__.ops_cached.$gwx_XC_123_1)return __WXML_GLOBAL__.ops_cached.$gwx_XC_123_1
__WXML_GLOBAL__.ops_cached.$gwx_XC_123_1=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([[7],[3,'$taroCompReady']])
Z([3,'c-shopping-bag-detail-wrap'])
Z([3,'c-shopping-bag-detail-l-body'])
Z([1,true])
Z([[7],[3,'anonymousState__temp2']])
Z([[2,'&&'],[[2,'!'],[[7],[3,'isParty']]],[[2,'>'],[[7],[3,'shoppingBagTotalCount']],[1,0]]])
Z([[7],[3,'$compid__1568']])
Z([[2,'>'],[[6],[[7],[3,'maiZengTip']],[3,'length']],[1,0]])
Z([3,'idx'])
Z([3,'item'])
Z([[7],[3,'loopArray556']])
Z([3,'$loopState__temp4'])
Z([[6],[[7],[3,'item']],[3,'$compid__1565']])
Z([[2,'&&'],[[7],[3,'isShowBoxFeeItem']],[[2,'!'],[[7],[3,'isParty']]]])
Z([[2,'&&'],[[2,'!'],[[7],[3,'isParty']]],[[2,'>'],[[7],[3,'mallBagTotalCount']],[1,0]]])
Z([[7],[3,'$compid__1569']])
Z([[2,'!'],[[7],[3,'isParty']]])
Z(z[8])
Z(z[9])
Z([[7],[3,'loopArray557']])
Z(z[8])
Z([3,'mall-bag-activity-list-wrapper'])
Z([[6],[[7],[3,'item']],[3,'$loopState__temp12']])
Z([[6],[[7],[3,'item']],[3,'showAddMore']])
Z([3,'sidx'])
Z([3,'sitem'])
Z([[6],[[7],[3,'item']],[3,'$anonymousCallee__76']])
Z([3,'$loopState__temp6'])
Z([[6],[[7],[3,'sitem']],[3,'$compid__1566']])
Z([[7],[3,'anonymousState__temp13']])
Z(z[16])
Z(z[8])
Z(z[9])
Z([[7],[3,'loopArray558']])
Z([3,'$loopState__temp10'])
Z([[6],[[7],[3,'item']],[3,'$compid__1567']])
Z([[2,'<='],[[6],[[7],[3,'maiZengTip']],[3,'length']],[1,0]])
Z([[7],[3,'$compid__1570']])
})(__WXML_GLOBAL__.ops_cached.$gwx_XC_123_1);return __WXML_GLOBAL__.ops_cached.$gwx_XC_123_1
}
__WXML_GLOBAL__.ops_set.$gwx_XC_123=z;
__WXML_GLOBAL__.ops_init.$gwx_XC_123=true;
var x=['./pages/index/_index/shopping_bag/shopping_bag_detail_base.wxml'];d_[x[0]]={}
var m0=function(e,s,r,gg){
var z=gz$gwx_XC_123_1()
var fE3=_v()
_(r,fE3)
if(_oz(z,0,e,s,gg)){fE3.wxVkey=1
var cF3=_n('view')
_rz(z,cF3,'class',1,e,s,gg)
var oH3=_mz(z,'scroll-view',['class',2,'scrollY',1,'style',2],[],e,s,gg)
var cI3=_v()
_(oH3,cI3)
if(_oz(z,5,e,s,gg)){cI3.wxVkey=1
var oP3=_n('order-type-badge')
_rz(z,oP3,'compid',6,e,s,gg)
_(cI3,oP3)
}
var oJ3=_v()
_(oH3,oJ3)
if(_oz(z,7,e,s,gg)){oJ3.wxVkey=1
}
var xQ3=_v()
_(oH3,xQ3)
var oR3=function(cT3,fS3,hU3,gg){
var cW3=_n('heytea-item')
_rz(z,cW3,'compid',12,cT3,fS3,gg)
_(hU3,cW3)
return hU3
}
xQ3.wxXCkey=4
_2z(z,10,oR3,e,s,gg,xQ3,'item','idx','$loopState__temp4')
var lK3=_v()
_(oH3,lK3)
if(_oz(z,13,e,s,gg)){lK3.wxVkey=1
var oX3=_n('box-fee-item')
_(lK3,oX3)
}
var aL3=_v()
_(oH3,aL3)
if(_oz(z,14,e,s,gg)){aL3.wxVkey=1
var lY3=_n('order-type-badge')
_rz(z,lY3,'compid',15,e,s,gg)
_(aL3,lY3)
}
var tM3=_v()
_(oH3,tM3)
if(_oz(z,16,e,s,gg)){tM3.wxVkey=1
var aZ3=_v()
_(tM3,aZ3)
var t13=function(b33,e23,o43,gg){
var o63=_n('view')
_rz(z,o63,'class',21,b33,e23,gg)
var f73=_v()
_(o63,f73)
if(_oz(z,22,b33,e23,gg)){f73.wxVkey=1
var c83=_v()
_(f73,c83)
if(_oz(z,23,b33,e23,gg)){c83.wxVkey=1
}
c83.wxXCkey=1
}
var h93=_v()
_(o63,h93)
var o03=function(oB4,cA4,lC4,gg){
var tE4=_n('mall-fusion-item')
_rz(z,tE4,'compid',28,oB4,cA4,gg)
_(lC4,tE4)
return lC4
}
h93.wxXCkey=4
_2z(z,26,o03,b33,e23,gg,h93,'sitem','sidx','$loopState__temp6')
f73.wxXCkey=1
_(o43,o63)
return o43
}
aZ3.wxXCkey=4
_2z(z,19,t13,e,s,gg,aZ3,'item','idx','idx')
}
var eN3=_v()
_(oH3,eN3)
if(_oz(z,29,e,s,gg)){eN3.wxVkey=1
}
var bO3=_v()
_(oH3,bO3)
if(_oz(z,30,e,s,gg)){bO3.wxVkey=1
var eF4=_v()
_(bO3,eF4)
var bG4=function(xI4,oH4,oJ4,gg){
var cL4=_n('mall-fusion-item')
_rz(z,cL4,'compid',35,xI4,oH4,gg)
_(oJ4,cL4)
return oJ4
}
eF4.wxXCkey=4
_2z(z,33,bG4,e,s,gg,eF4,'item','idx','$loopState__temp10')
}
cI3.wxXCkey=1
cI3.wxXCkey=3
oJ3.wxXCkey=1
lK3.wxXCkey=1
lK3.wxXCkey=3
aL3.wxXCkey=1
aL3.wxXCkey=3
tM3.wxXCkey=1
tM3.wxXCkey=3
eN3.wxXCkey=1
bO3.wxXCkey=1
bO3.wxXCkey=3
_(cF3,oH3)
var hG3=_v()
_(cF3,hG3)
if(_oz(z,36,e,s,gg)){hG3.wxVkey=1
var hM4=_n('activity-tip')
_rz(z,hM4,'compid',37,e,s,gg)
_(hG3,hM4)
}
hG3.wxXCkey=1
hG3.wxXCkey=3
_(fE3,cF3)
}
fE3.wxXCkey=1
fE3.wxXCkey=3
return r
}
e_[x[0]]={f:m0,j:[],i:[],ti:[],ic:[]}
if(path&&e_[path]){
return function(env,dd,global){$gwxc=0;var root={"tag":"wx-page"};root.children=[]
;g="$gwx_XC_123";var main=e_[path].f
if (typeof global==="undefined")global={};global.f=$gdc(f_[path],"",1);
try{
main(env,{},root,global);
_tsd(root)
}catch(err){
console.log(err)
}
;g="";
return root;
}
}
}
}(__g.a,__g.b,__g.c,__g.d,__g.e,__g.f,__g.g,__g.h,__g.i,__g.j,__g.k,__g.l,__g.m,__g.n,__g.o,__g.p,__g.q,__g.r,__g.s,__g.t,__g.u,__g.v,__g.w,__g.x,__g.y,__g.z,__g.A,__g.B,__g.C,__g.D,__g.E,__g.F,__g.G,__g.H,__g.I,__g.J,__g.K,__g.L,__g.M,__g.N,__g.O,__g.P,__g.Q,__g.R,__g.S,__g.T,__g.U,__g.V,__g.W,__g.X,__g.Y,__g.Z,__g.aa);if(__vd_version_info__.delayedGwx||false)$gwx_XC_123();	if (__vd_version_info__.delayedGwx) __wxAppCode__['pages/index/_index/shopping_bag/shopping_bag_detail_base.wxml'] = [$gwx_XC_123, './pages/index/_index/shopping_bag/shopping_bag_detail_base.wxml'];else __wxAppCode__['pages/index/_index/shopping_bag/shopping_bag_detail_base.wxml'] = $gwx_XC_123( './pages/index/_index/shopping_bag/shopping_bag_detail_base.wxml' );
	;__wxRoute = "pages/index/_index/shopping_bag/shopping_bag_detail_base";__wxRouteBegin = true;__wxAppCurrentFile__="pages/index/_index/shopping_bag/shopping_bag_detail_base.js";define("pages/index/_index/shopping_bag/shopping_bag_detail_base.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
(wx.webpackJsonp=wx.webpackJsonp||[]).push([[364],{1123:function(t,e,i){"use strict";i.r(e);var o,n=i(453),a=i.n(n);for(o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e.default=a.a},1796:function(t,e,i){t.exports=i.p+"pages/index/_index/shopping_bag/shopping_bag_detail_base.wxml"},3215:function(t,e,i){"use strict";i.r(e),i(3216);var o,n=i(1123);for(o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o)},3216:function(t,e,i){"use strict";i(1796)},3217:function(t,e,i){},453:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],o=!0,n=!1,a=void 0;try{for(var r,l=t[Symbol.iterator]();!(o=(r=l.next()).done)&&(i.push(r.value),!e||i.length!==e);o=!0);}catch(t){n=!0,a=t}finally{try{!o&&l.return&&l.return()}finally{if(n)throw a}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(t,e,i){return e&&a(t.prototype,e),i&&a(t,i),t};function a(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var r,l=i(6),s=i(0),u=_(s),c=i(4),p=i(20),d=_(i(1)),g=_(i(5)),m=_(i(11)),f=_(i(2)),h=i(26),y=i(22);function _(t){return t&&t.__esModule?t:{default:t}}function v(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}i(3217);var I=d.default.hosts,S=d.default.routes;function B(){var t,e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,B);for(var i=arguments.length,o=Array(i),n=0;n<i;n++)o[n]=arguments[n];return(t=e=v(this,(t=B.__proto__||Object.getPrototypeOf(B)).call.apply(t,[this].concat(o)))).$usedState=["anonymousState__temp","anonymousState__temp2","anonymousState__temp13","loopArray556","loopArray557","loopArray558","$compid__1568","$compid__1569","$compid__1570","selectedAllImg","hosts","limitCupCss","isParty","shoppingBagTotalCount","teaAllSelectedImg","maiZengTip","showList","isShowBoxFeeItem","mallBagTotalCount","mallAllSelectedImg","mallFusionDisplayBagList","Cfg","departmentfailBagList","langObj","shoppingBagStore","user","activityStore"],e.handleTouchMove=function(t){t.preventDefault(),t.stopPropagation()},e.onClickTeaOrder=function(){var t=(i=e.props).shoppingBagStore,i=void 0!==(i=i.isParty)&&i;t=t.getRedemptionsActivity,e.checkIfSelectAllTeaProducts()?e.cancelSelectAllTeaProducts():e.selectAllTeaProducts(),t({isParty:i})},e.onClickMallFusionOrder=function(){e.checkIfSelectAllMallFusionProducts()?e.cancelSelectAllMallFusionProducts():e.selectAllMallFusionProducts()},e.onClickAllOrder=function(){var t=(i=e.props).shoppingBagStore,i=void 0!==(i=i.isParty)&&i;t=t.getRedemptionsActivity,e.checkIfSelectAllProducts()?e.cancelSelectAllProducts():e.selectAllProducts(),t({isParty:i})},e.onClickClearFailList=function(){var t=(i=e.props).shoppingBagStore,i=i.user.lang,o=t.clearFailShoppingBag;i=f.default.getLang(i,"common"),g.default.showModal({title:"",content:"确认清空失效商品吗？",cancelText:i.common_cancel,confirmText:i.common_confirm,confirmColor:"#DBA871",onConfirmPress:function(){o()}})},e.checkIfSelectAllTeaProducts=function(){for(var t=(r=e.props).shoppingBagStore,i=void 0!==(l=r.isParty)&&l,o=t.shoppingBagList,n=t.shoppingBagSelectedItemUniqueIds,a=t.isShowBoxFeeItem,r=t.isSelectPackingFee,l=t.partyBagList,s=(t=t.partyBagSelectedItemUniqueIds,i?l:o),u=i?t:n,c=!0,p=function(t,e){var i=s[t];if(-1===u.findIndex((function(t){return t.uniqueId===i.uniqueId})))return c=!1,"break"},d=0,g=s.length;d<g&&"break"!==p(d);d++);return a&&!r&&(c=!1),c},e.checkIfSelectAllMallFusionProducts=function(){for(var t=e.props.shoppingBagStore,i=t.mallFusionBagList,o=t.shoppingBagSelectedItemUniqueIds,n=!0,a=function(t,e){var a=i[t];if(-1===o.findIndex((function(t){return t.uniqueId===a.uniqueId})))return n=!1,"break"},r=0,l=i.length;r<l&&"break"!==a(r);r++);return n},e.checkIfSelectAllProducts=function(){for(var t=(l=e.props).shoppingBagStore,i=void 0!==(s=l.isParty)&&s,o=t.mallFusionBagList,n=t.shoppingBagList,a=t.shoppingBagSelectedItemUniqueIds,r=t.isShowBoxFeeItem,l=t.isSelectPackingFee,s=t.partyBagList,u=(t=t.partyBagSelectedItemUniqueIds,i?s:n),c=i?t:a,p=!0,d=function(t,e){var i=u[t];if(-1===c.findIndex((function(t){return t.uniqueId===i.uniqueId})))return p=!1,"break"},g=0,m=u.length;g<m&&"break"!==d(g);g++);var f=function(t,e){var i=o[t];if(-1===c.findIndex((function(t){return t.uniqueId===i.uniqueId})))return p=!1,"break"};for(g=0,m=o.length;g<m&&"break"!==f(g);g++);return r&&!l&&(p=!1),p},e.selectAllProducts=function(){var t=(r=e.props).shoppingBagStore,i=void 0!==(l=r.isParty)&&l,o=t.shoppingBagList,n=t.mallFusionBagList,a=t.setShoppingBagSelectedItemUniqueIds,r=t.isShowBoxFeeItem,l=t.setIsSelectPackingFee,s=(t=t.partyBagList,[]);(i?t:o).forEach((function(t){t=t.uniqueId,s.push({type:"heytea",uniqueId:t})})),n.forEach((function(t){t=t.uniqueId,s.push({type:"mallFusion",uniqueId:t})})),a(s,{isParty:i}),r&&l(!0)},e.selectAllTeaProducts=function(){var t=(l=e.props).shoppingBagStore,i=void 0!==(s=l.isParty)&&s,o=t.shoppingBagList,n=t.setShoppingBagSelectedItemUniqueIds,a=t.shoppingBagSelectedItemUniqueIds,r=t.isShowBoxFeeItem,l=t.setIsSelectPackingFee,s=t.partyBagList,u=(t=t.partyBagSelectedItemUniqueIds,i?t:a);(i?s:o).forEach((function(t){var e=t.uniqueId;a.find((function(t){return t.uniqueId===e}))||u.push({type:"heytea",uniqueId:e})})),n(u,{isParty:i}),r&&l(!0)},e.cancelSelectAllTeaProducts=function(){var t=(a=e.props).shoppingBagStore,i=void 0!==(r=a.isParty)&&r,o=t.setShoppingBagSelectedItemUniqueIds,n=t.shoppingBagSelectedItemUniqueIds,a=t.isShowBoxFeeItem,r=t.setIsSelectPackingFee;t=t.partyBagSelectedItemUniqueIds,o((i?t:n).filter((function(t){return"mallFusion"===t.type})),{isParty:i}),a&&r(!1)},e.selectAllMallFusionProducts=function(){var t=e.props.shoppingBagStore,i=t.mallFusionBagList,o=t.setShoppingBagSelectedItemUniqueIds,n=t.shoppingBagSelectedItemUniqueIds,a=n;i.forEach((function(t){var e=t.uniqueId;n.find((function(t){return t.uniqueId===e}))||a.push({type:"mallFusion",uniqueId:e})})),o(a)},e.cancelSelectAllMallFusionProducts=function(){var t=e.props.shoppingBagStore;(0,t.setShoppingBagSelectedItemUniqueIds)(t.shoppingBagSelectedItemUniqueIds.filter((function(t){return"heytea"===t.type})))},e.cancelSelectAllProducts=function(){var t=(o=e.props).shoppingBagStore,i=void 0!==(n=o.isParty)&&n,o=t.setShoppingBagSelectedItemUniqueIds,n=t.isShowBoxFeeItem;t=t.setIsSelectPackingFee,o([],{isParty:i}),n&&t(!1)},e.calculateScrollHeight=function(){var t=(a=e.props).shoppingBagStore,i=void 0!==(r=a.isParty)&&r,o=t.shoppingBagList,n=t.mallFusionBagList,a=t.isShowBoxFeeItem,r=t.partyBagList,l=(t=t.departmentfailBagList,140);return(o=i?r:o).forEach((function(t){var e;"IComboMealItem"===t.type?(l+=104,(void 0===(e=t.items)?[]:e).forEach((function(t){var e=70;0<t.attrs.length&&(e=90),l=(0,h.plus)(l,e+12*Math.floor(t.attrs.length/22))}))):"IShoppingBagItem"===t.type&&(l=(0,h.plus)(l,130+12*Math.floor(t.attrs.length/22)))})),i||n.forEach((function(t){l=(0,h.plus)(l,130+12*Math.floor(t.attrs.length/22))})),i||t.forEach((function(t){l=(0,h.plus)(l,130+12*Math.floor(t.attrs.length/22))})),!i&&t&&t.length&&(l+=106),a&&!i&&(l+=138),0<o.length&&(l+=80),0<n.length&&!i&&(l+=80),l},e.judgeMaiZengActivity=function(){var t,i,o,n,a=(u=e.props).activityStore,r=u.shoppingBagStore,l=u.user,s=void 0!==(c=u.isParty)&&c,u=a.activeCupFreeActivity,c=r.selectedShoppingBagList;return a=r.selectedPartyShoppingBagList,r=l.lang,l=s?a:c,s=f.default.getLang(r,"index"),a="",c=l.some((function(t){if("IShoppingBagItem"===t.type){t=(e=t.price).discountPrice;var e=e.redemptionDiscountPrice;return 0<=t||0<=e}})),u&&!c&&(r=u.limit_product_ids,t=void 0===r?[]:r,r=void 0===(c=u.policy_rule)?{}:c,c=u.category_limit,i=void 0===c?0:c,u=u.product_limit,o=void 0===u?0:u,u=void 0===(u=r.cup)?2:u,r=void 0===(r=r.free)?1:r,n=0,l.forEach((function(e){var a,r;"IShoppingBagItem"===e.type&&(a=e.quantity,(r=e.price).discountPrice<0&&r.redemptionDiscountPrice<0&&(0===i&&0===o||0<=t.indexOf(e.productId))&&(n+=a))})),0<n&&(a=n<u?f.default.template(s.index_mai_zeng_tip1,{cup:u-r,free:r,rest:u-n}):f.default.template(s.index_mai_zeng_tip2,{cup:u-r,free:r}))),a},e.judgeMallFusionActivityTip=function(t,i){if(!t)return{tip:"",showAddMore:!1};var o,n,a,r=e.props.user.lang,l=(a=f.default.getLang(r,"index")).index_mall_fusion_activity_tip1,s=a.index_mall_fusion_activity_tip2,u=a.index_mall_fusion_activity_tip3,c="",p=!1,d=(r=t.martDiscountActivityRules,[]),g=[];return r.forEach((function(t){var e=t.count;t=t.discount,d.push(e),g.push((0,h.times)(t,10))})),-1===(a=d.findIndex((function(t){return i<=t})))?(o=d[d.length-1],n=g[g.length-1],c=f.default.template(u,{count:o,discount:n})):(t=d[a],r=g[a],d[a]===i?d[a+1]?(o=d[a+1],n=g[a+1],c=f.default.template(s,{count:t,discount:r,addCountNum:o-t,Hdiscount:n}),p=!0):c=f.default.template(u,{count:t,discount:r}):(c=d[a-1]?(u=d[a-1],a=g[a-1],f.default.template(s,{count:u,discount:a,addCountNum:t-i,Hdiscount:r})):f.default.template(l,{addCountNum:t-i,count:t,discount:r}),p=!0)),{tip:c,showAddMore:p}},e.handleClickToMallFusion=function(){u.default.switchTab({url:S.mallFusion})},e.handleClearBag=function(){var t=(o=e.props).shoppingBagStore,i=o.user,o=void 0!==(o=o.isParty)&&o;t=(t||{}).clearShoppingBag,i=void 0===(i=((i||{}).partyOrder||{}).uniqueId)?"":i,e.showClearShippingBagFlag=!1,t&&t(o),o&&(0,p.partyClearGoods)({unique_id:i})},e.customComponents=["OrderTypeBadge","HeyteaItem","BoxFeeItem","MallFusionItem","ActivityTip"],v(e,t)}(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)})(B,s.Component),n(B,[{key:"_constructor",value:function(t){(function t(e,i,o){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,i);return void 0!==n?"value"in n?n.value:void 0!==(n=n.get)?n.call(o):void 0:null!==(e=Object.getPrototypeOf(e))?t(e,i,o):void 0})(B.prototype.__proto__||Object.getPrototypeOf(B.prototype),"_constructor",this).call(this,t),this.showClearShippingBagFlag=!1,this.$$refs=new u.default.RefsArray}},{key:"changeCombo",value:function(t){var e=(n=this.props).shoppingBagStore,i=void 0!==(a=n.isParty)&&a,o=e.shop,n=t.uniqueId,a=t.comboMealNo,r=(e=t.activityNo,t=t.items,i=i?"&isParty=1":"",{});t.forEach((function(t){var e=void 0===(n=t.comboMealPartitionNo)?"":n,i=t.productId,o=t.name,n=t.price;t=t.attrs,r[e]={productId:i,productName:o,price:n,attributes:t}})),(0,y.GetRoutePassParamSingleton)().setMatchedComboMeal(r),u.default.navigateTo({url:d.default.routes.combo+"?shop_id="+o.id+"&activity_no="+e+"&combo_meal_no="+a+"&uniqueId="+n+i})}},{key:"_createData",value:function(){var t=this;this.__state=arguments[0]||this.state||{},this.__props=arguments[1]||this.props||{};var e,i=this.$prefix,n=(0,s.genCompid)(i+"$compid__1568"),a=(M=o(n,2))[0],r=M[1],l=(0,s.genCompid)(i+"$compid__1569"),c=(k=o(l,2))[0],p=k[1],h=(0,s.genCompid)(i+"$compid__1570"),y=($=o(h,2))[0],_=$[1],v=(e=this.__props).shoppingBagStore,S=e.user,B=void 0!==(T=e.isParty)&&T,P=v.shoppingBagList,b=v.partyBagList,A=(v.mallFusionBagList,v.mallFusionDisplayBagList),C=v.shoppingBagTotalCount,F=v.mallBagTotalCount,w=v.shoppingBagNoPreMadeTotalCount,x=v.partyBagNoPreMadeTotalCount,M=(v.clearShoppingBag,n=v.shop,v.isShowBoxFeeItem),k=(l=v.departmentfailBagList,B?b:P),$=(h=B?x:w,S.lang),q=f.default.getLang($,"index"),T=void 0===(e=n.limit_cup)?10:e;return v=h<=Number(T)?"c-shopping-bag-detail-item-limit-cup-tip-wrap c-shopping-bag-detail-item-limit-cup-tip-wrap-z-dismiss":"c-shopping-bag-detail-item-limit-cup-tip-wrap c-shopping-bag-detail-item-limit-cup-tip-wrap-z-show",P=347*m.default.getSysInfo().windowHeight/553,x=this.calculateScrollHeight(),b={height:u.default.pxTransform(x),maxHeight:u.default.pxTransform(P/m.default.getLayoutRatio())},w=d.default.hosts.cdn+"/img/common/round-white-unselected.png",S=d.default.hosts.cdn+"/img/common/round-white-unselected.png",$=d.default.hosts.cdn+"/img/common/round-white-unselected.png",this.checkIfSelectAllTeaProducts()&&(w=d.default.hosts.cdn+"/img/common/round-black-selected.png"),this.checkIfSelectAllMallFusionProducts()&&(S=d.default.hosts.cdn+"/img/common/round-black-selected.png"),this.checkIfSelectAllProducts()&&($=d.default.hosts.cdn+"/img/common/round-black-selected.png"),n=this.judgeMaiZengActivity(),this.anonymousFunc0=function(){!1===t.showClearShippingBagFlag&&(t.showClearShippingBagFlag=!0,g.default.showModal({title:"",content:q.index_clear_shopping_cart+"?",cancelText:q.common_cancel,confirmText:q.common_confirm,confirmColor:"#DBA871",onCancelPress:function(){t.showClearShippingBagFlag=!1},onConfirmPress:function(){t.handleClearBag()}}))},e=f.default.template(q.index_over_cups_pro,{limit_cup:T}),h=(0,s.internal_inline_style)(b),x=Boolean(!B&&l&&l.length),P=k.map((function(t,e){t={$original:(0,s.internal_get_original)(t)};var n="heytea-bag-item-"+e,a=(0,s.genCompid)(i+"jbdzzzzzzz"+e,!0),r=(a=(r=o(a,2))[0],r[1]);return s.propsManager.set({item:t.$original,idx:e,isParty:B},r,a),{$loopState__temp4:n,$compid__1565:r,$original:t.$original}})),T=B?[]:A.map((function(e,n){var a=(g=(e={$original:(0,s.internal_get_original)(e)}).$original).mallActivityId,r=g.activities,l=g.items,u=Boolean(a),c=l.reduce((function(t,e){return t+(e.isSelect?e.quantity:0)}),0),p=(m=t.judgeMallFusionActivityTip(r,c)).tip,d=m.showAddMore,g=Boolean(u),m=B?[]:l.map((function(t,a){t={$original:(0,s.internal_get_original)(t)};var r=B?null:"mall-bag-"+a,c=B?null:a===l.length-1,p=(0,s.genCompid)(i+"jbezzzzzzz"+n+"-"+a,!0);return p=(a=o(p,2))[0],a=a[1],s.propsManager.set({item:t.$original,idx:n,isActivityItem:u,isActivityItemLast:c},a,p),{mallActivityId:e.mallActivityId,activities:e.activities,items:e.items,isActivityItem:e.isActivityItem,currentCount:e.currentCount,tip:e.tip,showAddMore:e.showAddMore,$loopState__temp6:r,$loopState__temp8:c,$compid__1566:a,$original:t.$original}}));return{mallActivityId:a,activities:r,items:l,isActivityItem:u,currentCount:c,tip:p,showAddMore:d,$loopState__temp12:g,$anonymousCallee__76:m,$original:e.$original}})),b=B?[]:l.map((function(t,e){t={$original:(0,s.internal_get_original)(t)};var n=B?null:"mall-bag-"+e,a=(0,s.genCompid)(i+"jbfzzzzzzz"+e,!0),r=(a=(r=o(a,2))[0],r[1]);return s.propsManager.set({item:t.$original,idx:e,styleType:"invalid"},r,a),{$loopState__temp10:n,$compid__1567:r,$original:t.$original}})),!B&&0<C&&s.propsManager.set({content:q.index_shop_self_takeaway},r,a),!B&&0<F&&s.propsManager.set({isMallType:!0,content:q.index_direct_mail},p,c),n.length<=0&&s.propsManager.set({isParty:B,absolutePosition:!1},_,y),Object.assign(this.__state,{anonymousState__temp:e,anonymousState__temp2:h,anonymousState__temp13:x,loopArray556:P,loopArray557:T,loopArray558:b,$compid__1568:r,$compid__1569:p,$compid__1570:_,selectedAllImg:$,hosts:I,limitCupCss:v,isParty:B,shoppingBagTotalCount:C,teaAllSelectedImg:w,maiZengTip:n,showList:k,isShowBoxFeeItem:M,mallBagTotalCount:F,mallAllSelectedImg:S,mallFusionDisplayBagList:A,Cfg:d.default,departmentfailBagList:l,langObj:q}),this.__state}},{key:"anonymousFunc0",value:function(t){}}]),n=r=B,r.$$events=["onClickAllOrder","handleTouchMove","anonymousFunc0","onClickTeaOrder","onClickMallFusionOrder","handleClickToMallFusion","onClickClearFailList"],r.$$componentPath="pages/index/_index/shopping_bag/shopping_bag_detail_base",n=n,n=(0,l.__decorate)([(0,c.inject)("shoppingBagStore","activityStore","user"),c.observer],n),e.default=n,Component(i(0).default.createComponent(n))}},[[3215,0,1,2,3]]]);
},{isPage:false,isComponent:true,currentFile:'pages/index/_index/shopping_bag/shopping_bag_detail_base.js'});require("pages/index/_index/shopping_bag/shopping_bag_detail_base.js");