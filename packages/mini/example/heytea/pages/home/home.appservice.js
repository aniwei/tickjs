$gwx_XC_75=function(_,_v,_n,_p,_s,_wp,_wl,$gwn,$gwl,$gwh,wh,$gstack,$gwrt,gra,grb,TestTest,wfor,_ca,_da,_r,_rz,_o,_oz,_1,_1z,_2,_2z,_m,_mz,nv_getDate,nv_getRegExp,nv_console,nv_parseInt,nv_parseFloat,nv_isNaN,nv_isFinite,nv_decodeURI,nv_decodeURIComponent,nv_encodeURI,nv_encodeURIComponent,$gdc,nv_JSON,_af,_gv,_ai,_grp,_gd,_gapi,$ixc,_ic,_w,_ev,_tsd){return function(path,global){
if(typeof global==='undefined'){if (typeof __GWX_GLOBAL__==='undefined')global={};else global=__GWX_GLOBAL__;}if(typeof __WXML_GLOBAL__ === 'undefined') {__WXML_GLOBAL__={};
}__WXML_GLOBAL__.modules = __WXML_GLOBAL__.modules || {};
var e_={}
if(typeof(global.entrys)==='undefined')global.entrys={};e_=global.entrys;
var d_={}
if(typeof(global.defines)==='undefined')global.defines={};d_=global.defines;
var f_={}
if(typeof(global.modules)==='undefined')global.modules={};f_=global.modules || {};
var p_={}
__WXML_GLOBAL__.ops_cached = __WXML_GLOBAL__.ops_cached || {}
__WXML_GLOBAL__.ops_set = __WXML_GLOBAL__.ops_set || {};
__WXML_GLOBAL__.ops_init = __WXML_GLOBAL__.ops_init || {};
var z=__WXML_GLOBAL__.ops_set.$gwx_XC_75 || [];
function gz$gwx_XC_75_1(){
if( __WXML_GLOBAL__.ops_cached.$gwx_XC_75_1)return __WXML_GLOBAL__.ops_cached.$gwx_XC_75_1
__WXML_GLOBAL__.ops_cached.$gwx_XC_75_1=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([3,'renderTop500Popup'])
Z([[2,'==='],[[7],[3,'status']],[1,1]])
Z([[7],[3,'$compid__1788']])
Z([3,'renderTop500FloatElement'])
Z([[7],[3,'$taroCompReady']])
Z([3,'p-home'])
Z([[10],[[7],[3,'anonymousState__temp2']]])
Z([3,'renderProtocolAlert'])
Z([[7],[3,'$compid__1789']])
Z([[7],[3,'$compid__1790']])
Z([[10],[[7],[3,'anonymousState__temp3']]])
Z([3,'renderMemberUpgrade'])
Z([[10],[[7],[3,'anonymousState__temp4']]])
Z(z[0])
Z([[7],[3,'$compid__1791']])
Z([[7],[3,'$compid__1792']])
Z([[7],[3,'$compid__1793']])
Z([[10],[[7],[3,'anonymousState__temp5']]])
Z(z[3])
Z([[7],[3,'isMainland']])
Z(z[11])
Z([[2,'&&'],[[2,'&&'],[[7],[3,'welfareUpgradePop']],[[2,'!'],[[7],[3,'isOverseasShop']]]],[[7],[3,'isStar']]])
Z([[7],[3,'$compid__1794']])
Z([[7],[3,'$compid__1795']])
Z(z[7])
})(__WXML_GLOBAL__.ops_cached.$gwx_XC_75_1);return __WXML_GLOBAL__.ops_cached.$gwx_XC_75_1
}
__WXML_GLOBAL__.ops_set.$gwx_XC_75=z;
__WXML_GLOBAL__.ops_init.$gwx_XC_75=true;
var x=['./pages/home/home.wxml'];d_[x[0]]={}
d_[x[0]]["renderTop500Popup"]=function(e,s,r,gg){
var z=gz$gwx_XC_75_1()
var b=x[0]+':renderTop500Popup'
r.wxVkey=b
gg.f=$gdc(f_["./pages/home/home.wxml"],"",1)
if(p_[b]){_wl(b,x[0]);return}
p_[b]=true
try{
var oB=_v()
_(r,oB)
if(_oz(z,1,e,s,gg)){oB.wxVkey=1
var xC=_n('top-500-popup')
_rz(z,xC,'compid',2,e,s,gg)
_(oB,xC)
}
else{oB.wxVkey=2
}
oB.wxXCkey=1
oB.wxXCkey=3
}catch(err){
p_[b]=false
throw err
}
p_[b]=false
return r
}
d_[x[0]]["renderTop500FloatElement"]=function(e,s,r,gg){
var z=gz$gwx_XC_75_1()
var b=x[0]+':renderTop500FloatElement'
r.wxVkey=b
gg.f=$gdc(f_["./pages/home/home.wxml"],"",1)
if(p_[b]){_wl(b,x[0]);return}
p_[b]=true
try{
}catch(err){
p_[b]=false
throw err
}
p_[b]=false
return r
}
d_[x[0]]["renderMemberUpgrade"]=function(e,s,r,gg){
var z=gz$gwx_XC_75_1()
var b=x[0]+':renderMemberUpgrade'
r.wxVkey=b
gg.f=$gdc(f_["./pages/home/home.wxml"],"",1)
if(p_[b]){_wl(b,x[0]);return}
p_[b]=true
try{
var oB=_v()
_(r,oB)
if(_oz(z,21,e,s,gg)){oB.wxVkey=1
var xC=_n('pop-up')
_rz(z,xC,'compid',22,e,s,gg)
var oD=_n('upgrade')
_rz(z,oD,'compid',23,e,s,gg)
_(xC,oD)
_(oB,xC)
}
else{oB.wxVkey=2
}
oB.wxXCkey=1
oB.wxXCkey=3
}catch(err){
p_[b]=false
throw err
}
p_[b]=false
return r
}
d_[x[0]]["renderProtocolAlert"]=function(e,s,r,gg){
var z=gz$gwx_XC_75_1()
var b=x[0]+':renderProtocolAlert'
r.wxVkey=b
gg.f=$gdc(f_["./pages/home/home.wxml"],"",1)
if(p_[b]){_wl(b,x[0]);return}
p_[b]=true
try{
}catch(err){
p_[b]=false
throw err
}
p_[b]=false
return r
}
var m0=function(e,s,r,gg){
var z=gz$gwx_XC_75_1()
var oXM=_v()
_(r,oXM)
if(_oz(z,4,e,s,gg)){oXM.wxVkey=1
var cYM=_n('view')
_rz(z,cYM,'class',5,e,s,gg)
var oZM=_v()
_(cYM,oZM)
var l1M=_oz(z,7,e,s,gg)
var a2M=_gd(x[0],l1M,e_,d_)
if(a2M){
var t3M=_1z(z,6,e,s,gg) || {}
var cur_globalf=gg.f
oZM.wxXCkey=3
a2M(t3M,t3M,oZM,gg)
gg.f=cur_globalf
}
else _w(l1M,x[0],21,22)
var e4M=_n('pull-to-refresh-view')
_rz(z,e4M,'compid',8,e,s,gg)
var b5M=_n('login-wrapper')
_rz(z,b5M,'compid',9,e,s,gg)
var o6M=_v()
_(b5M,o6M)
var x7M=_oz(z,11,e,s,gg)
var o8M=_gd(x[0],x7M,e_,d_)
if(o8M){
var f9M=_1z(z,10,e,s,gg) || {}
var cur_globalf=gg.f
o6M.wxXCkey=3
o8M(f9M,f9M,o6M,gg)
gg.f=cur_globalf
}
else _w(x7M,x[0],29,30)
var c0M=_v()
_(b5M,c0M)
var hAN=_oz(z,13,e,s,gg)
var oBN=_gd(x[0],hAN,e_,d_)
if(oBN){
var cCN=_1z(z,12,e,s,gg) || {}
var cur_globalf=gg.f
c0M.wxXCkey=3
oBN(cCN,cCN,c0M,gg)
gg.f=cur_globalf
}
else _w(hAN,x[0],30,30)
var oDN=_n('liner-gradient-view')
_rz(z,oDN,'compid',14,e,s,gg)
var aFN=_n('banner')
_rz(z,aFN,'compid',15,e,s,gg)
_(oDN,aFN)
var tGN=_n('ht-indicator')
_rz(z,tGN,'compid',16,e,s,gg)
_(oDN,tGN)
var eHN=_v()
_(oDN,eHN)
var bIN=_oz(z,18,e,s,gg)
var oJN=_gd(x[0],bIN,e_,d_)
if(oJN){
var xKN=_1z(z,17,e,s,gg) || {}
var cur_globalf=gg.f
eHN.wxXCkey=3
oJN(xKN,xKN,eHN,gg)
gg.f=cur_globalf
}
else _w(bIN,x[0],50,42)
var lEN=_v()
_(oDN,lEN)
if(_oz(z,19,e,s,gg)){lEN.wxVkey=1
}
lEN.wxXCkey=1
_(b5M,oDN)
_(e4M,b5M)
_(cYM,e4M)
_(oXM,cYM)
}
oXM.wxXCkey=1
oXM.wxXCkey=3
return r
}
e_[x[0]]={f:m0,j:[],i:[],ti:[],ic:[]}
if(path&&e_[path]){
return function(env,dd,global){$gwxc=0;var root={"tag":"wx-page"};root.children=[]
;g="$gwx_XC_75";var main=e_[path].f
if (typeof global==="undefined")global={};global.f=$gdc(f_[path],"",1);
try{
main(env,{},root,global);
_tsd(root)
}catch(err){
console.log(err)
}
;g="";
return root;
}
}
}
}(__g.a,__g.b,__g.c,__g.d,__g.e,__g.f,__g.g,__g.h,__g.i,__g.j,__g.k,__g.l,__g.m,__g.n,__g.o,__g.p,__g.q,__g.r,__g.s,__g.t,__g.u,__g.v,__g.w,__g.x,__g.y,__g.z,__g.A,__g.B,__g.C,__g.D,__g.E,__g.F,__g.G,__g.H,__g.I,__g.J,__g.K,__g.L,__g.M,__g.N,__g.O,__g.P,__g.Q,__g.R,__g.S,__g.T,__g.U,__g.V,__g.W,__g.X,__g.Y,__g.Z,__g.aa);if(__vd_version_info__.delayedGwx||false)$gwx_XC_75();	if (__vd_version_info__.delayedGwx) __wxAppCode__['pages/home/home.wxml'] = [$gwx_XC_75, './pages/home/home.wxml'];else __wxAppCode__['pages/home/home.wxml'] = $gwx_XC_75( './pages/home/home.wxml' );
	;__wxRoute = "pages/home/home";__wxRouteBegin = true;__wxAppCurrentFile__="pages/home/home.js";define("pages/home/home.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
(wx.webpackJsonp=wx.webpackJsonp||[]).push([[316],{1582:function(e,t,n){e.exports=n.p+"pages/home/home.wxml"},240:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=O(n(3)),o=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,o=!1,r=void 0;try{for(var i,s=e[Symbol.iterator]();!(a=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){o=!0,r=e}finally{try{!a&&s.return&&s.return()}finally{if(o)throw r}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var s=n(6),u=n(0),p=O(u),l=n(4),c=n(18),m=n(28),d=n(19),g=n(25),_=n(22),f=n(2577),h=n(15),y=n(38),S=n(53),v=n(2578),w=n(8),b=n(17),T=n(1579),C=O(n(13)),k=n(10),E=n(29),I=O(n(14)),A=n(1),P=O(A),x=O(n(2)),M=O(n(7)),U=O(n(5)),R=O(n(24)),L=O(n(31)),F=O(n(9));function O(e){return e&&e.__esModule?e:{default:e}}function B(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function a(o,r){try{var i=t[o](r),s=i.value}catch(o){return void n(o)}if(!i.done)return Promise.resolve(s).then((function(e){a("next",e)}),(function(e){a("throw",e)}));e(s)}("next")}))}}function G(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n(2579);var D,N,$="[Home]",z=P.default.routes,H=P.default.hosts.cdn;P.default.localStorageKeys,(N=D=D||{}).SELF="1",N.SELF_TAG="21",N.TAKEAWAY="2",N.TAKEAWAY_TAG="22",N.ENTERPRISE="3",N.ENTERPRISE_TAG="23",N.MALL="4",N.MALL_TAG="24",N.GROUP="5",N.GIFT="6",N.CHRISTMAS="7",N.ENTERTAIN="8";var j={id:-1,imageUrl:""+(0,w.getSrc)("/img/home/swiper1.png",-1),linkType:-1,linkUrl:"",selfApp:!1,sort:-1};function K(){var e,t,n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,K);for(var r,i,s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return(e=t=G(this,(e=K.__proto__||Object.getPrototypeOf(K)).call.apply(e,[this].concat(u)))).config={navigationStyle:"custom",allowsBounceVertical:"NO",transparentTitle:"always",titlePenetrate:"YES",defaultTitle:""},t.$usedState=["anonymousState__temp6","anonymousState__temp7","anonymousState__temp8","anonymousState__temp9","anonymousState__temp10","anonymousState__temp11","anonymousState__temp12","anonymousState__temp13","anonymousState__temp14","anonymousState__temp15","anonymousState__temp16","anonymousState__temp17","anonymousState__temp18","anonymousState__temp19","anonymousState__temp20","anonymousState__temp21","anonymousState__temp22","anonymousState__temp23","anonymousState__temp24","anonymousState__temp25","anonymousState__temp26","anonymousState__temp27","anonymousState__temp28","anonymousState__temp29","anonymousState__temp30","anonymousState__temp31","anonymousState__temp32","anonymousState__temp33","anonymousState__temp34","anonymousState__temp35","anonymousState__temp36","anonymousState__temp37","anonymousState__temp38","anonymousState__temp39","anonymousState__temp40","anonymousState__temp41","anonymousState__temp42","anonymousState__temp43","anonymousState__temp44","anonymousState__temp45","anonymousState__temp46","anonymousState__temp48","$compid__1789","$compid__1790","$compid__1791","$compid__1792","$compid__1793","anonymousState__temp2","anonymousState__temp3","anonymousState__temp4","anonymousState__temp5","isShowEntertain","isMainland","home_mypoint","memberScore","home_pointtips","home_code","bannerIndex","bannerList","copywritingMap","welfareUpgradePop","showAgreementBox","alreadyCheckAgreement","grayShowEntertain","top500DisplayStatus","user","__fn_once","shoppingBagStore"],t.antiShake=function(e){t.shakeFlag||(t.shakeFlag=!0,setTimeout((function(){t.shakeFlag=!1}),500),e())},t.showPoint=function(){F.default.postUserBase({type:"show",data:{eventId:"1.2.6.1"}}),F.default.postUserBase({type:"show",data:{eventId:"1.2.5.1"}}),F.default.postUserBase({type:"show",data:{eventId:"1.2.5.2"}})},t.initialize=B(a.default.mark((function e(){var o,r,i,s,u,p;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=o=0,!L.default.shop||!L.default.shop.latitude){e.next=8;break}o=Number(L.default.shop.latitude),r=Number(L.default.shop.longitude),e.next=12;break;case 8:return e.next=10,(0,m.getLocation)();case 10:(p=e.sent)&&(o=p.latitude,r=p.longitude);case 12:return e.next=14,t.getHomeBannerData(r,o);case 14:return i=e.sent,e.next=17,t.getMemberScore();case 17:return s=e.sent,e.next=20,t.getClosedShop(r,o);case 20:u=e.sent,p=u?u.region_code:"CN",(0,b.setStorage)("home-memberScore",s),i?(u=t.processCopywriting(i.moduleVos),t.setState({memberScore:s,copywritingMap:u,bannerList:i.bannerVos&&0<i.bannerVos.length?i.bannerVos:[j],isMainland:"CN"===p}),(0,b.setStorage)("home-homeData",i),(0,b.setStorage)("home-region",p),p=i.moduleVos.find((function(e){return 3===e.moduleType})),t.groupLinkUrl=p?p.linkUrl:void 0):t.setState({memberScore:s}),e.next=29;break;case 26:e.prev=26,e.t0=e.catch(0),R.default.script(e.t0,"pages/home/home",{method:"init"});case 29:case"end":return e.stop()}}),e,n,[[0,26]])}))),t.cacheDataSet=B(a.default.mark((function e(){var o,r,i,s;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,b.getStorage)("home-homeData");case 3:return o=e.sent,e.next=6,(0,b.getStorage)("home-memberScore");case 6:return r=e.sent,e.next=9,(0,b.getStorage)("home-region");case 9:i=e.sent,o&&(s=t.processCopywriting(o.moduleVos),void 0===r?t.setState({copywritingMap:s,bannerList:o.bannerVos&&0<o.bannerVos.length?o.bannerVos:[j],isMainland:"CN"===i}):t.setState({memberScore:r,copywritingMap:s,bannerList:o.bannerVos||[],isMainland:"CN"===i})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),R.default.script(e.t0,"pages/home/home#cacheDataSet");case 16:case"end":return e.stop()}}),e,n,[[0,13]])}))),t.getHomeBannerData=(i=B(a.default.mark((function e(o,r){var i,s,u;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u=t.props||{},i=((u.shoppingBagStore||{}).shop||{}).id,s=r?o+","+r:"",u={},r&&(u.location=s),i&&(u.shopId=i),e.next=10,(0,d.getHomeConfig)(u);case 10:if(0===(u=e.sent).code&&u.data)return e.abrupt("return",u.data);e.next=13;break;case 13:return e.abrupt("return",void 0);case 16:return e.prev=16,e.t0=e.catch(0),R.default.script(e.t0,"pages/home/home",{method:"getHomeBannerData"}),e.abrupt("return",void 0);case 20:case"end":return e.stop()}}),e,n,[[0,16]])}))),function(e,t){return i.apply(this,arguments)}),t.showReportModal=function(){U.default.showModal({content:"年度饮茶报告仅支持在小程序查看，是否跳转至小程序？",cancelText:"稍后再看",cancelColor:"#343434",confirmText:"立即查看",confirmColor:"#DEB07F",onConfirmPress:function(){t.goMiniGo()}})},t.goMiniGo=function(){I.default.navigateToMiniProgram("gh_afe6acb517f0","pages/report/index")},t.getMemberScore=B(a.default.mark((function e(){var o,r;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,g.getPointCouponNumJava)();case 3:if(o=e.sent,r=o.data,0===(o=o.code))return t.onLogin(),r=void 0===(r=(r||{}).usableScore)?0:r,e.abrupt("return",r);e.next=9;break;case 9:return 1002!==o&&401011!==o&&-1!==o||t.setGuestForFalse(),e.abrupt("return","***");case 13:return e.prev=13,e.t0=e.catch(0),R.default.script(e.t0,"pages/home/home",{method:"getMemberScore"}),e.abrupt("return",0);case 17:case"end":return e.stop()}}),e,n,[[0,13]])}))),t.getClosedShop=(r=B(a.default.mark((function e(t,o){var r;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t)return e.next=4,(0,E.getClosetStore)({location:t+","+o});e.next=7;break;case 4:if(0===(r=e.sent).code&&r.data)return e.abrupt("return",r.data);e.next=7;break;case 7:return e.abrupt("return",void 0);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",void 0);case 13:case"end":return e.stop()}}),e,n,[[0,10]])}))),function(e,t){return r.apply(this,arguments)}),t.setGuestForFalse=function(){(0,t.props.user.updateGuest)(!0)},t.getMemberPopInfo=function(){(0,d.getUserInfoJava)().then((function(e){t.setState({welfareUpgradePop:e.data.welfareUpgradePop})}))},t.getAgreement=B(a.default.mark((function e(){var o;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return");case 3:o=e.sent,t.setState({showAgreementBox:!o,alreadyCheckAgreement:Boolean(o)}),o?p.default.showTabBar({animation:!1}):p.default.hideTabBar({animation:!1});case 6:case"end":return e.stop()}}),e,n)}))),t.getTop500DisplayStatus=B(a.default.mark((function e(){var o,r;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C.default.getInstance().events.once(P.default.eventNames.activityTop500HideLayer,(function(){t.setState({top500DisplayStatus:0})})),e.prev=1,e.next=4,(0,T.getTop500HomeDisplayStatus)();case 4:o=e.sent,r=o.data,0===o.code&&r&&void 0!==r.status&&(console.log($,"getTop500DisplayStatus status",r.status),t.setState({top500DisplayStatus:r.status}),t.pageIsHide||1!==r.status||p.default.hideTabBar({animation:!0})),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(1);case 12:case"end":return e.stop()}}),e,n,[[1,10]])}))),t.processCopywriting=function(e){for(var t=new Map,n=0;n<e.length;n++)t.set(e[n].moduleType.toString(),e[n]);return t},t.handleBannerChange=function(e){t.setState({bannerIndex:e})},t.handleBannerItemClick=function(e){var t,n,a=e||{},r=a.linkType,i=a.productId,s=a.productInMenu,u=void 0!==s&&s,l=a.id;try{if(9===r){if(!u)return void I.default.to(z.shopList+"?bannerId="+l+"&productId="+i);r=4}3===r&&e.selfApp||8===r&&e.selfApp?(t=e.linkUrl.split("?"),t=(n=o(t,2))[0],n=void 0===(n=n[1])?void 0:n,t.endsWith("/")&&(t=t.substr(0,t.length-1)),t.startsWith("/")||(t="/"+t),-1<A.routerBar.indexOf(t)?I.default.tab(t):I.default.to(t+(n?"?"+n:""))):3!==r||e.selfApp?8===r&&!e.selfApp||(2===r&&e.linkUrl?I.default.to(z.webview+"?url="+encodeURIComponent(e.linkUrl)):6===r?I.default.to(z.landingPage+"?id="+e.activityId):4===r&&i&&(console.log(i,"productId666666666"),(0,_.GetRoutePassParamSingleton)().shareProductId=i,p.default.reLaunch({url:z.menu+"?productId="+i}))):e.appId&&I.default.navigateToMiniProgram(e.appId,e.linkUrl)}catch(e){R.default.script(e,"pages/home/home",{method:"handleBannerItemClick"})}},t.handleSelfTakenClick=function(){I.default.tab(z.menu)},t.handleTakeawayClick=function(){var e;t.state.isMainland?I.default.to(z.shoppingAddress+"?isShowUselessAddress=0"):(e=void 0===(e=t.props.user)?M.default:e,e=x.default.getLang(e.lang,"home").home_not_open_tip,U.default.showToast({title:e,icon:"none"}))},t.handleMallClick=function(){F.default.postUserBase({type:"click",data:{eventId:"1.2.5.1"}});var e=void 0===(e=t.props.user)?M.default:e;t.state.isMainland?(x.default.getLang(e.lang,"home").home_tips_one,I.default.tab(z.mallFusion)):(e=x.default.getLang(e.lang,"home").home_not_open_tip,U.default.showToast({title:e,icon:"none"}))},t.handleEnterpriseClick=function(){t.antiShake((function(){var e;F.default.event(k.IEventName.CLICK_GROUPMEAL_AT_HOME,"点击首页阿喜团餐",{type:k.IEventType.TRACK,data:{}}),t.groupLinkUrl?I.default.to(z.groupMealActivity):((e="",m.getRegion)().then((function(t){"SG"!==t&&"MO"!==t&&"JP"!==t?(e="HK"===t?"?id=53":"CN"===t?"?id=4":"?id=9",I.default.to(z.landingPage+e)):(t=x.default.getLang("","home").home_not_open_tip,U.default.showToast({title:t,icon:"none"}))})),F.default.postUserBase({type:"click",data:{eventId:"1.2.5.2"}}))}))},t.handleScoreClick=function(){(0,t.props.user.checkLoginPipeline)({triggerPath:z.home,loginCallBack:function(){I.default.to(z.mall)}}),F.default.postUserBase({type:"click",data:{eventId:"1.2.6.1"}})},t.handleMemberCodeClick=function(){(0,t.props.user.checkLoginPipeline)({triggerPath:z.home,loginCallBack:function(){I.default.to(z.memberQrCode)}})},t.handlePullRefresh=function(){t.initialize()},t.onClickScan=B(a.default.mark((function e(){var t;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,f.scanCode)();case 2:t=e.sent,console.log("scandata  ==========",t),setTimeout((function(){(0,v.parseHtQrUrl)(t||"")}),500);case 5:case"end":return e.stop()}}),e,n)}))),t.collectionAction=B(a.default.mark((function e(){var o,r,i;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.props.user,e.next=3,(0,m.getRegion)();case 3:if("JP"===e.sent)return r=(r=x.default.getLang("","home")).home_tips_one,U.default.showToast({title:r,icon:"none"}),e.abrupt("return");e.next=8;break;case 8:r=o.checkLoginPipeline,i=o.setAutoPartyOrder,r({triggerPath:z.home,loginCallBack:function(){I.default.reset(z.menu+"?partyOrder=auto"),i&&i(!0)}});case 10:case"end":return e.stop()}}),e,n)}))),t.handleEntertainAction=function(){I.default.to(z.entertainHome),F.default.event(k.IEventName.CLICKTREATATHOME,"点击首页请客入口",{type:k.IEventType.TRACK,data:{}})},t.onLogin=B(a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e,n)}))),t.getIsShowEntertain=B(a.default.mark((function e(){var o,r,i;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.entertainGray)();case 2:return o=e.sent,e.next=5,(0,m.getRegion)();case 5:r=e.sent,(i=(o||{}).data)?t.setState({isShowEntertain:"CN"===r&&i}):t.etTimer=setTimeout((function(){t.showEntertainAgain()}),1500);case 8:case"end":return e.stop()}}),e,n)}))),t.showEntertainAgain=B(a.default.mark((function e(){var o,r,i;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.props.user,o=void 0,((i||{}).userInfo||{}).is_guest)return e.next=7,(0,d.entertainGrayNotLogin)();e.next=10;break;case 7:o=e.sent,e.next=13;break;case 10:return e.next=12,(0,d.entertainGray)();case 12:o=e.sent;case 13:return e.next=15,(0,m.getRegion)();case 15:r=e.sent,i=(o||{}).data,t.setState({isShowEntertain:"CN"===r&&i});case 18:case"end":return e.stop()}}),e,n)}))),t.handleToGift=function(){var e=t.props.user,n=e.checkLoginPipeline;t.state.isMainland?n({triggerPath:z.home,loginCallBack:function(){I.default.to(z.giftCard)}}):(e=x.default.getLang(e.lang,"home").home_not_open_tip,U.default.showToast({title:e,icon:"none"}))},t.customComponents=["Top500Popup","PullToRefreshView","LoginWrapper","LinerGradientView","Banner","HtIndicator","PopUp","Upgrade"],G(t,e)}(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(K,p.default.Component),r(K,[{key:"_constructor",value:function(e){(function e(t,n,a){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);return void 0!==o?"value"in o?o.value:void 0!==(o=o.get)?o.call(a):void 0:null!==(t=Object.getPrototypeOf(t))?e(t,n,a):void 0})(K.prototype.__proto__||Object.getPrototypeOf(K.prototype),"_constructor",this).call(this,e),this.enterTime=0,this.etTimer=void 0,this.pageIsHide=!1,this.state={bannerIndex:0,bannerList:[j],memberScore:"***",copywritingMap:new Map,welfareUpgradePop:!1,showAgreementBox:!1,isMainland:!0,alreadyCheckAgreement:!1,isShowEntertain:!1,grayShowEntertain:!1,top500DisplayStatus:0},this.$$refs=new p.default.RefsArray}},{key:"componentDidMount",value:function(){(0,c.setTitle)(""),this.cacheDataSet(),this.getAgreement(),this.getIsShowEntertain(),p.default.showTabBar({}),this.getTop500DisplayStatus()}},{key:"componentDidShow",value:function(){this.pageIsHide=!1,this.initialize(),this.getIsShowEntertain(),(0,h.isIos)()&&p.default.showTabBar({animation:!1}),this.enterTime=(new Date).getTime(),this.showPoint()}},{key:"componentDidHide",value:function(){this.pageIsHide=!0,F.default.postUserBase({type:"show",data:{eventId:"1.2.1.1",enterTime:this.enterTime,leaveTime:(new Date).getTime()}})}},{key:"componentWillUnmount",value:function(){this.etTimer&&clearTimeout(this.etTimer),this.etTimer=void 0}},{key:"_createTop500PopupData",value:function(e){var t=this;return function(){var n,a=(0,u.genCompid)(e+"$compid__1788"),r=(n=o(a,2))[0];return a=n[1],1===(n=t.state.top500DisplayStatus)&&(t.anonymousFunc0=function(){t.setState({top500DisplayStatus:2}),p.default.showTabBar({animation:!1})},t.anonymousFunc1=function(){p.default.showTabBar({animation:!1}),p.default.navigateTo({url:z.top500Form+"?source=popup"}),setTimeout((function(){t.setState({top500DisplayStatus:2})}),100)},u.propsManager.set({onClose:t.anonymousFunc0,onClickGetBox:t.anonymousFunc1},a,r)),{$compid__1788:a,status:n}}}},{key:"_createTop500FloatElementData",value:function(e){var t=this;return function(){var e,n=t.state.top500DisplayStatus;return 2===n&&(t.anonymousFunc2=function(){p.default.navigateTo({url:z.top500Form+"?source=floating"})},e=(0,w.getSrc)("img/activity/top_500/gift_tag_1.gif")),{_$anonymousState__temp:e,status:n}}}},{key:"_createData",value:function(){this.__state=arguments[0]||this.state||{},this.__props=arguments[1]||this.props||{};var e=this.$prefix,t=(0,u.genCompid)(e+"$compid__1789"),n=(ue=o(t,2))[0],a=ue[1],r=(0,u.genCompid)(e+"$compid__1790"),i=(pe=o(r,2))[0],s=pe[1],p=(0,u.genCompid)(e+"$compid__1791"),l=(le=o(p,2))[0],c=le[1],m=(0,u.genCompid)(e+"$compid__1792"),d=(ce=o(m,2))[0],g=ce[1],_=(0,u.genCompid)(e+"$compid__1793"),f=(me=o(_,2))[0],h=me[1],v=(de=this.__state).bannerIndex,b=de.bannerList,T=(de.memberScore,de.copywritingMap),C=de.isMainland,k=(de.alreadyCheckAgreement,de.isShowEntertain),E=void 0===(ge=this.__props.user)?M.default:ge,I=(_e=x.default.getLang(E.lang,"home")).home_store,A=_e.home_delivery,P=_e.home_mart,U=_e.home_corporate,R=_e.home_mypoint,L=_e.home_pointtips,F=_e.home_code,O=_e.home_group,B=_e.home_gift,G=((0,y.isIphoneX)(),{display:"none"}),N="zh-HK"===E.lang?{fontFamily:"PingFangTC-Medium"}:{},$=(0,S.getRnShadowStyle)(-1),H=this._createProtocolAlertData(e+"bafizzzzzz")(),j=this._createMemberUpgradeData(e+"bafjzzzzzz")(),K=this._createTop500PopupData(e+"bagazzzzzz")(),V=this._createTop500FloatElementData(e+"bagbzzzzzz")(),W=(0,u.internal_inline_style)(G),Y=(0,w.getSrc)("/img/home/nav_icon_saosao.png",-1),J=(0,w.getSrc)("/img/home/logo2.png",-1),Q=(0,w.getSrc)("/img/home/logo2.png",-1),q=(0,w.getSrc)("/img/home/logo2.png",-1),X=(0,w.getSrc)("/img/home/logo2.png",-1),Z={height:"100%",width:"100%",display:"flex",flexDirection:"column"},ee=(0,u.internal_inline_style)(C?{}:{marginTop:"-5%"}),te=1<b.length,ne=T.get(D.CHRISTMAS)?T.get(D.CHRISTMAS).imageUrl:null,ae=(0,u.internal_inline_style)(C?{}:{marginTop:"7%"}),oe=(0,u.internal_inline_style)($),re=T.get(D.SELF)&&T.get(D.SELF).imageUrl||(0,w.getSrc)("/img/home/home_icon_ziqu1.png",-1),ie=(0,u.internal_inline_style)(N),se=T.get(D.SELF)&&T.get(D.SELF).title||I&&I.toUpperCase(),ue=(t=T.get(D.SELF)&&T.get(D.SELF).copywriting||"",T.get(D.TAKEAWAY)&&T.get(D.TAKEAWAY).imageUrl||(0,w.getSrc)("/img/home/home_icon_waimai1.png",-1)),pe=(r=(0,u.internal_inline_style)(N),T.get(D.TAKEAWAY)&&T.get(D.TAKEAWAY).title||A&&A.toUpperCase()),le=(p=T.get(D.TAKEAWAY)&&T.get(D.TAKEAWAY).copywriting||"",k?T.get(D.GROUP)&&T.get(D.GROUP).imageUrl||(0,w.getSrc)("/img/common/home_group.png",-1):null),ce=(m=k?T.get(D.GROUP)&&T.get(D.GROUP).title||O&&O.toUpperCase():null,k?T.get(D.ENTERTAIN)&&T.get(D.ENTERTAIN).imageUrl||(0,w.getSrc)("/img/entertain/entertain_home.png",-1):null),me=(_=k?T.get(D.ENTERTAIN)&&T.get(D.ENTERTAIN).title||"请客":null,T.get(D.GROUP)&&T.get(D.GROUP).imageUrl||(0,w.getSrc)("/img/common/home_group.png",-1)),de=T.get(D.GROUP)&&T.get(D.GROUP).title||O&&O.toUpperCase(),ge=T.get(D.GROUP)&&T.get(D.GROUP).copywriting||"",_e=(0,u.internal_inline_style)(C?{marginTop:24}:{marginTop:42});return E=(0,u.internal_inline_style)({backgroundColor:T.get(D.MALL)&&T.get(D.MALL).bgColor||"#f0f0f0"}),e=T.get(D.MALL)&&T.get(D.MALL).title||P&&P.toUpperCase(),G=T.get(D.MALL)&&T.get(D.MALL).copywriting||"",$=T.get(D.MALL)&&T.get(D.MALL).imageUrl||(0,w.getSrc)("/img/common/home_b_place.png",-1),I=(0,u.internal_inline_style)({backgroundColor:T.get(D.ENTERPRISE)&&T.get(D.ENTERPRISE).bgColor||"#f0f0f0"}),N=T.get(D.ENTERPRISE)&&T.get(D.ENTERPRISE).title||U&&U.toUpperCase(),A=T.get(D.ENTERPRISE)&&T.get(D.ENTERPRISE).copywriting||"",k=T.get(D.ENTERPRISE)&&T.get(D.ENTERPRISE).imageUrl||(0,w.getSrc)("/img/common/home_b_place.png",-1),O=(0,u.internal_inline_style)({backgroundColor:T.get(D.GIFT)&&T.get(D.GIFT).bgColor||"#f0f0f0"}),P=T.get(D.GIFT)&&T.get(D.GIFT).title||B&&B.toUpperCase(),U=T.get(D.GIFT)&&T.get(D.GIFT).copywriting||"",B=T.get(D.GIFT)&&T.get(D.GIFT).imageUrl||(0,w.getSrc)("/img/common/home_b_place.png",-1),C=C?(0,w.getSrc)("/img/home/home_icon_erweima.png",-1):null,T=T.get(D.CHRISTMAS),u.propsManager.set({pullImg:J,readyImg:Q,refreshImg:q,finishImg:X,defaultRefreshingTime:0,onRefreshing:this.handlePullRefresh},a,n),u.propsManager.set({identityPath:z.home},s,i),u.propsManager.set({startColor:"#ECECEC",centerColor:"#ECECEC",endColor:"#FFF",style:Z},c,l),u.propsManager.set({bannerVos:b,onChange:this.handleBannerChange,onItemClick:this.handleBannerItemClick},g,d),u.propsManager.set({indicatorIndex:v,indicatorTotal:b.length,visible:te},h,f),Object.assign(this.__state,{anonymousState__temp6:W,anonymousState__temp7:Y,anonymousState__temp8:J,anonymousState__temp9:Q,anonymousState__temp10:q,anonymousState__temp11:X,anonymousState__temp12:Z,anonymousState__temp13:ee,anonymousState__temp14:te,anonymousState__temp15:ne,anonymousState__temp16:ae,anonymousState__temp17:oe,anonymousState__temp18:re,anonymousState__temp19:ie,anonymousState__temp20:se,anonymousState__temp21:t,anonymousState__temp22:ue,anonymousState__temp23:r,anonymousState__temp24:pe,anonymousState__temp25:p,anonymousState__temp26:le,anonymousState__temp27:m,anonymousState__temp28:ce,anonymousState__temp29:_,anonymousState__temp30:me,anonymousState__temp31:de,anonymousState__temp32:ge,anonymousState__temp33:_e,anonymousState__temp34:E,anonymousState__temp35:e,anonymousState__temp36:G,anonymousState__temp37:$,anonymousState__temp38:I,anonymousState__temp39:N,anonymousState__temp40:A,anonymousState__temp41:k,anonymousState__temp42:O,anonymousState__temp43:P,anonymousState__temp44:U,anonymousState__temp45:B,anonymousState__temp46:C,anonymousState__temp48:T,$compid__1789:a,$compid__1790:s,$compid__1791:c,$compid__1792:g,$compid__1793:h,anonymousState__temp2:H,anonymousState__temp3:j,anonymousState__temp4:K,anonymousState__temp5:V,home_mypoint:R,home_pointtips:L,home_code:F}),this.__state}},{key:"_createMemberUpgradeData",value:function(e){var t=this;return function(){var n,a=(0,u.genCompid)(e+"$compid__1794"),r=(c=o(a,2))[0],i=c[1],s=(0,u.genCompid)(e+"$compid__1795"),p=(l=o(s,2))[0],l=(a=l[1],s=(c=t.props).user,c.shoppingBagStore),c=s.memberClub.starLevel;return s=t.state.welfareUpgradePop,l=l.isOverseasShop,c=0<c,s&&!l&&c&&(t.anonymousFunc3=function(){console.log(11)},n={isShowPopUp:s,setShowPopUp:function(){t.setState({welfareUpgradePop:!1})}},t.anonymousFunc4=function(){t.setState({welfareUpgradePop:!1})},u.propsManager.set({noBackground:!0,onColse:t.anonymousFunc3},i,r),u.propsManager.set({isStar:c,popUp:n},a,p)),{_$anonymousState__temp2:n,$compid__1794:i,$compid__1795:a,welfareUpgradePop:s,isOverseasShop:l,isStar:c,cdn:H}}}},{key:"_createProtocolAlertData",value:function(e){var t=this;return function(){return t.state.showAgreementBox,{}}}},{key:"anonymousFunc0",value:function(e){}},{key:"anonymousFunc1",value:function(e){}},{key:"anonymousFunc2",value:function(e){}},{key:"anonymousFunc3",value:function(e){}},{key:"anonymousFunc4",value:function(e){}}]),r=N=K,N.$$events=["anonymousFunc2","onClickScan","handleSelfTakenClick","handleTakeawayClick","collectionAction","handleEntertainAction","handleMallClick","handleEnterpriseClick","handleToGift","handleScoreClick","handleMemberCodeClick","anonymousFunc4"],N.$$componentPath="pages/home/home",r=r).config={navigationStyle:"custom",allowsBounceVertical:"NO",transparentTitle:"always",titlePenetrate:"YES",defaultTitle:""},r=(0,s.__decorate)([(0,l.inject)("user","shoppingBagStore"),l.observer],r),t.default=r,Component(n(0).default.createComponent(r,!0))},2575:function(e,t,n){"use strict";n.r(t),n(2576);var a,o=n(910);for(a in o)"default"!==a&&function(e){n.d(t,e,(function(){return o[e]}))}(a)},2576:function(e,t,n){"use strict";n(1582)},2577:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scanCode=function(){return new Promise((function(e){a.default.scanCode({success:function(t){e(t.result)},fail:function(t){e(void 0)}})}))};var a=function(e){return e&&e.__esModule?e:{default:e}}(n(0))},2578:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseHtQrUrl=void 0;var a=s(n(0)),o=s(n(1)),r=s(n(13)),i=s(n(5));function s(e){return e&&e.__esModule?e:{default:e}}var u=o.default.routerBar,p=o.default.routes;t.parseHtQrUrl=function(e){var t,n,o,s=decodeURIComponent(e).replace(/http[s]?:\/\/[^/?]+/,"");s?(t=(o=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,o=!1,r=void 0;try{for(var i,s=e[Symbol.iterator]();!(a=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){o=!0,r=e}finally{try{!a&&s.return&&s.return()}finally{if(o)throw r}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(n=s.split("?"),2))[0],n=void 0===(s=o[1])?"":s,"/"===t.substr(-1)&&(t=t.substr(0,t.length-1)),o=function(e){"?"===e.substring(0,1)&&(e=e.substring(1));for(var t={},n=e.split("&"),a=0;a<n.length;a++)t[n[a].split("=")[0]]=unescape(n[a].split("=")[1]);return t}(n),"/alipayPage"!==(s=t)&&("/fpt-wechat/wxscan/wxkp.do"===t||t===p.code||-1<t.indexOf("orderid")?s=p.code:""!==t&&"/"!==t&&t!==p.menu&&t!==p.menu+"/"||(s=p.menu),-1<u.indexOf(s)?(s===p.menu?r.default.getInstance().setInspirationParam(o):s===p.code&&r.default.getInstance().setInspirationParam(decodeURIComponent(e)),a.default.switchTab({url:s})):a.default.redirectTo({url:n?s+"?"+n:s,fail:this.fail}))):e&&e.length&&(e=e.substring(0,150),i.default.showToast({icon:"none",title:e,duration:3e3}))}},2579:function(e,t,n){},910:function(e,t,n){"use strict";n.r(t);var a,o=n(240),r=n.n(o);for(a in o)"default"!==a&&function(e){n.d(t,e,(function(){return o[e]}))}(a);t.default=r.a}},[[2575,0,1,2,3]]]);
},{isPage:true,isComponent:true,currentFile:'pages/home/home.js'});require("pages/home/home.js");