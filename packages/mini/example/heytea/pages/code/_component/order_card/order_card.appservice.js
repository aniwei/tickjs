$gwx_XC_60=function(_,_v,_n,_p,_s,_wp,_wl,$gwn,$gwl,$gwh,wh,$gstack,$gwrt,gra,grb,TestTest,wfor,_ca,_da,_r,_rz,_o,_oz,_1,_1z,_2,_2z,_m,_mz,nv_getDate,nv_getRegExp,nv_console,nv_parseInt,nv_parseFloat,nv_isNaN,nv_isFinite,nv_decodeURI,nv_decodeURIComponent,nv_encodeURI,nv_encodeURIComponent,$gdc,nv_JSON,_af,_gv,_ai,_grp,_gd,_gapi,$ixc,_ic,_w,_ev,_tsd){return function(path,global){
if(typeof global==='undefined'){if (typeof __GWX_GLOBAL__==='undefined')global={};else global=__GWX_GLOBAL__;}if(typeof __WXML_GLOBAL__ === 'undefined') {__WXML_GLOBAL__={};
}__WXML_GLOBAL__.modules = __WXML_GLOBAL__.modules || {};
var e_={}
if(typeof(global.entrys)==='undefined')global.entrys={};e_=global.entrys;
var d_={}
if(typeof(global.defines)==='undefined')global.defines={};d_=global.defines;
var f_={}
if(typeof(global.modules)==='undefined')global.modules={};f_=global.modules || {};
var p_={}
__WXML_GLOBAL__.ops_cached = __WXML_GLOBAL__.ops_cached || {}
__WXML_GLOBAL__.ops_set = __WXML_GLOBAL__.ops_set || {};
__WXML_GLOBAL__.ops_init = __WXML_GLOBAL__.ops_init || {};
var z=__WXML_GLOBAL__.ops_set.$gwx_XC_60 || [];
function gz$gwx_XC_60_1(){
if( __WXML_GLOBAL__.ops_cached.$gwx_XC_60_1)return __WXML_GLOBAL__.ops_cached.$gwx_XC_60_1
__WXML_GLOBAL__.ops_cached.$gwx_XC_60_1=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([[7],[3,'$taroCompReady']])
Z([3,'anonymousFunc0'])
Z([3,'c-order-card'])
Z([[7],[3,'$compid__1301']])
Z([[7],[3,'showGreyBlock']])
Z([3,'c-order-card-pick-out'])
Z([[7],[3,'anonymousState__temp32']])
Z([[2,'!=='],[[7],[3,'estimateTip']],[1,'none']])
Z([[2,'&&'],[[2,'&&'],[[7],[3,'showCupboard']],[[2,'!'],[[2,'!'],[[7],[3,'cupboard']]]]],[[2,'!'],[[7],[3,'is_takeaway']]]])
Z(z[7])
Z([[7],[3,'anonymousState__temp33']])
Z([3,'l-order-card-pick-out-tk-head'])
Z([[7],[3,'anonymousState__temp34']])
Z([3,'l-order-card-pick-out-head-info'])
Z([[7],[3,'anonymousState__temp35']])
Z(z[7])
Z([[7],[3,'anonymousState__temp36']])
Z([[2,'!'],[[2,'!'],[[7],[3,'tipNavigateBtns']]]])
Z([3,'index'])
Z([3,'item'])
Z([[7],[3,'loopArray405']])
Z([3,'$loopState__temp8'])
Z(z[0])
Z([[2,'==='],[[6],[[6],[[7],[3,'item']],[3,'$original']],[3,'id']],[[6],[[7],[3,'OrderStateButtonId']],[3,'LIST_SERVICE_CONTENT']]])
Z([[6],[[7],[3,'item']],[3,'$compid__1300']])
Z([[2,'>'],[[6],[[7],[3,'buttons']],[3,'length']],[1,0]])
Z(z[18])
Z(z[19])
Z([[7],[3,'loopArray407']])
Z([3,'$loopState__temp25'])
Z(z[0])
})(__WXML_GLOBAL__.ops_cached.$gwx_XC_60_1);return __WXML_GLOBAL__.ops_cached.$gwx_XC_60_1
}
__WXML_GLOBAL__.ops_set.$gwx_XC_60=z;
__WXML_GLOBAL__.ops_init.$gwx_XC_60=true;
var x=['./pages/code/_component/order_card/order_card.wxml'];d_[x[0]]={}
var m0=function(e,s,r,gg){
var z=gz$gwx_XC_60_1()
var tMH=_v()
_(r,tMH)
if(_oz(z,0,e,s,gg)){tMH.wxVkey=1
var eNH=_mz(z,'view',['bindtap',1,'class',1],[],e,s,gg)
var xQH=_n('order-card-header')
_rz(z,xQH,'compid',3,e,s,gg)
_(eNH,xQH)
var bOH=_v()
_(eNH,bOH)
if(_oz(z,4,e,s,gg)){bOH.wxVkey=1
var oRH=_n('view')
_rz(z,oRH,'class',5,e,s,gg)
var fSH=_v()
_(oRH,fSH)
if(_oz(z,6,e,s,gg)){fSH.wxVkey=1
var cWH=_v()
_(fSH,cWH)
if(_oz(z,7,e,s,gg)){cWH.wxVkey=1
}
cWH.wxXCkey=1
}
var cTH=_v()
_(oRH,cTH)
if(_oz(z,8,e,s,gg)){cTH.wxVkey=1
var oXH=_v()
_(cTH,oXH)
if(_oz(z,9,e,s,gg)){oXH.wxVkey=1
}
oXH.wxXCkey=1
}
var hUH=_v()
_(oRH,hUH)
if(_oz(z,10,e,s,gg)){hUH.wxVkey=1
var lYH=_n('view')
_rz(z,lYH,'class',11,e,s,gg)
var aZH=_v()
_(lYH,aZH)
if(_oz(z,12,e,s,gg)){aZH.wxVkey=1
}
var t1H=_n('view')
_rz(z,t1H,'class',13,e,s,gg)
var e2H=_v()
_(t1H,e2H)
if(_oz(z,14,e,s,gg)){e2H.wxVkey=1
}
var b3H=_v()
_(t1H,b3H)
if(_oz(z,15,e,s,gg)){b3H.wxVkey=1
}
e2H.wxXCkey=1
b3H.wxXCkey=1
_(lYH,t1H)
aZH.wxXCkey=1
_(hUH,lYH)
}
var oVH=_v()
_(oRH,oVH)
if(_oz(z,16,e,s,gg)){oVH.wxVkey=1
var o4H=_v()
_(oVH,o4H)
if(_oz(z,17,e,s,gg)){o4H.wxVkey=1
var x5H=_v()
_(o4H,x5H)
var o6H=function(c8H,f7H,h9H,gg){
var cAI=_v()
_(h9H,cAI)
if(_oz(z,22,c8H,f7H,gg)){cAI.wxVkey=1
var oBI=_v()
_(cAI,oBI)
if(_oz(z,23,c8H,f7H,gg)){oBI.wxVkey=1
var lCI=_n('service-content')
_rz(z,lCI,'compid',24,c8H,f7H,gg)
_(oBI,lCI)
}
else{oBI.wxVkey=2
}
oBI.wxXCkey=1
oBI.wxXCkey=3
}
cAI.wxXCkey=1
cAI.wxXCkey=3
return h9H
}
x5H.wxXCkey=4
_2z(z,20,o6H,e,s,gg,x5H,'item','index','$loopState__temp8')
}
o4H.wxXCkey=1
o4H.wxXCkey=3
}
fSH.wxXCkey=1
cTH.wxXCkey=1
hUH.wxXCkey=1
oVH.wxXCkey=1
oVH.wxXCkey=3
_(bOH,oRH)
}
var oPH=_v()
_(eNH,oPH)
if(_oz(z,25,e,s,gg)){oPH.wxVkey=1
var aDI=_v()
_(oPH,aDI)
var tEI=function(bGI,eFI,oHI,gg){
var oJI=_v()
_(oHI,oJI)
if(_oz(z,30,bGI,eFI,gg)){oJI.wxVkey=1
}
oJI.wxXCkey=1
return oHI
}
aDI.wxXCkey=2
_2z(z,28,tEI,e,s,gg,aDI,'item','index','$loopState__temp25')
}
bOH.wxXCkey=1
bOH.wxXCkey=3
oPH.wxXCkey=1
_(tMH,eNH)
}
tMH.wxXCkey=1
tMH.wxXCkey=3
return r
}
e_[x[0]]={f:m0,j:[],i:[],ti:[],ic:[]}
if(path&&e_[path]){
return function(env,dd,global){$gwxc=0;var root={"tag":"wx-page"};root.children=[]
;g="$gwx_XC_60";var main=e_[path].f
if (typeof global==="undefined")global={};global.f=$gdc(f_[path],"",1);
try{
main(env,{},root,global);
_tsd(root)
}catch(err){
console.log(err)
}
;g="";
return root;
}
}
}
}(__g.a,__g.b,__g.c,__g.d,__g.e,__g.f,__g.g,__g.h,__g.i,__g.j,__g.k,__g.l,__g.m,__g.n,__g.o,__g.p,__g.q,__g.r,__g.s,__g.t,__g.u,__g.v,__g.w,__g.x,__g.y,__g.z,__g.A,__g.B,__g.C,__g.D,__g.E,__g.F,__g.G,__g.H,__g.I,__g.J,__g.K,__g.L,__g.M,__g.N,__g.O,__g.P,__g.Q,__g.R,__g.S,__g.T,__g.U,__g.V,__g.W,__g.X,__g.Y,__g.Z,__g.aa);if(__vd_version_info__.delayedGwx||false)$gwx_XC_60();	if (__vd_version_info__.delayedGwx) __wxAppCode__['pages/code/_component/order_card/order_card.wxml'] = [$gwx_XC_60, './pages/code/_component/order_card/order_card.wxml'];else __wxAppCode__['pages/code/_component/order_card/order_card.wxml'] = $gwx_XC_60( './pages/code/_component/order_card/order_card.wxml' );
	;__wxRoute = "pages/code/_component/order_card/order_card";__wxRouteBegin = true;__wxAppCurrentFile__="pages/code/_component/order_card/order_card.js";define("pages/code/_component/order_card/order_card.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
(wx.webpackJsonp=wx.webpackJsonp||[]).push([[73],{1389:function(e,t,n){"use strict";n.r(t);var a,r=n(717),o=n.n(r);for(a in r)"default"!==a&&function(e){n.d(t,e,(function(){return r[e]}))}(a);t.default=o.a},2064:function(e,t,n){e.exports=n.p+"pages/code/_component/order_card/order_card.wxml"},4e3:function(e,t,n){"use strict";n.r(t),n(4001);var a,r=n(1389);for(a in r)"default"!==a&&function(e){n.d(t,e,(function(){return r[e]}))}(a)},4001:function(e,t,n){"use strict";n(2064)},4002:function(e,t,n){},717:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=x(n(3)),r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,a=arguments[t];for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,r=!1,o=void 0;try{for(var i,u=e[Symbol.iterator]();!(a=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{!a&&u.return&&u.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},u=function(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),e};function d(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var l=x(n(67)),s=n(0),c=x(s),p=x(n(2)),_=n(20),f=x(n(792)),m=x(n(791)),y=n(32),g=n(8),O=n(15),S=n(17),I=n(28),b=x(n(23)),h=n(1),T=x(h),v=x(n(14)),k=x(n(5)),E=x(n(24)),C=x(n(54)),w=x(n(9)),A=n(10),N=x(n(41)),R=n(40),B=n(76),L=n(69),D=x(n(7));function x(e){return e&&e.__esModule?e:{default:e}}function P(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function a(r,o){try{var i=t[r](o),u=i.value}catch(r){return void n(r)}if(!i.done)return Promise.resolve(u).then((function(e){a("next",e)}),(function(e){a("throw",e)}));e(u)}("next")}))}}function $(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n(4002);var F=T.default.routes;function M(){var e,t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,M);for(var n=arguments.length,a=Array(n),r=0;r<n;r++)a[r]=arguments[r];return(e=t=$(this,(e=M.__proto__||Object.getPrototypeOf(M)).call.apply(e,[this].concat(a)))).$usedState=["anonymousState__temp","anonymousState__temp2","anonymousState__temp3","anonymousState__temp4","anonymousState__temp5","anonymousState__temp6","anonymousState__temp23","anonymousState__temp32","anonymousState__temp33","anonymousState__temp34","anonymousState__temp35","anonymousState__temp36","loopArray405","loopArray406","loopArray407","$compid__1301","showGreyBlock","estimateTip","showCupboard","cupboard","is_takeaway","tipNavigateBtns","OrderStateButtonId","goodsImages","buttons","record","OrderType","orderNumber","takeawayTitle","takeawayCategory","price"],t.anonymousFunc2Map={},t.anonymousFunc3Map={},t.customComponents=["OrderCardHeader","ServiceContent"],$(t,e)}(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(M,c.default.Component),u(M,[{key:"_constructor",value:function(e){(function e(t,n,a){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);return void 0!==r?"value"in r?r.value:void 0!==(r=r.get)?r.call(a):void 0:null!==(t=Object.getPrototypeOf(t))?e(t,n,a):void 0})(M.prototype.__proto__||Object.getPrototypeOf(M.prototype),"_constructor",this).call(this,e),this.$$refs=new c.default.RefsArray}},{key:"_createData",value:function(){var e=this;this.__state=arguments[0]||this.state||{},this.__props=arguments[1]||this.props||{};var t=this.$prefix,n=(0,s.genCompid)(t+"$compid__1301"),r=(ve=i(n,2))[0],u=ve[1],d=this.__props,T=d.record,x=void 0===(Se=d.type)?"current":Se,$=d.onClick,M=d.requestTime,U=d.onCountDownFinish,j=d.againReCurrentOrder,H=d.cancelOrderHandler,K=d.walletPayHandler,V=d.orderRemainingTimeList,z=(ke=(0,b.default)("code")).take_btn_check_done,G=ke.take_toast_long_wait,q=ke.common_confirm,Y=ke.common_cancel,J=ke.take_del_modal_title,Q=ke.take_del_modal_content,W=(ke.take_cupboard_modal_title,ke.take_cupboard_modal_content,ke.take_cupboard_modal_confirmText,Ge=T||{}).delivery,X=Ge.is_takeaway,Z=Ge.pickup_no,ee=Ge.cupboard,te=Ge.shop,ne=Ge.treatOrderFlag,ae=(Pe=W||{}).delivery_name,re=Pe.delivery_phone,oe=void 0===(Ae=Pe.company)?0:Ae,ie=Pe.out_delivery_no,ue=(He=te||{}).contact_phone,de=void 0===($e=He.latitude)?22.53332:$e,le=void 0===(Fe=He.longitude)?113.93041:Fe,se=void 0===(Me=He.name)?"":Me,ce=void 0===(Ue=He.city)?"":Ue,pe=void 0===(je=He.district)?"":je,_e=void 0===(ze=He.address)?"":ze,fe=Z||"0000";"TRADE_CLOSED"===Ge.status&&ee&&ee.cupboard_no&&(fe=ee.cupboard_no);var me,ye,ge,Oe,Se,Ie=(qe=(0,b.default)("code")).take_no_send,be=qe.take_shunfen,he=qe.take_meituan,Te=qe.take_tongda,ve=(n=qe.take_jingdong,(0,s.useReducer)((function(e,t){return o({},e,t)}),{orderStateVO:void 0,estimateTip:void 0,estimateTipColor:void 0,takeawayIcon:"",takeawayTitle:"",takeawayCategory:void 0,showCupboard:!1,tipNavigateBtns:void 0,buttons:[],createTime:"",price:"",itemCount:void 0,goodsImages:[]})),ke=(Se=i(ve,2))[0],Ee=Se[1],Ce={0:Ie,1:be,2:he,3:Te,4:n,5:"达达"},we=(0,s.useCallback)((function(e){var t="";switch(e){case B.OrderStateButtonId.LIST_CONTACT_SHOP:t=B.OrderStateButtonId.LIST_CONTACT_SHOP,ue&&(0,O.makePhoneCall)({phoneNumber:ue});break;case B.OrderStateButtonId.LIST_SHOP_LOCATION:t=B.OrderStateButtonId.LIST_SHOP_LOCATION,(0,I.openLocation)({latitude:Number(de),longitude:Number(le),name:se,address:ce+pe+_e,scale:18});break;case B.OrderStateButtonId.LIST_CONTACT_RIDER:t=B.OrderStateButtonId.LIST_CONTACT_RIDER,re&&(0,O.makePhoneCall)({phoneNumber:re});break;case B.OrderStateButtonId.LIST_RIDER_LOCATION:t=B.OrderStateButtonId.LIST_RIDER_LOCATION,T&&v.default.to(F.teaOrderDetail+"?orderNo="+T.no)}w.default.event(A.IEventName.CLICK_ORDER_LIST_BUTTON,"点击订单列表按钮",{type:A.IEventType.TRACK,data:{clickType:t}})}),[_e,ce,ue,re,pe,de,le,se,T]),Ae=(0,s.useCallback)((function(){$&&T&&$(T)}),[$,T]),Ne=(0,s.useCallback)((me=P(a.default.mark((function t(n){var r;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_.postCheckDone)(n);case 2:0===(r=e.sent).code?(k.default.showToast({title:z,icon:"none"}),j&&j()):k.default.showToast({title:r.msg,icon:"none"});case 4:case"end":return e.stop()}}),t,e)}))),function(e){return me.apply(this,arguments)}),[j,z]),Re=(0,s.useCallback)(P(a.default.mark((function t(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,T)return k.default.showLoading({title:""}),e.next=5,(0,_.openCupboard)({orderId:T.id,shopId:T.shop.id});e.next=7;break;case 5:k.default.hideLoading(),j&&j();case 7:e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),k.default.hideLoading(),E.default.script(e.t0,"pages/code/_code_order_card",{method:"requestOpenCupboard"});case 13:case"end":return e.stop()}}),t,e,[[0,9]])}))),[j,T]),Be=(0,s.useCallback)(P(a.default.mark((function t(){var n,r;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=void 0===(n=(T||{}).no)?"":n,e.next=4,(0,_.postOrderReminder)(n);case 4:if(0===(r=e.sent).code)return k.default.showToast({title:G,icon:"none"}),e.abrupt("return");e.next=8;break;case 8:k.default.showToast({title:r.msg,icon:"none"}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),E.default.script(e.t0,"pages/code/_code/order_card",{method:"remindOrder"});case 14:case"end":return e.stop()}}),t,e,[[0,11]])}))),[T,G]),Le=(0,s.useCallback)((ye=P(a.default.mark((function t(n){var r,o,i;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=d.deleteOrder,k.default.showLoading({title:""}),e.next=5,(0,_.postDelOrder)(n);case 5:i=e.sent,k.default.hideLoading(),i=(o=i||{}).msg,0===(void 0===(o=o.code)?-1:o)?r&&r(n):k.default.showToast({title:i,icon:"none"}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),k.default.hideLoading(),E.default.script(e.t0,"pages/code/_code/order_card");case 15:case"end":return e.stop()}}),t,e,[[0,11]])}))),function(e){return ye.apply(this,arguments)}),[d]),De=(ge=P(a.default.mark((function t(n){var r,o;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.default.showLoading({title:"加载中"}),e.next=3,(0,R.checkOrderInvoiceState)({no:n});case 3:if(o=e.sent,c.default.hideLoading(),o=(r=o||{}).data,0!==(void 0===(r=r.code)?-1:r)){e.next=20;break}if(0===o)return N.default.openInvoiceData.orderNoA=[n],N.default.openInvoiceData.orderType=1,N.default.successRoute="1",c.default.navigateTo({url:F.invoiceOpen}),e.abrupt("return");e.next=13;break;case 13:if(1===o)return D.default.ejectInvoiceModal("new"),e.abrupt("return");e.next=16;break;case 16:if(2===o)return(0,S.setStorage)("no",n),D.default.ejectInvoiceModal("service"),e.abrupt("return");e.next=20;break;case 20:N.default.openInvoiceData.orderNoA=[n],N.default.openInvoiceData.orderType=1,N.default.successRoute="1",c.default.navigateTo({url:F.invoiceOpen});case 24:case"end":return e.stop()}}),t,e)}))),function(e){return ge.apply(this,arguments)}),xe=(0,s.useCallback)((Oe=P(a.default.mark((function t(n){var r,o,i,u,d,s,c,p,g,O;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=void 0===(d=(g=T||{}).no)?"":d,o=void 0===(p=g.id)?"":p,i=g.orderLogisticsVO,u=void 0===(s=g.orderType)?"O":s,d=void 0===(c=g.spell_unique_id)?"":c,s=void 0===(p=g.partDelivery)?null:p,c="",e.t0=n,e.next=e.t0===B.OrderStateButtonId.LOGISTICS?5:e.t0===B.OrderStateButtonId.IMMEDIATE_PAY?10:e.t0===B.OrderStateButtonId.CANCEL_ORDER?20:e.t0===B.OrderStateButtonId.CONFIRM_PICK_UP_TEA?23:e.t0===B.OrderStateButtonId.REQUEST_REFUND?26:e.t0===B.OrderStateButtonId.REMINDER_ORDER?34:e.t0===B.OrderStateButtonId.OPEN_INVOICE?37:e.t0===B.OrderStateButtonId.EVALUATION?39:e.t0===B.OrderStateButtonId.LOOK_EVALUATION?44:e.t0===B.OrderStateButtonId.ORDER_AGAIN?47:e.t0===B.OrderStateButtonId.OPEN_CUPBOARD?50:e.t0===B.OrderStateButtonId.REFUND_DETAIL?53:e.t0===B.OrderStateButtonId.REFUND_REJECT_REASON?56:e.t0===B.OrderStateButtonId.DELETE_ORDER?59:e.t0===B.OrderStateButtonId.RIDER_POSITION?62:e.t0===B.OrderStateButtonId.PICK_UP_TEA_CODE?65:68;break;case 5:return c=B.OrderStateButtonId.LOGISTICS,p=void 0===(O=(g=i||{}).shippingCode)?"":O,O=void 0===(O=g.shippingNo)?"":O,g=g.shippingCompany,O=null===s||2===Number(s)?F.logisticsTrend+"?shippingCompanyCode="+p+"&shippingCompany="+g+"&shippingNo="+O:F.codeMallLogistics+"?orderNo="+r,v.default.to(O),e.abrupt("break",68);case 10:if(c=B.OrderStateButtonId.IMMEDIATE_PAY,!T){e.next=19;break}if(m.default.isDifferentClientPay(T))return k.default.showToast({title:(0,y.getLang)().take_order_unpay,icon:"none"}),e.abrupt("return");e.next=15;break;case 15:return e.next=17,l.default.orderPay(""+o,r,d);case 17:"HEYTEA"===e.sent&&K&&K(T);case 19:return e.abrupt("break",68);case 20:return c=B.OrderStateButtonId.CANCEL_ORDER,H&&H(r),e.abrupt("break",68);case 23:return c=B.OrderStateButtonId.CONFIRM_PICK_UP_TEA,Ne(r),e.abrupt("break",68);case 26:return c=B.OrderStateButtonId.REQUEST_REFUND,k.default.showLoading({title:(0,y.getLang)().common_loading}),e.next=30,(0,_.checkRisk)();case 30:return O=e.sent,k.default.hideLoading(),0!==O.code||!O.data||1!==O.data.riskFlag&&2!==O.data.riskFlag?v.default.to(F.refundApply+"?orderId="+o+"&pagefrom="+("O"===u?"HEYTEA":"SHOPPING_MALL")+"&orderNo="+r+"&isTake="+X):k.default.showModal({title:"风险提醒",content:"您已多次退款，如果继续退款，可能影响账号的后续使用，是否继续？",confirmColor:"#DEB07F",confirmText:"否",cancelColor:"#343434",cancelText:"是",onCancelPress:function(){v.default.to(F.refundApply+"?orderId="+o+"&pagefrom="+("O"===u?"HEYTEA":"SHOPPING_MALL")+"&orderNo="+r+"&isTake="+X)}}),e.abrupt("break",68);case 34:return c=B.OrderStateButtonId.REMINDER_ORDER,Be(),e.abrupt("break",68);case 37:return 0===r.indexOf("S")?(N.default.successRoute="1",v.default.to(F.orderInvoiceList+"?type=mart")):De(r),e.abrupt("break",68);case 39:if(c=B.OrderStateButtonId.EVALUATION,te){e.next=42;break}return e.abrupt("return");case 42:return v.default.to(F.evaluation+"?shopName="+te.name+"&shopId="+te.id+"&isTakeaway="+X+"&orderId="+o+(W?"&company="+W.company:"")),e.abrupt("break",68);case 44:return c=B.OrderStateButtonId.LOOK_EVALUATION,te&&v.default.to(F.evaluationDetail+"?shopName="+te.name+"&shopId="+te.id+"&isTakeaway="+X+"&orderId="+o+(W?"&company="+W.company:"")),e.abrupt("break",68);case 47:return c=B.OrderStateButtonId.ORDER_AGAIN,T&&(T.orderType===f.default.S?(0,L.oneMoreOrder)(null,T):(0,L.oneMoreOrder)(T,null)),e.abrupt("break",68);case 50:return c=B.OrderStateButtonId.OPEN_CUPBOARD,k.default.showModal({title:(0,y.getLang)().take_cupboard_title,content:(0,y.getLang)().take_confirm_closed_cupboard,confirmColor:"#DEB07F",confirmText:(0,y.getLang)().common_ensure,cancelColor:"#343434",cancelText:(0,y.getLang)().common_cancel,onConfirmPress:function(){Re()}}),e.abrupt("break",68);case 53:return c=B.OrderStateButtonId.REFUND_DETAIL,v.default.to(F.refundCause+"?orderNo="+r),e.abrupt("break",68);case 56:return c=B.OrderStateButtonId.REFUND_REJECT_REASON,v.default.to(F.refundCause+"?type=refundPass&orderNo="+r+"&refundType=HEYTEA"),e.abrupt("break",68);case 59:return c=B.OrderStateButtonId.DELETE_ORDER,k.default.showModal({title:J,content:Q,confirmText:q,cancelText:Y,onCancelPress:function(){},onConfirmPress:function(){Le(r)}}),e.abrupt("break",68);case 62:return c=B.OrderStateButtonId.RIDER_POSITION,T&&("O"===T.orderType?v.default.to(F.teaOrderDetail+"?orderNo="+T.no):v.default.to(F.mallOrderDetail+"?orderNo="+T.no)),e.abrupt("break",68);case 65:return c=B.OrderStateButtonId.PICK_UP_TEA_CODE,v.default.to(F.teaOrderDetail+"?orderNo="+r+"&isTakeaway="+X+"&isPickUpTeaCode=true"),e.abrupt("break",68);case 68:w.default.event(A.IEventName.CLICK_ORDER_LIST_BUTTON,"点击订单列表按钮",{type:A.IEventType.TRACK,data:{clickType:c}});case 69:case"end":return e.stop()}}),t,e)}))),function(e){return Oe.apply(this,arguments)}),[H,Y,q,W,X,Ne,T,Be,Le,Re,te,Q,J,K]);(0,s.useEffect)((function(){var e=function(e){if(e&&e.list&&e.list.tip)return e.list.tip()},t=function(e){if(e&&e.list)return e.list.tipColor},n=function(e){if(T&&T.is_takeaway&&e&&e.list&&e.list.icon)return e.list.icon},a=function(e){return T&&T.is_takeaway?e&&e.list&&e.list.title?e.list.title():ae:""},r=function(e){if(T&&T.is_takeaway&&e){if(e.statusType===C.default.WAIT_EXAMINE||e.statusType===C.default.FULL_REFUND||e.statusType===C.default.REFUSED)return;if(ie)return Ce[oe]}},o=function(){return!!T&&Boolean(ee&&ee.cupboard_no)&&T.order_status!==C.default.TRADE_CLOSED},i=function(e){if(e&&e.list)return e.list.navigates},u=function(){var e=[],t=0;return T&&(T.items&&T.items.forEach((function(n){n.images&&Array.isArray(n.images)&&0<n.images.length&&e.push(n.images[0].url),t+=n.quantity})),T.storeItems&&T.storeItems.forEach((function(t){t.images&&Array.isArray(t.images)&&0<t.images.length&&e.push(t.images[0].url)})),T.set_items&&Array.isArray(T.set_items)&&T.set_items.forEach((function(n){var a=n.items&&n.items.data?n.items.data:n.items;console.log("itemList",a),a&&Array.isArray(a)&&a.forEach((function(t){(t=t.images&&t.images.data?t.images.data:t.images)&&Array.isArray(t)&&0<t.length&&e.push(t[0].url)})),t+=n.quantity})),4<e.length&&(e.splice(4,e.length-4),e.push((0,g.getSrc)("/img/code/list/ic_more_goods.png",100)))),{imgs:e,total:t}},d=function(e){return m.default.getOrderStateVO(T,e)}(function(){if(V)return V.find((function(e){return T&&e.orderId===T.id}))}()),l=e(d);e=t(d),t=n(d),n=a(d),a=r(d),r=o(),o=i(d),i=u(),u=[],d&&d.list&&d.list.buttons&&(u=d.list.buttons),Ee({orderStateVO:d,estimateTip:l,estimateTipColor:e,takeawayIcon:t,takeawayTitle:n,takeawayCategory:a,showCupboard:r,tipNavigateBtns:o,buttons:u,createTime:T?T.created_at:"",price:T?T.orderType===f.default.S?"￥"+Number(T.payment):""+(0,h.shopCurrency)(T.shop.currency)+Number(T.payment):"",itemCount:i.total,goodsImages:i.imgs})}),[V,T]);var Pe=ke.orderStateVO,$e=ke.estimateTip,Fe=ke.showCupboard,Me=ke.estimateTipColor,Ue=ke.takeawayIcon,je=ke.takeawayTitle,He=ke.takeawayCategory,Ke=ke.tipNavigateBtns,Ve=ke.buttons,ze=(ke.createTime,ke.price),Ge=ke.itemCount,qe=ke.goodsImages;return ve=Boolean(T&&(!T.orderType||T.orderType===f.default.O)&&"current"===x&&$e),X&&(je||(ve=!1)),this.anonymousFunc0=Ae,this.anonymousFunc1=U,Se="none"!==$e?(0,s.internal_inline_style)({color:Me}):null,Ie=Fe&&ee&&!X?(0,s.internal_inline_style)({display:"flex",flexDirection:"row",alignItems:"flex-end"}):null,be="none"!==$e?(0,s.internal_inline_style)({color:Me}):null,he=Boolean(Ue)?(0,g.getSrc)(Ue,-1):null,Te=Boolean(X&&$e)?(0,s.internal_inline_style)({display:"flex",flexDirection:"row",alignItems:"flex-end"}):null,n="none"!==$e?(0,s.internal_inline_style)({color:Me}):null,ke=Ge?p.default.template((0,y.getLang)("settlement").sett_total_jian,{quantity:Ge}):"",x=Boolean(!X&&Z&&!Fe),Ae=Boolean(X&&$e),U=Boolean(Ue),Me=Boolean(He),Z=(Ge=Boolean(Ke)&&!(Boolean(ne)&&Boolean(X)))?Ke.map((function(n,a){var r=null,o=null,u=null;(n={$original:(0,s.internal_get_original)(n)}).$original.id===B.OrderStateButtonId.LIST_SERVICE_CONTENT&&(u=Ke?"order-card-pick-out-btn-"+a:null,o=Ke?""+(0,g.getSrc)(n.$original.icon||"",-1):null,r=Ke?n.$original.text():null);var d=Ke?"order-card-pick-out-btn-"+a:null,l="giezz"+a;e.anonymousFunc2Map[l]=function(e){e.stopPropagation(),we(n.$original.id)};var c=Ke?""+(0,g.getSrc)(n.$original.icon||"",-1):null,p=Ke?n.$original.text():null,_=(0,s.genCompid)(t+"gigzzzzzzz"+a,!0);return _=(a=i(_,2))[0],a=a[1],n.$original.id===B.OrderStateButtonId.LIST_SERVICE_CONTENT&&s.propsManager.set({},a,_),{$loopState__temp12:r,$loopState__temp10:o,$loopState__temp8:u,$loopState__temp14:d,_$indexKey:l,$loopState__temp16:c,$loopState__temp18:p,$compid__1300:a,$original:n.$original}})):[],Ue=qe.map((function(e,t){return e={$original:(0,s.internal_get_original)(e)},{$loopState__temp20:"order-card-goods-pic-"+t,$loopState__temp22:(0,s.internal_inline_style)(e.$original&&-1<e.$original.indexOf("ic_more_goods")?{height:(0,O.scalePx2dp)(68),width:(0,O.scalePx2dp)(68)}:{}),$original:e.$original}})),ne=0<Ve.length?Ve.map((function(t,n){var a=null;((t={$original:(0,s.internal_get_original)(t)}).$original.id===B.OrderStateButtonId.MAKE_TEA_PROGRESS||T&&T.orderType===f.default.S&&t.$original.id===B.OrderStateButtonId.REQUEST_REFUND)&&(a=0<Ve.length?"order-card-footer-btn-"+n:null);var r=0<Ve.length?(0,s.internal_inline_style)(t.$original.color?{borderColor:"#e9cbaa"}:{}):null;return n="gifzz"+n,e.anonymousFunc3Map[n]=function(e){e.stopPropagation(),xe(t.$original.id)},{$loopState__temp25:a,$loopState__temp27:r,_$indexKey2:n,$loopState__temp29:0<Ve.length?(0,s.internal_inline_style)(t.$original.color?{color:t.$original.color}:{}):null,$loopState__temp31:0<Ve.length?t.$original.text():null,$original:t.$original}})):[],s.propsManager.set({record:T,requestTime:M,onCountDownFinish:this.anonymousFunc1,orderStateVO:Pe},u,r),Object.assign(this.__state,{anonymousState__temp:Se,anonymousState__temp2:Ie,anonymousState__temp3:be,anonymousState__temp4:he,anonymousState__temp5:Te,anonymousState__temp6:n,anonymousState__temp23:ke,anonymousState__temp32:x,anonymousState__temp33:Ae,anonymousState__temp34:U,anonymousState__temp35:Me,anonymousState__temp36:Ge,loopArray405:Z,loopArray406:Ue,loopArray407:ne,$compid__1301:u,showGreyBlock:ve,estimateTip:$e,showCupboard:Fe,cupboard:ee,is_takeaway:X,tipNavigateBtns:Ke,OrderStateButtonId:B.OrderStateButtonId,goodsImages:qe,buttons:Ve,record:T,OrderType:f.default,orderNumber:fe,takeawayTitle:je,takeawayCategory:He,price:ze}),this.__state}},{key:"anonymousFunc0",value:function(e){}},{key:"anonymousFunc1",value:function(e){}},{key:"anonymousFunc2",value:function(e){for(var t,n=arguments.length,a=Array(1<n?n-1:0),o=1;o<n;o++)a[o-1]=arguments[o];return"object"===(void 0===a?"undefined":r(a))&&a.stopPropagation&&a.stopPropagation(),this.anonymousFunc2Map[e]&&(t=this.anonymousFunc2Map)[e].apply(t,a)}},{key:"anonymousFunc3",value:function(e){for(var t,n=arguments.length,a=Array(1<n?n-1:0),o=1;o<n;o++)a[o-1]=arguments[o];return"object"===(void 0===a?"undefined":r(a))&&a.stopPropagation&&a.stopPropagation(),this.anonymousFunc3Map[e]&&(t=this.anonymousFunc3Map)[e].apply(t,a)}}]),u=T=M,T.$$events=["anonymousFunc0","anonymousFunc2","anonymousFunc3"],T.$$componentPath="pages/code/_component/order_card/order_card",u=u,t.default=c.default.memo(u,(function(e,t){return e.isMainland===t.isMainland&&e.orderRemainingTimeList===t.orderRemainingTimeList&&e.record===t.record})),Component(n(0).default.createComponent(u))}},[[4e3,0,1,2,3]]]);
},{isPage:false,isComponent:true,currentFile:'pages/code/_component/order_card/order_card.js'});require("pages/code/_component/order_card/order_card.js");