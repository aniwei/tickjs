$gwx_XC_119=function(_,_v,_n,_p,_s,_wp,_wl,$gwn,$gwl,$gwh,wh,$gstack,$gwrt,gra,grb,TestTest,wfor,_ca,_da,_r,_rz,_o,_oz,_1,_1z,_2,_2z,_m,_mz,nv_getDate,nv_getRegExp,nv_console,nv_parseInt,nv_parseFloat,nv_isNaN,nv_isFinite,nv_decodeURI,nv_decodeURIComponent,nv_encodeURI,nv_encodeURIComponent,$gdc,nv_JSON,_af,_gv,_ai,_grp,_gd,_gapi,$ixc,_ic,_w,_ev,_tsd){return function(path,global){
if(typeof global==='undefined'){if (typeof __GWX_GLOBAL__==='undefined')global={};else global=__GWX_GLOBAL__;}if(typeof __WXML_GLOBAL__ === 'undefined') {__WXML_GLOBAL__={};
}__WXML_GLOBAL__.modules = __WXML_GLOBAL__.modules || {};
var e_={}
if(typeof(global.entrys)==='undefined')global.entrys={};e_=global.entrys;
var d_={}
if(typeof(global.defines)==='undefined')global.defines={};d_=global.defines;
var f_={}
if(typeof(global.modules)==='undefined')global.modules={};f_=global.modules || {};
var p_={}
__WXML_GLOBAL__.ops_cached = __WXML_GLOBAL__.ops_cached || {}
__WXML_GLOBAL__.ops_set = __WXML_GLOBAL__.ops_set || {};
__WXML_GLOBAL__.ops_init = __WXML_GLOBAL__.ops_init || {};
var z=__WXML_GLOBAL__.ops_set.$gwx_XC_119 || [];
function gz$gwx_XC_119_1(){
if( __WXML_GLOBAL__.ops_cached.$gwx_XC_119_1)return __WXML_GLOBAL__.ops_cached.$gwx_XC_119_1
__WXML_GLOBAL__.ops_cached.$gwx_XC_119_1=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([[7],[3,'$taroCompReady']])
})(__WXML_GLOBAL__.ops_cached.$gwx_XC_119_1);return __WXML_GLOBAL__.ops_cached.$gwx_XC_119_1
}
__WXML_GLOBAL__.ops_set.$gwx_XC_119=z;
__WXML_GLOBAL__.ops_init.$gwx_XC_119=true;
var x=['./pages/index/_index/shopping_bag/redemption_select.wxml'];d_[x[0]]={}
var m0=function(e,s,r,gg){
var z=gz$gwx_XC_119_1()
var eV2=_v()
_(r,eV2)
if(_oz(z,0,e,s,gg)){eV2.wxVkey=1
}
eV2.wxXCkey=1
return r
}
e_[x[0]]={f:m0,j:[],i:[],ti:[],ic:[]}
if(path&&e_[path]){
return function(env,dd,global){$gwxc=0;var root={"tag":"wx-page"};root.children=[]
;g="$gwx_XC_119";var main=e_[path].f
if (typeof global==="undefined")global={};global.f=$gdc(f_[path],"",1);
try{
main(env,{},root,global);
_tsd(root)
}catch(err){
console.log(err)
}
;g="";
return root;
}
}
}
}(__g.a,__g.b,__g.c,__g.d,__g.e,__g.f,__g.g,__g.h,__g.i,__g.j,__g.k,__g.l,__g.m,__g.n,__g.o,__g.p,__g.q,__g.r,__g.s,__g.t,__g.u,__g.v,__g.w,__g.x,__g.y,__g.z,__g.A,__g.B,__g.C,__g.D,__g.E,__g.F,__g.G,__g.H,__g.I,__g.J,__g.K,__g.L,__g.M,__g.N,__g.O,__g.P,__g.Q,__g.R,__g.S,__g.T,__g.U,__g.V,__g.W,__g.X,__g.Y,__g.Z,__g.aa);if(__vd_version_info__.delayedGwx||false)$gwx_XC_119();	if (__vd_version_info__.delayedGwx) __wxAppCode__['pages/index/_index/shopping_bag/redemption_select.wxml'] = [$gwx_XC_119, './pages/index/_index/shopping_bag/redemption_select.wxml'];else __wxAppCode__['pages/index/_index/shopping_bag/redemption_select.wxml'] = $gwx_XC_119( './pages/index/_index/shopping_bag/redemption_select.wxml' );
	;__wxRoute = "pages/index/_index/shopping_bag/redemption_select";__wxRouteBegin = true;__wxAppCurrentFile__="pages/index/_index/shopping_bag/redemption_select.js";define("pages/index/_index/shopping_bag/redemption_select.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
(wx.webpackJsonp=wx.webpackJsonp||[]).push([[360],{1245:function(e,t,n){"use strict";n.r(t);var o,i=n(573),a=n.n(i);for(o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);t.default=a.a},1920:function(e,t,n){e.exports=n.p+"pages/index/_index/shopping_bag/redemption_select.wxml"},3567:function(e,t,n){"use strict";n.r(t),n(3568);var o,i=n(1245);for(o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o)},3568:function(e,t,n){"use strict";n(1920)},3569:function(e,t,n){},573:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,i=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(o=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);o=!0);}catch(e){i=!0,a=e}finally{try{!o&&s.return&&s.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e};function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var s,u=n(0),c=_(u),p=_(n(1)),d=_(n(2)),l=_(n(13)),m=n(26),f=n(10),y=_(n(9)),g=n(48);function _(e){return e&&e.__esModule?e:{default:e}}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(){var e,t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];return(e=t=v(this,(e=h.__proto__||Object.getPrototypeOf(h)).call.apply(e,[this].concat(o)))).$usedState=["anonymousState__temp","loopArray476","redemptionCSS","Conf","redemptionProducts","langObj","shopMonetaryUnit","showRedemption","__fn_on","products","isParty","shoppingBagStore"],t.showSelectSpecification=function(e){var t=e.id,n=e.redemption_no,o=e.redemption_discount_value,i=e.category_name;e=e.category_id,(0,g.showSelectSpecificationView)({productId:t,payload:{redemption_no:n||"",redemption_discount_value:o,category_name:i,category_id:e}})},t.closeRedemptionActivity=function(){l.default.getInstance().events.trigger(p.default.eventNames.showRedemptionActivity,!1)},t.showRedemptionActivityAction=function(e){t.setState({showRedemption:e})},t.singleSpecAddToShoppingBag=function(e){var n=e.price,o=void 0!==(A=t.props.isParty)&&A,a=(N=t.props.shoppingBagStore).changeShoppingBagItem,r=N.shop,s=N.setIsShowShoppingBagDetail,u=N.setIsShowPartyBagDetail,c=e.img_url,p=void 0===(M=e.skus)?[{id:0,discount_price:"-1",is_join_queue:1,name:"",is_now_making:!1}]:M,d=e.support_takeaway,l=e.name,g=e.id,_=e.is_premade,v=e.has_box_fee,h=e.name_image,b=e.show_trademark,w=e.category_id,S=e.category_name,I=e.redemption_no,P=e.redemption_discount_value,A=e.is_appointment,N=w+"-"+g+"-"+[].join("/")+"-"+[].join("/")+"-"+[].join("/")+"-"+I,M=o?u:s;o=(e=i(p,1)[0]).id,s=void 0===(u=e.is_join_queue)?1:u,u=void 0===(p=e.name)?"":p,p=void 0!==(p=e.is_now_making)&&p,e=e.no,a([],N,1,{type:"IShoppingBagItem",supportTakeaway:1===d,categoryName:S||"",name:l,sname:u||l,price:{originPrice:Number(n),discountPrice:-1,originDiscountPrice:-1,materialPrice:0,redemptionDiscountPrice:Math.round(100*(0,m.times)(Number(n),Number(P)))/100},activityId:-1,attrs:"",shopId:r.id||0,quantity:1,skuId:o,skuNo:e,categoryId:w,productId:g,attributeIds:[],materialIds:[],materialIdNames:[],specificationIds:[],uniqueId:N,originUniqueId:N,isPreMade:Number(_),isJoinQueue:s,hasBoxFee:Number(v)||0,nameImage:h,showTrademark:b,redemptionNo:I,isNowMaking:p,appointable:A,productImgUrl:c}),t.closeRedemptionActivity(),M(),y.default.event(f.IEventName.ADD_TO_BAG,"加入购物袋",{type:f.IEventType.TRACK,data:{goodsId_var:""+g,goodsName_var:u,fstCat_var:S,buyQuantity_var:1,goodsSpecif_var:"",goodsSpecifId_var:o.toString()}})},t.anonymousFunc0Map={},t.anonymousFunc1Map={},t.anonymousFunc2Map={},t.customComponents=[],v(t,e)}n(3569),function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(h,u.Component),a(h,[{key:"_constructor",value:function(e){(function e(t,n,o){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);return void 0!==i?"value"in i?i.value:void 0!==(i=i.get)?i.call(o):void 0:null!==(t=Object.getPrototypeOf(t))?e(t,n,o):void 0})(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"_constructor",this).call(this,e),this.state={redemptionProducts:[],showRedemption:!1},this.$$refs=new c.default.RefsArray}},{key:"componentDidMount",value:function(){var e=this;l.default.getInstance().events.on(p.default.eventNames.redemptionProduct,(function(t){for(var n=[],o=e.props.products,i=void 0===o?[]:o,a=function(e,o){for(var a,r=t[e],s=void 0===(c=r.categoryId)?"0":c,u=void 0===(a=r.productId)?"0":a,c=void 0===(e=r.activityNo)?"":e,p=(e=void 0===(a=r.discountValue)?"1":a,null),d=0,l=i.length;d<l;d++){var m=i[d],f=void 0===(f=m.id)?0:f;if(Number(s)===f){p=m;break}}p&&(a=void 0===(r=p.data)?[]:r,r=void 0===(r=p.title)?"":r,(a=a.find((function(e){return e=void 0===(e=e.id)?0:e,Number(u)===e})))&&(a.category_name=r,a.category_id=Number(s),a.redemption_no=c||"0",a.redemption_discount_value=e||"1",a.has_stock&&n.push(a)))},r=0,s=t.length;r<s;r++)a(r);0<n.length?l.default.getInstance().events.trigger(p.default.eventNames.hasRedemptionActivity,!0):l.default.getInstance().events.trigger(p.default.eventNames.hasRedemptionActivity,!1),e.setState({redemptionProducts:n})})),l.default.getInstance().events.on(p.default.eventNames.showRedemptionActivity,this.showRedemptionActivityAction)}},{key:"componentWillUnmount",value:function(){l.default.getInstance().events.off(p.default.eventNames.showRedemptionActivity,this.showRedemptionActivityAction),l.default.getInstance().events.off(p.default.eventNames.redemptionProduct)}},{key:"_createData",value:function(){var e=this;this.__state=arguments[0]||this.state||{},this.__props=arguments[1]||this.props||{},this.$prefix;var t=void 0===(i=this.__props.shopMonetaryUnit)?"￥":i,n=d.default.getLang("","index"),o=(a=this.__state).redemptionProducts,i=a.showRedemption,a={};o&&o.length&&(640<(r=160*o.length)&&(r=640),a={height:c.default.pxTransform(r)});var r="c-redemption-select";return i&&0<o.length?r+=" c-redemption-select-z-show":r+=" c-redemption-select-z-dismiss",a=(0,u.internal_inline_style)(a),o=o.map((function(t,n){var o=(t={$original:(0,u.internal_get_original)(t)}).$original,i=o.img_url,a=o.name,r=o.id,s=o.price,c=o.is_single_specification,p=o.redemption_discount_value,d=Math.round(100*(0,m.times)(Number(s),Number(p||1)))/100,l="hibzz"+n;return e.anonymousFunc0Map[l]=function(){e.showSelectSpecification(t.$original)},o="hiczz"+n,e.anonymousFunc1Map[o]=function(n){e.singleSpecAddToShoppingBag(t.$original),n.stopPropagation()},n="hidzz"+n,e.anonymousFunc2Map[n]=function(n){e.showSelectSpecification(t.$original),n.stopPropagation()},{img_url:i,name:a,id:r,price:s,is_single_specification:c,redemption_discount_value:p,dtPrice:d,_$indexKey:l,_$indexKey2:o,_$indexKey3:n,$original:t.$original}})),Object.assign(this.__state,{anonymousState__temp:a,loopArray476:o,redemptionCSS:r,Conf:p.default,langObj:n,shopMonetaryUnit:t}),this.__state}},{key:"anonymousFunc0",value:function(e){for(var t,n=arguments.length,o=Array(1<n?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return this.anonymousFunc0Map[e]&&(t=this.anonymousFunc0Map)[e].apply(t,o)}},{key:"anonymousFunc1",value:function(e){for(var t,n=arguments.length,i=Array(1<n?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];return"object"===(void 0===i?"undefined":o(i))&&i.stopPropagation&&i.stopPropagation(),this.anonymousFunc1Map[e]&&(t=this.anonymousFunc1Map)[e].apply(t,i)}},{key:"anonymousFunc2",value:function(e){for(var t,n=arguments.length,i=Array(1<n?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];return"object"===(void 0===i?"undefined":o(i))&&i.stopPropagation&&i.stopPropagation(),this.anonymousFunc2Map[e]&&(t=this.anonymousFunc2Map)[e].apply(t,i)}}]),a=s=h,s.$$events=["closeRedemptionActivity","anonymousFunc0","anonymousFunc1","anonymousFunc2"],s.$$componentPath="pages/index/_index/shopping_bag/redemption_select",a.defaultProps={products:[],shopMonetaryUnit:""},t.default=a,Component(n(0).default.createComponent(a))}},[[3567,0,1,2,3]]]);
},{isPage:false,isComponent:true,currentFile:'pages/index/_index/shopping_bag/redemption_select.js'});require("pages/index/_index/shopping_bag/redemption_select.js");